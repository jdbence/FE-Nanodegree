"use strict";var El=function(){var e=function(){};return e.removeClass=function(e,t){var i,n;if(e)for(this.isHTMLCollection(e)||(e=[e]),i=0;i<e.length;i++)n=e[i].className.replace(" "+t,""),e[i].className=n},e.addClass=function(e,t){var i;if(e)for(this.isHTMLCollection(e)||(e=[e]),i=0;i<e.length;i++)e[i].className.indexOf(" "+t)<0&&(e[i].className+=" "+t)},e.addListener=function(e,t,i){var n;if(e)for(void 0===e.length&&(e=[e]),n=0;n<e.length;n++)e[n].addEventListener(t,i)},e.show=function(e){this.removeClass(this.getElements(e),"hidden")},e.hide=function(e){this.addClass(this.getElements(e),"hidden")},e.getElements=function(e){return this.isString(e)?-1!==e.indexOf("#")?document.getElementById(e):document.getElementsByClassName(e):null},e.isString=function(e){return this.isType(e,"[object String]")},e.isHTMLCollection=function(e){return this.isType(e,"[object HTMLCollection]")},e.isType=function(e,t){return Object.prototype.toString.call(e)===t},e}(),Entity=function(e,t,i,n,s,r){this.owner=e,e.x=t,e.y=i,e.sprite=n||null,e.offsetX=s||0,e.offsetY=r||0,e.flipped=!1,e.alpha=1,e.isAlive=!0,e.speed=0,e.angle=0};!function(){function e(){var e=!0;for(var t in r)r.hasOwnProperty(t)&&!r[t]&&(e=!1);return e}function t(t){if(r[t])return r[t];var i=new Image;i.onload=function(){r[t]=i,e()&&o.forEach(function(e){e()})},r[t]=!1,i.src=t}function i(e){e instanceof Array?e.forEach(function(e){t(e)}):t(e)}function n(e){return r[e]}function s(e){o.push(e)}var r={},o=[];window.Resources={load:i,get:n,onReady:s,isReady:e}}();var Collision=function(){var e=function(){};return e.isColliding=function(e,t){return e.x<t.x+t.width&&e.x+t.width>t.x&&e.y<t.y+t.height&&e.height+e.y>t.y},e}(),Engine=function(e){function t(e){f.entities.forEach(function(t){t.update(e)}),player.update(e)}function i(e){t(e)}function n(){var e;for(e=0;e<f.entities.length;e++)f.entities[e].render(u);player.render(u)}function s(){var e,t,i=["images/water-block.png","images/stone-block.png","images/stone-block.png","images/stone-block.png","images/grass-block.png","images/grass-block.png"],s=6,r=5;for(u.clearRect(0,0,c.width,c.height),e=0;s>e;e++)for(t=0;r>t;t++)u.drawImage(Resources.get(i[e]),101*t,83*e);n()}function r(){if(d){var e=Date.now(),t=(e-l)/1e3;i(t),s(),l=e,h.requestAnimationFrame(r)}}function o(){f.reset(),d=!0,l=Date.now(),r()}var l,a=e.document,h=e.window,c=a.createElement("canvas"),u=c.getContext("2d"),d=!1,f=function(){};return f.entities=[],f.width=c.width=505,f.height=c.height=606,c.className+=" canvas-game",a.getElementsByClassName("level")[0].appendChild(c),f.reset=function(){d=!1},f.pause=function(){d=!1},f.preload=function(){function e(e,t){var i=["char-boy","char-cat-girl","char-horn-girl","char-pink-girl","char-princess-girl","enemy-bug","Gem Blue","Gem Green","Gem Orange","grass-block","Heart","Key","Rock","Selector","Star","stone-block","water-block"];return i.map(function(i){return e+i+"."+t})}Resources.load(e("images/","png")),Resources.isReady()?o():Resources.onReady(o)},e.ctx=u,f}(this),Model=function(){var e={},t=function(){};return t.set=function(t,i){return e[t]=i,i},t.get=function(t){return e[t]},t}(),Timer=function(e,t){this.intervals=e,this.delay=t,this.running=!1,this.listeners={},this.time=0,this.laps=0};(function(){this.start=function(){this.running=!0,this.time=this.delay,this.laps=this.intervals},this.update=function(e){this.running&&(this.time=Math.max(0,this.time-e),0===this.time&&(this.laps-=1,this.laps<=0?(this.running=!1,this.dispatch("COMPLETE")):(this.time=this.delay,this.dispatch("UPDATE"))))},this.on=function(e,t){this.listeners.hasOwnProperty(e)||(this.listeners[e]=[]),this.listeners[e].push(t)},this.dispatch=function(e){var t,i;if(this.listeners.hasOwnProperty(e))for(i=this.listeners[e],t=0;t<i.length;t++)i[t](this)}}).call(Timer.prototype);var Grid=function(){var e=function(){};return e.cellWidth=101,e.cellHeight=83,e.columns=5,e.rows=6,e.offsetY=50,e.getXFromColumn=function(t){var i=Math.max(0,Math.min(t,e.columns-1));return i*e.cellWidth},e.getYFromRow=function(t){return t=Math.max(0,Math.min(t,e.rows-1)),e.offsetY+t*e.cellHeight},e}(),Level=function(){this.reset()};(function(){this.reset=function(){this.level=Model.set("level",0),this.lastLevel=7,Model.set("level_total_time",15),Model.set("level_complete",!1)},this.next=function(){this.level=Model.set("level",this.level+1)},this.addEntities=function(){var e,t=this.levelData();for(Engine.entities=[],e=0;e<t.length;e++)t[e].hasOwnProperty("t")?"key"===t[e].t?Engine.entities.push(new Key(t[e].r,t[e].c)):"water"===t[e].t&&Engine.entities.push(new Water(t[e].r,t[e].c)):Engine.entities.push(new Enemy(t[e].r,t[e].c,t[e].s))},this.levelData=function(){return 0===this.level?[{r:0,c:0,t:"water"},{r:0,c:1,t:"water"},{r:0,c:2,t:"key"},{r:0,c:3,t:"water"},{r:0,c:4,t:"water"}]:1===this.level?[{r:3,c:0,s:200},{r:3,c:2,s:200},{r:3,c:4,s:200},{r:0,c:0,t:"water"},{r:0,c:1,t:"water"},{r:0,c:2,t:"key"},{r:0,c:3,t:"water"},{r:0,c:4,t:"water"}]:2===this.level?[{r:1,c:0,s:-100},{r:1,c:1,s:-100},{r:1,c:3,s:-100},{r:1,c:4,s:-100},{r:0,c:0,t:"water"},{r:0,c:1,t:"water"},{r:0,c:2,t:"key"},{r:0,c:3,t:"water"},{r:0,c:4,t:"water"}]:3===this.level?[{r:2,c:0,s:500},{r:2,c:4,s:600},{r:0,c:0,t:"water"},{r:0,c:1,t:"water"},{r:0,c:2,t:"key"},{r:0,c:3,t:"water"},{r:0,c:4,t:"water"}]:4===this.level?[{r:1,c:0,s:-100},{r:1,c:1,s:-100},{r:1,c:3,s:-100},{r:1,c:4,s:-100},{r:3,c:0,s:200},{r:3,c:2,s:200},{r:3,c:4,s:200},{r:0,c:0,t:"water"},{r:0,c:1,t:"water"},{r:0,c:2,t:"key"},{r:0,c:3,t:"water"},{r:0,c:4,t:"water"}]:5===this.level?[{r:2,c:0,s:500},{r:2,c:4,s:600},{r:3,c:0,s:200},{r:3,c:2,s:200},{r:3,c:4,s:200},{r:0,c:0,t:"water"},{r:0,c:1,t:"water"},{r:0,c:2,t:"key"},{r:0,c:3,t:"water"},{r:0,c:4,t:"water"}]:6===this.level?[{r:1,c:0,s:-100},{r:1,c:1,s:-100},{r:1,c:3,s:-100},{r:1,c:4,s:-100},{r:2,c:0,s:500},{r:2,c:4,s:600},{r:0,c:0,t:"water"},{r:0,c:1,t:"water"},{r:0,c:2,t:"key"},{r:0,c:3,t:"water"},{r:0,c:4,t:"water"}]:[{r:1,c:0,s:-100},{r:1,c:1,s:-100},{r:1,c:3,s:-100},{r:1,c:4,s:-100},{r:2,c:0,s:500},{r:2,c:4,s:600},{r:3,c:0,s:200},{r:3,c:2,s:200},{r:3,c:4,s:200},{r:0,c:0,t:"water"},{r:0,c:1,t:"water"},{r:0,c:2,t:"key"},{r:0,c:3,t:"water"},{r:0,c:4,t:"water"}]}}).call(Level.prototype);var Scene=function(){var e=function(){},t=new Level,i=function(e){var t=e.target.src;player.sprite=t.slice(t.indexOf("/images/")+1,t.length),El.removeClass(El.getElements("selected-char"),"selected-char"),El.addClass(e.target,"selected-char")};return e.startMenu=function(){var e,t=document.getElementsByClassName("char");for(e=0;e<t.length;e++)t[e].addEventListener("click",i);Engine.reset(),El.show("char_select"),El.hide("level"),El.hide("gameover"),El.hide("gamewin"),scene="char_select"},e.startGame=function(e){e=e||!1,e?t.reset():Model.set("level_complete",!1),Engine.preload(),player.respawn(),t.addEntities(),Engine.entities.push(ui),ui.start(),El.show("level"),El.hide("char_select"),El.hide("gameover"),El.hide("gamewin"),scene="level"},e.endGame=function(){El.show("gameover"),Engine.pause()},e.winGame=function(){El.show("gamewin"),Engine.pause()},e.levelComplete=function(){Model.set("level_complete",!0),Engine.entities.push(new Explosion(0,2)),setTimeout(e.nextLevel,1500)},e.nextLevel=function(){t.next(),t.level>t.lastLevel?e.winGame():e.startGame()},e}(),Sensor=function(e,t,i,n,s,r){this.x=e,this.y=t,this.width=i,this.height=n,this.offsetX=s,this.offsetY=r,this.debug=!1};(function(){this.render=function(e){this.debug&&(e.beginPath(),e.strokeStyle="red",e.rect(this.x,this.y,this.width,this.height),e.stroke())},this.position=function(e,t){this.x=e+this.offsetX,this.y=t+this.offsetY}}).call(Sensor.prototype);var Render=function(e){this.owner=e};(function(){var e={x:0,y:0};this.render=function(e){var t=this.owner.flipped?-1:1,i=this.getPosition();e.save(),e.scale(t,1),e.globalAlpha=this.owner.alpha||1,e.drawImage(Resources.get(this.owner.sprite),i.x,i.y,101,171),e.restore()},this.getPosition=function(){var t=this.owner.flipped?-1:1;return e.x=(this.owner.x+this.owner.offsetX)*t,e.x+=1===t?0:-101,e.y=this.owner.y+this.owner.offsetY,e}}).call(Render.prototype);var UI=function(){this.keys=0,this.levelTime=0,this.time=0};(function(){this.start=function(){this.keys=Model.get("level"),this.levelTime=Model.get("level_total_time"),this.levelTimer=new Timer(1,this.levelTime),this.levelTimer.on("COMPLETE",this.onTimerComplete),this.levelTimer.start()},this.onTimerComplete=function(){Model.get("level_complete")||Scene.endGame()},this.formattedTime=function(){var e=Math.round(this.levelTimer.time);return"00:"+(e>9?e:"0"+e)},this.text=function(e,t,i,n,s){e.save(),e.font="30px Comic Sans MS",("left"===s||"right"===s||"center"===s)&&(e.textAlign=s),e.fillText(t,i,n),e.restore()},this.update=function(e){Model.get("level_complete")||(this.keys=Model.get("level"),this.levelTimer.update(e))},this.render=function(e){this.text(e,"Keys: x"+this.keys,0,30),this.text(e,"Time: "+this.formattedTime(),Engine.width,30,"right")}}).call(UI.prototype);var Key=function(e,t){this.entity=new Entity(this,Grid.getXFromColumn(t),Grid.getYFromRow(e),"images/Key.png",0,-33-Grid.offsetY),this.sensor=new Sensor(0,0,50,30,25,25),this.renderer=new Render(this)};(function(){this.update=function(e){this.sensor.position(this.x,this.y),player&&player.isAlive&&this.isAlive&&Collision.isColliding(this.sensor,player.sensor)&&(this.isAlive=!1,player.hit("key"))},this.render=function(e){this.renderer.render(e),this.sensor.render(e)}}).call(Key.prototype);var Water=function(e,t){this.entity=new Entity(this,Grid.getXFromColumn(t),Grid.getYFromRow(e),"images/Key.png",0,-33-Grid.offsetY),this.sensor=new Sensor(0,0,50,30,25,25)};(function(){this.update=function(e){this.sensor.position(this.x,this.y),player&&player.isAlive&&Collision.isColliding(this.sensor,player.sensor)&&player.hit("water")},this.render=function(e){this.sensor.render(e)}}).call(Water.prototype);var Enemy=function(e,t,i){this.entity=new Entity(this,Grid.getXFromColumn(t),Grid.getYFromRow(e),"images/enemy-bug.png",0,-33-Grid.offsetY),this.row=e,this.speed=i,this.flipped=0>i,this.sensor=new Sensor(0,0,50,50,25,12),this.renderer=new Render(this)};(function(){this.update=function(e){this.x+=e*this.speed,this.x>Grid.columns*Grid.cellWidth+Grid.cellWidth?this.x=Grid.getXFromColumn(0)-Grid.cellWidth:this.x<-Grid.cellWidth&&(this.x=Grid.columns*Grid.cellWidth+Grid.cellWidth),this.sensor.position(this.x,this.y),player&&player.isAlive&&Collision.isColliding(this.sensor,player.sensor)&&player.hit("enemy")},this.render=function(e){this.renderer.render(e),this.sensor.render(e)}}).call(Enemy.prototype);var Player=function(){this.entity=new Entity(this,0,0,"images/char-boy.png",0,-33-Grid.offsetY),this.isAlive=!1,this.alpha=0,this.sensor=new Sensor(0,0,50,30,25,25),this.renderer=new Render(this),this.blinkTimer=new Timer(5,.2);var e=this,t=function(){e.alpha=1,e.isAlive=!0},i=function(){e.alpha=.4===e.alpha?1:.4},n=function(t){e.handleInput(t)};this.blinkTimer.on("COMPLETE",t),this.blinkTimer.on("UPDATE",i),document.addEventListener("keyup",n),this.respawn()};(function(){var e={37:"left",38:"up",39:"right",40:"down"},t={left:{axis:"x",dir:-1},up:{axis:"y",dir:-1},right:{axis:"x",dir:1},down:{axis:"y",dir:1}};this.respawn=function(){this.sensor.x=this.x=Grid.getXFromColumn(2),this.sensor.y=this.y=Grid.getYFromRow(5),this.isAlive=!1,this.alpha=.4,this.blinkTimer.start()},this.hit=function(e){"water"===e||"enemy"===e?this.respawn():"key"===e&&Scene.levelComplete()},this.getMovement=function(e,t){var i;return"x"===e?(i=Math.floor(this.x/Grid.cellWidth)+t,Grid.getXFromColumn(i)):(i=Math.floor(this.y/Grid.cellHeight)+t,Grid.getYFromRow(i))},this.handleInput=function(i){var n=e[i.keyCode];if(n&&this.isAlive===!0&&!Model.get("level_complete")){var s=t[n];s.hasOwnProperty("axis")&&(this[s.axis]=this.getMovement(s.axis,s.dir))}},this.update=function(e){this.sensor.position(this.x,this.y),this.isAlive||this.blinkTimer.update(e)},this.render=function(e){this.renderer.render(e),this.sensor.render(e)}}).call(Player.prototype);var Star=function(e,t){this.entity=new Entity(this,Grid.getXFromColumn(t),Grid.getYFromRow(e),"images/Star.png",0,-33-Grid.offsetY),this.renderer=new Render(this),this.speed=500,this.angle=Math.round(180*Math.random())*Math.PI/180};(function(){this.update=function(e){this.x+=this.speed*Math.cos(this.angle)*e,this.y+=this.speed*Math.sin(this.angle)*e,this.alpha=Math.max(.01,this.alpha-1*e)},this.render=function(e){this.renderer.render(e)}}).call(Star.prototype);var Explosion=function(e,t){this.stars=[],this.addStars(e,t,10)};(function(){this.addStars=function(e,t,i){var n;for(n=0;i>n;n++)this.stars.push(new Star(e,t))},this.update=function(e){var t,i=this.stars.length;if(i>0)if(this.stars[0].alpha<=.01)this.stars=[];else for(t=0;i>t;t++)this.stars[t].update(e)},this.render=function(e){var t,i=this.stars.length;for(t=0;i>t;t++)this.stars[t].render(e)}}).call(Explosion.prototype);var player=new Player,ui=new UI,scene="",App=function(){var e=function(){Scene.startGame(!0)},t=function(){Scene.startGame()},i=function(){Scene.startMenu()};El.addListener(El.getElements("btn-play")[0],"click",e),El.addListener(El.getElements("btn-replay")[0],"click",t),El.addListener(El.getElements("btn-menu"),"click",i),Scene.startMenu()}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVsLmpzIiwiZW50aXR5LmpzIiwicmVzb3VyY2VzLmpzIiwiY29sbGlzaW9uLmpzIiwiZW5naW5lLmpzIiwibW9kZWwuanMiLCJ0aW1lci5qcyIsImdyaWQuanMiLCJsZXZlbC5qcyIsInNjZW5lLmpzIiwic2Vuc29yLmpzIiwicmVuZGVyLmpzIiwidWkuanMiLCJrZXkuanMiLCJ3YXRlci5qcyIsImVuZW15LmpzIiwicGxheWVyLmpzIiwic3Rhci5qcyIsImV4cGxvc2lvbi5qcyIsImFwcC5qcyJdLCJuYW1lcyI6WyJFbCIsImluc3RhbmNlIiwicmVtb3ZlQ2xhc3MiLCJlbGVtZW50cyIsImNsYXNzTmFtZSIsImkiLCJjIiwidGhpcyIsImlzSFRNTENvbGxlY3Rpb24iLCJsZW5ndGgiLCJyZXBsYWNlIiwiYWRkQ2xhc3MiLCJpbmRleE9mIiwiYWRkTGlzdGVuZXIiLCJldmVudCIsImNhbGxiYWNrIiwidW5kZWZpbmVkIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNob3ciLCJpZGVudGlmaWVyIiwiZ2V0RWxlbWVudHMiLCJoaWRlIiwiaXNTdHJpbmciLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsInZhcmlhYmxlIiwiaXNUeXBlIiwidHlwZSIsIk9iamVjdCIsInByb3RvdHlwZSIsInRvU3RyaW5nIiwiY2FsbCIsIkVudGl0eSIsIm93bmVyIiwieCIsInkiLCJzcHJpdGUiLCJvZmZzZXRYIiwib2Zmc2V0WSIsImZsaXBwZWQiLCJhbHBoYSIsImlzQWxpdmUiLCJzcGVlZCIsImFuZ2xlIiwiaXNSZWFkeSIsInJlYWR5IiwiayIsInJlc291cmNlQ2FjaGUiLCJoYXNPd25Qcm9wZXJ0eSIsIl9sb2FkIiwidXJsIiwiaW1nIiwiSW1hZ2UiLCJvbmxvYWQiLCJyZWFkeUNhbGxiYWNrcyIsImZvckVhY2giLCJmdW5jIiwic3JjIiwibG9hZCIsInVybE9yQXJyIiwiQXJyYXkiLCJnZXQiLCJvblJlYWR5IiwicHVzaCIsIndpbmRvdyIsIlJlc291cmNlcyIsIkNvbGxpc2lvbiIsImlzQ29sbGlkaW5nIiwic2Vuc29yQSIsInNlbnNvckIiLCJ3aWR0aCIsImhlaWdodCIsIkVuZ2luZSIsImdsb2JhbCIsInVwZGF0ZUVudGl0aWVzIiwiZHQiLCJlbnRpdGllcyIsImVuZW15IiwidXBkYXRlIiwicGxheWVyIiwicmVuZGVyRW50aXRpZXMiLCJyZW5kZXIiLCJjdHgiLCJyb3ciLCJjb2wiLCJyb3dJbWFnZXMiLCJudW1Sb3dzIiwibnVtQ29scyIsImNsZWFyUmVjdCIsImNhbnZhcyIsImRyYXdJbWFnZSIsIm1haW4iLCJydW5uaW5nIiwibm93IiwiRGF0ZSIsImxhc3RUaW1lIiwid2luIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiaW5pdCIsInJlc2V0IiwiZG9jIiwiY3JlYXRlRWxlbWVudCIsImdldENvbnRleHQiLCJhcHBlbmRDaGlsZCIsInBhdXNlIiwicHJlbG9hZCIsImxvY2F0aW9ucyIsImZvbGRlciIsImZvcm1hdCIsInJlc291cmNlcyIsIm1hcCIsImVsIiwiTW9kZWwiLCJkYXRhIiwic2V0Iiwia2V5IiwidmFsdWUiLCJUaW1lciIsImludGVydmFscyIsImRlbGF5IiwibGlzdGVuZXJzIiwidGltZSIsImxhcHMiLCJzdGFydCIsImRlbHRhIiwiTWF0aCIsIm1heCIsImRpc3BhdGNoIiwib24iLCJsaXN0ZW5lciIsImxpc3QiLCJHcmlkIiwiY2VsbFdpZHRoIiwiY2VsbEhlaWdodCIsImNvbHVtbnMiLCJyb3dzIiwiZ2V0WEZyb21Db2x1bW4iLCJjb2x1bW4iLCJtaW4iLCJnZXRZRnJvbVJvdyIsIkxldmVsIiwibGV2ZWwiLCJsYXN0TGV2ZWwiLCJuZXh0IiwiYWRkRW50aXRpZXMiLCJsZXZlbERhdGEiLCJ0IiwiS2V5IiwiciIsIldhdGVyIiwiRW5lbXkiLCJzIiwiU2NlbmUiLCJvbkNoYXJhY3RlckNsaWNrZWQiLCJ0YXJnZXQiLCJzbGljZSIsInN0YXJ0TWVudSIsImNoYXJhY3RlcnMiLCJzY2VuZSIsInN0YXJ0R2FtZSIsInJlc3Bhd24iLCJ1aSIsImVuZEdhbWUiLCJ3aW5HYW1lIiwibGV2ZWxDb21wbGV0ZSIsIkV4cGxvc2lvbiIsInNldFRpbWVvdXQiLCJuZXh0TGV2ZWwiLCJTZW5zb3IiLCJkZWJ1ZyIsImJlZ2luUGF0aCIsInN0cm9rZVN0eWxlIiwicmVjdCIsInN0cm9rZSIsInBvc2l0aW9uIiwiUmVuZGVyIiwicCIsInBvcyIsImdldFBvc2l0aW9uIiwic2F2ZSIsInNjYWxlIiwiZ2xvYmFsQWxwaGEiLCJyZXN0b3JlIiwiVUkiLCJrZXlzIiwibGV2ZWxUaW1lIiwibGV2ZWxUaW1lciIsIm9uVGltZXJDb21wbGV0ZSIsImZvcm1hdHRlZFRpbWUiLCJyb3VuZCIsInRleHQiLCJzdHJpbmciLCJhbGlnbiIsImZvbnQiLCJ0ZXh0QWxpZ24iLCJmaWxsVGV4dCIsImVudGl0eSIsInNlbnNvciIsInJlbmRlcmVyIiwiaGl0IiwiUGxheWVyIiwiYmxpbmtUaW1lciIsInJlZiIsIm9uQmxpbmtUaW1lckNvbXBsZXRlIiwib25CbGlua1RpbWVyVXBkYXRlIiwib25LZXlVcCIsImUiLCJoYW5kbGVJbnB1dCIsImlucHV0TWFwIiwzNywzOCwzOSw0MCwiaW5wdXRSZXNwb25zZU1hcCIsImxlZnQiLCJheGlzIiwiZGlyIiwidXAiLCJyaWdodCIsImRvd24iLCJpbnZva2VyIiwiZ2V0TW92ZW1lbnQiLCJ2IiwiZmxvb3IiLCJpbnB1dCIsImtleUNvZGUiLCJTdGFyIiwicmFuZG9tIiwiUEkiLCJjb3MiLCJzaW4iLCJzdGFycyIsImFkZFN0YXJzIiwidG90YWwiLCJBcHAiLCJvblBsYXlDbGlja2VkIiwib25SZXBsYXlDbGlja2VkIiwib25NZW51Q2xpY2tlZCJdLCJtYXBwaW5ncyI6IkFBQUEsWUFLQSxJQUFBQSxJQUFBLFdBQ0EsR0FBQUMsR0FBQSxZQWlIQSxPQTFHQUEsR0FBQUMsWUFBQSxTQUFBQyxFQUFBQyxHQUNBLEdBQUFDLEdBQUFDLENBQ0EsSUFBQUgsRUFJQSxJQUhBSSxLQUFBQyxpQkFBQUwsS0FD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RUFBQSxFQUFBNkksRUFBQSxVQUVBLElBQUE1SSxLQUFBdUksUUFFQU8sRUFBQSxFQUFBL0ksRUFBQSxFQUFBa0osRUFBQSxNQUFBSCxFQUFBLEVBQUEvSSxFQUFBLEVBQUFrSixFQUFBLE1BQUFILEVBQUEsRUFBQS9JLEVBQUEsRUFBQWtKLEVBQUEsTUFDQUgsRUFBQSxFQUFBL0ksRUFBQSxFQUFBNkksRUFBQSxVQUFBRSxFQUFBLEVBQUEvSSxFQUFBLEVBQUE2SSxFQUFBLFVBQUFFLEVBQUEsRUFBQS9JLEVBQUEsRUFBQTZJLEVBQUEsUUFBQUUsRUFBQSxFQUFBL0ksRUFBQSxFQUFBNkksRUFBQSxVQUFBRSxFQUFBLEVBQUEvSSxFQUFBLEVBQUE2SSxFQUFBLFVBRUEsSUFBQTVJLEtBQUF1SSxRQUVBTyxFQUFBLEVBQUEvSSxFQUFBLEVBQUFrSixFQUFBLE9BQUFILEVBQUEsRUFBQS9JLEVBQUEsRUFBQWtKLEVBQUEsT0FBQUgsRUFBQSxFQUFBL0ksRUFBQSxFQUFBa0osRUFBQSxPQUFBSCxFQUFBLEVBQUEvSSxFQUFBLEVBQUFrSixFQUFBLE9BQ0FILEVBQUEsRUFBQS9JLEVBQUEsRUFBQTZJLEVBQUEsVUFBQUUsRUFBQSxFQUFBL0ksRUFBQSxFQUFBNkksRUFBQSxVQUFBRSxFQUFBLEVBQUEvSSxFQUFBLEVBQUE2SSxFQUFBLFFBQUFFLEVBQUEsRUFBQS9JLEVBQUEsRUFBQTZJLEVBQUEsVUFBQUUsRUFBQSxFQUFBL0ksRUFBQSxFQUFBNkksRUFBQSxVQUVBLElBQUE1SSxLQUFBdUksUUFFQU8sRUFBQSxFQUFBL0ksRUFBQSxFQUFBa0osRUFBQSxNQUFBSCxFQUFBLEVBQUEvSSxFQUFBLEVBQUFrSixFQUFBLE1BQ0FILEVBQUEsRUFBQS9JLEVBQUEsRUFBQTZJLEVBQUEsVUFBQUUsRUFBQSxFQUFBL0ksRUFBQSxFQUFBNkksRUFBQSxVQUFBRSxFQUFBLEVBQUEvSSxFQUFBLEVBQUE2SSxFQUFBLFFBQUFFLEVBQUEsRUFBQS9JLEVBQUEsRUFBQTZJLEVBQUEsVUFBQUUsRUFBQSxFQUFBL0ksRUFBQSxFQUFBNkksRUFBQSxVQUVBLElBQUE1SSxLQUFBdUksUUFFQU8sRUFBQSxFQUFBL0ksRUFBQSxFQUFBa0osRUFBQSxPQUFBSCxFQUFBLEVBQUEvSSxFQUFBLEVBQUFrSixFQUFBLE9BQUFILEVBQUEsRUFBQS9JLEVBQUEsRUFBQWtKLEVBQUEsT0FBQUgsRUFBQSxFQUFBL0ksRUFBQSxFQUFBa0osRUFBQSxPQUNBSCxFQUFBLEVBQUEvSSxFQUFBLEVBQUFrSixFQUFBLE1BQUFILEVBQUEsRUFBQS9JLEVBQUEsRUFBQWtKLEVBQUEsTUFBQUgsRUFBQSxFQUFBL0ksRUFBQSxFQUFBa0osRUFBQSxNQUNBSCxFQUFBLEVBQUEvSSxFQUFBLEVBQUE2SSxFQUFBLFVBQUFFLEVBQUEsRUFBQS9JLEVBQUEsRUFBQTZJLEVBQUEsVUFBQUUsRUFBQSxFQUFBL0ksRUFBQSxFQUFBNkksRUFBQSxRQUFBRSxFQUFBLEVBQUEvSSxFQUFBLEVBQUE2SSxFQUFBLFVBQUFFLEVBQUEsRUFBQS9JLEVBQUEsRUFBQTZJLEVBQUEsVUFFQSxJQUFBNUksS0FBQXVJLFFBRUFPLEVBQUEsRUFBQS9JLEVBQUEsRUFBQWtKLEVBQUEsTUFBQUgsRUFBQSxFQUFBL0ksRUFBQSxFQUFBa0osRUFBQSxNQUNBSCxFQUFBLEVBQUEvSSxFQUFBLEVBQUFrSixFQUFBLE1BQUFILEVBQUEsRUFBQS9JLEVBQUEsRUFBQWtKLEVBQUEsTUFBQUgsRUFBQSxFQUFBL0ksRUFBQSxFQUFBa0osRUFBQSxNQUNBSCxFQUFBLEVBQUEvSSxFQUFBLEVBQUE2SSxFQUFBLFVBQUFFLEVBQUEsRUFBQS9JLEVBQUEsRUFBQTZJLEVBQUEsVUFBQUUsRUFBQSxFQUFBL0ksRUFBQSxFQUFBNkksRUFBQSxRQUFBRSxFQUFBLEVBQUEvSSxFQUFBLEVBQUE2SSxFQUFBLFVBQUFFLEVBQUEsRUFBQS9JLEVBQUEsRUFBQTZJLEVBQUEsVUFFQSxJQUFBNUksS0FBQXVJLFFBRUFPLEVBQUEsRUFBQS9JLEVBQUEsRUFBQWtKLEVBQUEsT0FBQUgsRUFBQSxFQUFBL0ksRUFBQSxF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QUFDLEdBQ0EsR0FDQTlFLEdBREFxTyxFQUFBbk8sS0FBQWlPLE1BQUEvTixNQUVBLEtBQUFKLEVBQUEsRUFBQXFPLEVBQUFyTyxFQUFBQSxJQUNBRSxLQUFBaU8sTUFBQW5PLEdBQUE2RSxPQUFBQyxNQUdBbkQsS0FBQXNJLFVBQUF4SSxVQ3JEQSxJQUFBa0QsUUFBQSxHQUFBeUgsUUFDQXZDLEdBQUEsR0FBQXNCLElBQ0F6QixNQUFBLEdBQ0E0RSxJQUFBLFdBQ0EsR0FBQUMsR0FBQSxXQUNBbkYsTUFBQU8sV0FBQSxJQUVBNkUsRUFBQSxXQUNBcEYsTUFBQU8sYUFFQThFLEVBQUEsV0FDQXJGLE1BQUFJLFlBR0E3SixJQUFBYSxZQUFBYixHQUFBb0IsWUFBQSxZQUFBLEdBQUEsUUFBQXdOLEdBQ0E1TyxHQUFBYSxZQUFBYixHQUFBb0IsWUFBQSxjQUFBLEdBQUEsUUFBQXlOLEdBQ0E3TyxHQUFBYSxZQUFBYixHQUFBb0IsWUFBQSxZQUFBLFFBQUEwTixHQUdBckYsTUFBQUkiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0Jztcbi8qKlxuICogQGRlc2NyaXB0aW9uIEVsIFNpbmdsZXRvbiB1c2VkIGZvciBtYW5pcHVsYXRpbmcgRE9NIGVsZW1lbnRzXG4gKiBAY29uc3RydWN0b3JcbiAqL1xudmFyIEVsID0gKGZ1bmN0aW9uIEVsKCkge1xuXHR2YXIgaW5zdGFuY2UgPSBmdW5jdGlvbiBpbnN0YW5jZSgpIHt9O1xuXG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gUmVtb3ZlcyB0aGUgY2xhc3NOYW1lIGZyb20gZWFjaCBlbGVtZW50IGluIHRoZSBhcnJheVxuXHQgKiBAcGFyYW0ge2FycmF5fSBlbGVtZW50cyAtIEFycmF5IG9mIERPTSBlbGVtZW50c1xuXHQgKiBAcGFyYW0ge3N0cmluZ30gY2xhc3NOYW1lIC0gQ2xhc3MgdG8gcmVtb3ZlXG5cdCAqL1xuXHRpbnN0YW5jZS5yZW1vdmVDbGFzcyA9IGZ1bmN0aW9uIHJlbW92ZUNsYXNzKGVsZW1lbnRzLCBjbGFzc05hbWUpIHtcblx0XHR2YXIgaSwgYztcblx0XHRpZiAoZWxlbWVudHMpIHtcblx0XHRcdGlmICghdGhpcy5pc0hUTUxDb2xsZWN0aW9uKGVsZW1lbnRzKSkge1xuXHRcdFx0XHRlbGVtZW50cyA9IFtlbGVtZW50c107XG5cdFx0XHR9XG5cdFx0XHRmb3IgKGkgPSAwOyBpIDwgZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0YyA9IGVsZW1lbnRzW2ldLmNsYXNzTmFtZS5yZXBsYWNlKCcgJyArIGNsYXNzTmFtZSwgJycpO1xuXHRcdFx0XHRlbGVtZW50c1tpXS5jbGFzc05hbWUgPSBjO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcblxuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIEFkZHMgdGhlIGNsYXNzTmFtZSBvbiBlYWNoIGVsZW1lbnQgaW4gdGhlIGFycmF5XG5cdCAqIEBwYXJhbSB7YXJyYXl9IGVsZW1lbnRzIC0gQXJyYXkgb2YgRE9NIGVsZW1lbnRzXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBjbGFzc05hbWUgLSBDbGFzcyB0byBhZGRcblx0ICovXG5cdGluc3RhbmNlLmFkZENsYXNzID0gZnVuY3Rpb24gYWRkQ2xhc3MoZWxlbWVudHMsIGNsYXNzTmFtZSkge1xuXHRcdHZhciBpO1xuXG5cdFx0aWYgKGVsZW1lbnRzKSB7XG5cdFx0XHRpZiAoIXRoaXMuaXNIVE1MQ29sbGVjdGlvbihlbGVtZW50cykpIHtcblx0XHRcdFx0ZWxlbWVudHMgPSBbZWxlbWVudHNdO1xuXHRcdFx0fVxuXHRcdFx0Zm9yIChpID0gMDsgaSA8IGVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGlmIChlbGVtZW50c1tpXS5jbGFzc05hbWUuaW5kZXhPZignICcgKyBjbGFzc05hbWUpIDwgMCkge1xuXHRcdFx0XHRcdGVsZW1lbnRzW2ldLmNsYXNzTmFtZSArPSAnICcgKyBjbGFzc05hbWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH07XG5cblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBBZGRzIGEgbGlzdGVuZXIgb24gdGhlIGVsZW1lbnRcblx0ICogQHBhcmFtIHthcnJheX0gZWxlbWVudHMgLSBBcnJheSBvZiBET00gZWxlbWVudHNcblx0ICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50IC0gRXZlbnQgdG8gbGlzdGVuIGZvclxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFjayAtIEZ1bmN0aW9uIHRvIGNhbGwgd2hlbiB0aGUgZXZlbnQgaXMgY2FwdHVyZWRcblx0ICovXG5cdGluc3RhbmNlLmFkZExpc3RlbmVyID0gZnVuY3Rpb24gYWRkTGlzdGVuZXIoZWxlbWVudHMsIGV2ZW50LCBjYWxsYmFjaykge1xuXHRcdHZhciBpO1xuXG5cdFx0aWYgKGVsZW1lbnRzKSB7XG5cdFx0XHRpZiAoZWxlbWVudHMubGVuZ3RoID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0ZWxlbWVudHMgPSBbZWxlbWVudHNdO1xuXHRcdFx0fVxuXHRcdFx0Zm9yIChpID0gMDsgaSA8IGVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGVsZW1lbnRzW2ldLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGNhbGxiYWNrKTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG5cblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBSZW1vdmVzIHRoZSBoaWRkZW4gY2xhc3MgZnJvbSB0aGUgZWxlbWVudHMgd2l0aCB0aGUgZ2l2ZW4gY2xhc3NOYW1lIG9yICNJRFxuXHQgKiBAcGFyYW0ge3N0cmluZ30gaWRlbnRpZmllciAtIFRoZSBlbGVtZW50cyB0byBmaW5kXG5cdCAqL1xuXHRpbnN0YW5jZS5zaG93ID0gZnVuY3Rpb24gc2hvdyhpZGVudGlmaWVyKSB7XG5cdFx0dGhpcy5yZW1vdmVDbGFzcyh0aGlzLmdldEVsZW1lbnRzKGlkZW50aWZpZXIpLCAnaGlkZGVuJyk7XG5cdH07XG5cblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBBZGRzIHRoZSBoaWRkZW4gY2xhc3Mgb24gdGhlIGVsZW1lbnRzIHdpdGggdGhlIGdpdmVuIGNsYXNzTmFtZSBvciAjSURcblx0ICogQHBhcmFtIHtzdHJpbmd9IGlkZW50aWZpZXIgLSBUaGUgZWxlbWVudHMgdG8gZmluZFxuXHQgKi9cblx0aW5zdGFuY2UuaGlkZSA9IGZ1bmN0aW9uIGhpZGUoaWRlbnRpZmllcikge1xuXHRcdHRoaXMuYWRkQ2xhc3ModGhpcy5nZXRFbGVtZW50cyhpZGVudGlmaWVyKSwgJ2hpZGRlbicpO1xuXHR9O1xuXG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gRmluZHMgYWxsIHRoZSBlbGVtZW50cyB3aXRoIHRoZSBjbGFzc05hbWUgb3IgI0lEXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBpZGVudGlmaWVyIC0gVGhlIGVsZW1lbnRzIHRvIGZpbmRcblx0ICovXG5cdGluc3RhbmNlLmdldEVsZW1lbnRzID0gZnVuY3Rpb24gZ2V0RWxlbWVudHMoaWRlbnRpZmllcikge1xuXHRcdGlmICh0aGlzLmlzU3RyaW5nKGlkZW50aWZpZXIpKSB7XG5cdFx0XHRpZiAoaWRlbnRpZmllci5pbmRleE9mKCcjJykgIT09IC0xKSB7XG5cdFx0XHRcdHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZGVudGlmaWVyKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGlkZW50aWZpZXIpO1xuXHRcdH1cblx0XHRyZXR1cm4gbnVsbDtcblx0fTtcblxuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIENoZWNrcyBpZiB0aGUgdmFyaWFibGUgaXMgYSBzdHJpbmdcblx0ICogQHBhcmFtIHtzdHJpbmd9IHZhcmlhYmxlIC0gVGhlIHZhcmlhYmxlIHRvIGNoZWNrXG5cdCAqL1xuXHRpbnN0YW5jZS5pc1N0cmluZyA9IGZ1bmN0aW9uIGlzU3RyaW5nKHZhcmlhYmxlKSB7XG5cdFx0cmV0dXJuIHRoaXMuaXNUeXBlKHZhcmlhYmxlLCAnW29iamVjdCBTdHJpbmddJyk7XG5cdH07XG5cblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBDaGVja3MgaWYgdGhlIHZhcmlhYmxlIGlzIGEgSFRNTENvbGxlY3Rpb25cblx0ICogQHBhcmFtIHtzdHJpbmd9IHZhcmlhYmxlIC0gVGhlIHZhcmlhYmxlIHRvIGNoZWNrXG5cdCAqL1xuXHRpbnN0YW5jZS5pc0hUTUxDb2xsZWN0aW9uID0gZnVuY3Rpb24gaXNIVE1MQ29sbGVjdGlvbih2YXJpYWJsZSkge1xuXHRcdHJldHVybiB0aGlzLmlzVHlwZSh2YXJpYWJsZSwgJ1tvYmplY3QgSFRNTENvbGxlY3Rpb25dJyk7XG5cdH07XG5cblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBDaGVja3MgaWYgdGhlIHZhcmlhYmxlIGlzIHRoZSB0eXBlXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSB2YXJpYWJsZSAtIFRoZSB2YXJpYWJsZSB0byBjaGVja1xuXHQgKi9cblx0aW5zdGFuY2UuaXNUeXBlID0gZnVuY3Rpb24gaXNUeXBlKHZhcmlhYmxlLCB0eXBlKSB7XG5cdFx0cmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YXJpYWJsZSkgPT09IHR5cGU7XG5cdH07XG5cblx0cmV0dXJuIGluc3RhbmNlO1xufSkoKTtcbiIsIid1c2Ugc3RyaWN0Jztcbi8qKlxuKiBAZGVzY3JpcHRpb24gRW50aXR5IHNldHMgYWxsIGRlZmF1bHQgdmFyaWFibGVzIHRvIHRoZSBvd25lclxuKiBAY29uc3RydWN0b3JcbiogQHBhcmFtIHtvYmplY3R9IG93bmVyIC0gVGhlIGluaXRpYWwgcm93XG4qIEBwYXJhbSB7bnVtYmVyfSB4IC0gVGhlIGluaXRpYWwgeCBsb2NhdGlvblxuKiBAcGFyYW0ge251bWJlcn0geSAtIFRoZSBpbml0aWFsIHkgbG9jYXRpb25cbiogQHBhcmFtIHtzdHJpbmd9IHNwcml0ZSAtIFRoZSBkaXNwbGF5IHNwcml0ZVxuKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0WCAtIFRoZSBpbml0aWFsIHggb2Zmc2V0XG4qIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXRZIC0gVGhlIGluaXRpYWwgeSBvZmZzZXRcbiovXG52YXIgRW50aXR5ID0gZnVuY3Rpb24gRW50aXR5KG93bmVyLCB4LCB5LCBzcHJpdGUsIG9mZnNldFgsIG9mZnNldFkpIHtcblx0dGhpcy5vd25lciA9IG93bmVyO1xuXHRvd25lci54ID0geDtcblx0b3duZXIueSA9IHk7XG5cdG93bmVyLnNwcml0ZSA9IHNwcml0ZSB8fCBudWxsO1xuXHRvd25lci5vZmZzZXRYID0gb2Zmc2V0WCB8fCAwO1xuXHRvd25lci5vZmZzZXRZID0gb2Zmc2V0WSB8fCAwO1xuXHRvd25lci5mbGlwcGVkID0gZmFsc2U7XG5cdG93bmVyLmFscGhhID0gMTtcblx0b3duZXIuaXNBbGl2ZSA9IHRydWU7XG5cdG93bmVyLnNwZWVkID0gMDtcblx0b3duZXIuYW5nbGUgPSAwO1xufTtcbiIsIid1c2Ugc3RyaWN0Jztcbi8qIFJlc291cmNlcy5qc1xuICogVGhpcyBpcyBzaW1wbGUgYW4gaW1hZ2UgbG9hZGluZyB1dGlsaXR5LiBJdCBlYXNlcyB0aGUgcHJvY2VzcyBvZiBsb2FkaW5nXG4gKiBpbWFnZSBmaWxlcyBzbyB0aGF0IHRoZXkgY2FuIGJlIHVzZWQgd2l0aGluIHlvdXIgZ2FtZS4gSXQgYWxzbyBpbmNsdWRlc1xuICogYSBzaW1wbGUgXCJjYWNoaW5nXCIgbGF5ZXIgc28gaXQgd2lsbCByZXVzZSBjYWNoZWQgaW1hZ2VzIGlmIHlvdSBhdHRlbXB0XG4gKiB0byBsb2FkIHRoZSBzYW1lIGltYWdlIG11bHRpcGxlIHRpbWVzLlxuICovXG4oZnVuY3Rpb24gUmVzb3VyY2VzKCkge1xuXHR2YXIgcmVzb3VyY2VDYWNoZSA9IHt9O1xuXHR2YXIgbG9hZGluZyA9IFtdO1xuXHR2YXIgcmVhZHlDYWxsYmFja3MgPSBbXTtcblxuXHQvKiBUaGlzIGZ1bmN0aW9uIGRldGVybWluZXMgaWYgYWxsIG9mIHRoZSBpbWFnZXMgdGhhdCBoYXZlIGJlZW4gcmVxdWVzdGVkXG5cdCAgICogZm9yIGxvYWRpbmcgaGF2ZSBpbiBmYWN0IGJlZW4gY29tcGxldGVkIGxvYWRlZC5cblx0ICAgKi9cblx0ZnVuY3Rpb24gaXNSZWFkeSgpIHtcblx0XHR2YXIgcmVhZHkgPSB0cnVlO1xuXHRcdGZvciAodmFyIGsgaW4gcmVzb3VyY2VDYWNoZSkge1xuXHRcdFx0aWYgKHJlc291cmNlQ2FjaGUuaGFzT3duUHJvcGVydHkoaykgJiZcblx0XHRcdCFyZXNvdXJjZUNhY2hlW2tdKSB7XG5cdFx0XHRcdHJlYWR5ID0gZmFsc2U7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiByZWFkeTtcblx0fVxuXG5cdC8qIFRoaXMgaXMgb3VyIHByaXZhdGUgaW1hZ2UgbG9hZGVyIGZ1bmN0aW9uLCBpdCBpc1xuXHQgICAqIGNhbGxlZCBieSB0aGUgcHVibGljIGltYWdlIGxvYWRlciBmdW5jdGlvbi5cblx0ICAgKi9cblx0ZnVuY3Rpb24gX2xvYWQodXJsKSB7XG5cdFx0aWYgKCFyZXNvdXJjZUNhY2hlW3VybF0pIHtcblx0XHRcdC8qIFRoaXMgVVJMIGhhcyBub3QgYmVlbiBwcmV2aW91c2x5IGxvYWRlZCBhbmQgaXMgbm90IHByZXNlbnRcblx0XHRcdCAgICAgICAqIHdpdGhpbiBvdXIgY2FjaGU7IHdlJ2xsIG5lZWQgdG8gbG9hZCB0aGlzIGltYWdlLlxuXHRcdFx0ICAgICAgICovXG5cdFx0XHR2YXIgaW1nID0gbmV3IEltYWdlKCk7XG5cdFx0XHRpbWcub25sb2FkID0gZnVuY3Rpb24gb25JbWFnZUxvYWQoKSB7XG5cdFx0XHRcdC8qIE9uY2Ugb3VyIGltYWdlIGhhcyBwcm9wZXJseSBsb2FkZWQsIGFkZCBpdCB0byBvdXIgY2FjaGVcblx0XHRcdFx0ICAgICAgICAgKiBzbyB0aGF0IHdlIGNhbiBzaW1wbHkgcmV0dXJuIHRoaXMgaW1hZ2UgaWYgdGhlIGRldmVsb3BlclxuXHRcdFx0XHQgICAgICAgICAqIGF0dGVtcHRzIHRvIGxvYWQgdGhpcyBmaWxlIGluIHRoZSBmdXR1cmUuXG5cdFx0XHRcdCAgICAgICAgICovXG5cdFx0XHRcdHJlc291cmNlQ2FjaGVbdXJsXSA9IGltZztcblxuXHRcdFx0XHQvKiBPbmNlIHRoZSBpbWFnZSBpcyBhY3R1YWxseSBsb2FkZWQgYW5kIHByb3Blcmx5IGNhY2hlZCxcblx0XHRcdFx0ICAgICAgICAgKiBjYWxsIGFsbCBvZiB0aGUgb25SZWFkeSgpIGNhbGxiYWNrcyB3ZSBoYXZlIGRlZmluZWQuXG5cdFx0XHRcdCAgICAgICAgICovXG5cdFx0XHRcdGlmIChpc1JlYWR5KCkpIHtcblx0XHRcdFx0XHRyZWFkeUNhbGxiYWNrcy5mb3JFYWNoKGZ1bmN0aW9uIGNhbGxDYWxsYmFja3MoZnVuYykgeyBmdW5jKCk7IH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXG5cdFx0XHQvKiBTZXQgdGhlIGluaXRpYWwgY2FjaGUgdmFsdWUgdG8gZmFsc2UsIHRoaXMgd2lsbCBjaGFuZ2Ugd2hlblxuXHRcdFx0ICAgICAgICogdGhlIGltYWdlJ3Mgb25sb2FkIGV2ZW50IGhhbmRsZXIgaXMgY2FsbGVkLiBGaW5hbGx5LCBwb2ludFxuXHRcdFx0ICAgICAgICogdGhlIGltYWdlcyBzcmMgYXR0cmlidXRlIHRvIHRoZSBwYXNzZWQgaW4gVVJMLlxuXHRcdFx0ICAgICAgICovXG5cdFx0XHRyZXNvdXJjZUNhY2hlW3VybF0gPSBmYWxzZTtcblx0XHRcdGltZy5zcmMgPSB1cmw7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiByZXNvdXJjZUNhY2hlW3VybF07XG5cdFx0fVxuXHR9XG5cblx0LyogVGhpcyBpcyB0aGUgcHVibGljbHkgYWNjZXNzaWJsZSBpbWFnZSBsb2FkaW5nIGZ1bmN0aW9uLiBJdCBhY2NlcHRzXG5cdCAgICogYW4gYXJyYXkgb2Ygc3RyaW5ncyBwb2ludGluZyB0byBpbWFnZSBmaWxlcyBvciBhIHN0cmluZyBmb3IgYSBzaW5nbGVcblx0ICAgKiBpbWFnZS4gSXQgd2lsbCB0aGVuIGNhbGwgb3VyIHByaXZhdGUgaW1hZ2UgbG9hZGluZyBmdW5jdGlvbiBhY2NvcmRpbmdseS5cblx0ICAgKi9cblx0ZnVuY3Rpb24gbG9hZCh1cmxPckFycikge1xuXHRcdGlmICh1cmxPckFyciBpbnN0YW5jZW9mIEFycmF5KSB7XG5cdFx0XHQvKiBJZiB0aGUgZGV2ZWxvcGVyIHBhc3NlZCBpbiBhbiBhcnJheSBvZiBpbWFnZXNcblx0XHRcdCAgICAgICAqIGxvb3AgdGhyb3VnaCBlYWNoIHZhbHVlIGFuZCBjYWxsIG91ciBpbWFnZVxuXHRcdFx0ICAgICAgICogbG9hZGVyIG9uIHRoYXQgaW1hZ2UgZmlsZVxuXHRcdFx0ICAgICAgICovXG5cdFx0XHR1cmxPckFyci5mb3JFYWNoKGZ1bmN0aW9uIGxvYWRVUkwodXJsKSB7XG5cdFx0XHRcdF9sb2FkKHVybCk7XG5cdFx0XHR9KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0LyogVGhlIGRldmVsb3BlciBkaWQgbm90IHBhc3MgYW4gYXJyYXkgdG8gdGhpcyBmdW5jdGlvbixcblx0XHRcdCAgICAgICAqIGFzc3VtZSB0aGUgdmFsdWUgaXMgYSBzdHJpbmcgYW5kIGNhbGwgb3VyIGltYWdlIGxvYWRlclxuXHRcdFx0ICAgICAgICogZGlyZWN0bHkuXG5cdFx0XHQgICAgICAgKi9cblx0XHRcdF9sb2FkKHVybE9yQXJyKTtcblx0XHR9XG5cdH1cblxuXHQvKiBUaGlzIGlzIHVzZWQgYnkgZGV2ZWxvcGVyJ3MgdG8gZ3JhYiByZWZlcmVuY2VzIHRvIGltYWdlcyB0aGV5IGtub3dcblx0ICAgKiBoYXZlIGJlZW4gcHJldmlvdXNseSBsb2FkZWQuIElmIGFuIGltYWdlIGlzIGNhY2hlZCwgdGhpcyBmdW5jdGlvbnNcblx0ICAgKiB0aGUgc2FtZSBhcyBjYWxsaW5nIGxvYWQoKSBvbiB0aGF0IFVSTC5cblx0ICAgKi9cblx0ZnVuY3Rpb24gZ2V0KHVybCkge1xuXHRcdHJldHVybiByZXNvdXJjZUNhY2hlW3VybF07XG5cdH1cblxuXHQvKiBUaGlzIGZ1bmN0aW9uIHdpbGwgYWRkIGEgZnVuY3Rpb24gdG8gdGhlIGNhbGxiYWNrIHN0YWNrIHRoYXQgaXMgY2FsbGVkXG5cdCAgICogd2hlbiBhbGwgcmVxdWVzdGVkIGltYWdlcyBhcmUgcHJvcGVybHkgbG9hZGVkLlxuXHQgICAqL1xuXHRmdW5jdGlvbiBvblJlYWR5KGZ1bmMpIHtcblx0XHRyZWFkeUNhbGxiYWNrcy5wdXNoKGZ1bmMpO1xuXHR9XG5cblx0LyogVGhpcyBvYmplY3QgZGVmaW5lcyB0aGUgcHVibGljbHkgYWNjZXNzaWJsZSBmdW5jdGlvbnMgYXZhaWxhYmxlIHRvXG5cdCAgICogZGV2ZWxvcGVycyBieSBjcmVhdGluZyBhIGdsb2JhbCBSZXNvdXJjZXMgb2JqZWN0LlxuXHQgICAqL1xuXHR3aW5kb3cuUmVzb3VyY2VzID0ge1xuXHRcdGxvYWQ6IGxvYWQsXG5cdFx0Z2V0OiBnZXQsXG5cdFx0b25SZWFkeTogb25SZWFkeSxcblx0XHRpc1JlYWR5OiBpc1JlYWR5XG5cdH07XG59KSgpO1xuIiwiJ3VzZSBzdHJpY3QnO1xuLyoqXG4gKiBAZGVzY3JpcHRpb24gQ29sbGlzaW9uIFNpbmdsZXRvbiB1c2VkIGZvciBjaGVja2luZyBjb2xsaXNpb24gYmV0d2VlbiB0d28gc2Vuc29yc1xuICogQGNvbnN0cnVjdG9yXG4gKi9cbnZhciBDb2xsaXNpb24gPSAoZnVuY3Rpb24gUHJvdG90eXBlKCkge1xuXHR2YXIgaW5zdGFuY2UgPSBmdW5jdGlvbiBpbnN0YW5jZSgpIHt9O1xuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIFVzZXMgYm94IGNvbGxpc2lvbiB0byBjaGVjayBpZiB0d28gc2Vuc29ycyBhcmUgdG91Y2hpbmdcblx0ICogQHBhcmFtIHtTZW5vcn0gc2Vuc29yQSAtIEJvdW5kaW5nIHJlY3QgQVxuXHQgKiBAcGFyYW0ge1Nlbm9yfSBzZW5zb3JCIC0gQm91bmRpbmcgcmVjdCBCXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBiYXNlZCBvbiBzZW5zb3Igb3ZlcmxhcFxuXHQgKi9cblx0aW5zdGFuY2UuaXNDb2xsaWRpbmcgPSBmdW5jdGlvbiBpc0NvbGxpZGluZyhzZW5zb3JBLCBzZW5zb3JCKSB7XG5cdFx0cmV0dXJuIChzZW5zb3JBLnggPCBzZW5zb3JCLnggKyBzZW5zb3JCLndpZHRoICYmXG5cdFx0XHRzZW5zb3JBLnggKyBzZW5zb3JCLndpZHRoID4gc2Vuc29yQi54ICYmXG5cdFx0XHRzZW5zb3JBLnkgPCBzZW5zb3JCLnkgKyBzZW5zb3JCLmhlaWdodCAmJlxuXHRcdFx0c2Vuc29yQS5oZWlnaHQgKyBzZW5zb3JBLnkgPiBzZW5zb3JCLnkpO1xuXHR9O1xuXHRyZXR1cm4gaW5zdGFuY2U7XG59KSgpO1xuIiwiJ3VzZSBzdHJpY3QnO1xuLyogRW5naW5lLmpzXG4gKiBUaGlzIGZpbGUgcHJvdmlkZXMgdGhlIGdhbWUgbG9vcCBmdW5jdGlvbmFsaXR5ICh1cGRhdGUgZW50aXRpZXMgYW5kIHJlbmRlciksXG4gKiBkcmF3cyB0aGUgaW5pdGlhbCBnYW1lIGJvYXJkIG9uIHRoZSBzY3JlZW4sIGFuZCB0aGVuIGNhbGxzIHRoZSB1cGRhdGUgYW5kXG4gKiByZW5kZXIgbWV0aG9kcyBvbiB5b3VyIHBsYXllciBhbmQgZW5lbXkgb2JqZWN0cyAoZGVmaW5lZCBpbiB5b3VyIGFwcC5qcykuXG4gKlxuICogQSBnYW1lIGVuZ2luZSB3b3JrcyBieSBkcmF3aW5nIHRoZSBlbnRpcmUgZ2FtZSBzY3JlZW4gb3ZlciBhbmQgb3Zlciwga2luZCBvZlxuICogbGlrZSBhIGZsaXBib29rIHlvdSBtYXkgaGF2ZSBjcmVhdGVkIGFzIGEga2lkLiBXaGVuIHlvdXIgcGxheWVyIG1vdmVzIGFjcm9zc1xuICogdGhlIHNjcmVlbiwgaXQgbWF5IGxvb2sgbGlrZSBqdXN0IHRoYXQgaW1hZ2UvY2hhcmFjdGVyIGlzIG1vdmluZyBvciBiZWluZ1xuICogZHJhd24gYnV0IHRoYXQgaXMgbm90IHRoZSBjYXNlLiBXaGF0J3MgcmVhbGx5IGhhcHBlbmluZyBpcyB0aGUgZW50aXJlIFwic2NlbmVcIlxuICogaXMgYmVpbmcgZHJhd24gb3ZlciBhbmQgb3ZlciwgcHJlc2VudGluZyB0aGUgaWxsdXNpb24gb2YgYW5pbWF0aW9uLlxuICpcbiAqIFRoaXMgZW5naW5lIGlzIGF2YWlsYWJsZSBnbG9iYWxseSB2aWEgdGhlIEVuZ2luZSB2YXJpYWJsZSBhbmQgaXQgYWxzbyBtYWtlc1xuICogdGhlIGNhbnZhcycgY29udGV4dCAoY3R4KSBvYmplY3QgZ2xvYmFsbHkgYXZhaWxhYmxlIHRvIG1ha2Ugd3JpdGluZyBhcHAuanNcbiAqIGEgbGl0dGxlIHNpbXBsZXIgdG8gd29yayB3aXRoLlxuICovXG5cbnZhciBFbmdpbmUgPSAoZnVuY3Rpb24gRW5naW5lKGdsb2JhbCkge1xuXHQvKiBQcmVkZWZpbmUgdGhlIHZhcmlhYmxlcyB3ZSdsbCBiZSB1c2luZyB3aXRoaW4gdGhpcyBzY29wZSxcblx0ICogY3JlYXRlIHRoZSBjYW52YXMgZWxlbWVudCwgZ3JhYiB0aGUgMkQgY29udGV4dCBmb3IgdGhhdCBjYW52YXNcblx0ICogc2V0IHRoZSBjYW52YXMgZWxlbWVudHMgaGVpZ2h0L3dpZHRoIGFuZCBhZGQgaXQgdG8gdGhlIERPTS5cblx0ICovXG5cdHZhciBkb2MgPSBnbG9iYWwuZG9jdW1lbnQsXG5cdFx0d2luID0gZ2xvYmFsLndpbmRvdyxcblx0XHRjYW52YXMgPSBkb2MuY3JlYXRlRWxlbWVudCgnY2FudmFzJyksXG5cdFx0Y3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyksXG5cdFx0bGFzdFRpbWUsXG5cdFx0cnVubmluZyA9IGZhbHNlLFxuXHRcdGluc3RhbmNlID0gZnVuY3Rpb24gaW5zdGFuY2UoKSB7fTtcblxuXHRpbnN0YW5jZS5lbnRpdGllcyA9IFtdO1xuXHRpbnN0YW5jZS53aWR0aCA9IGNhbnZhcy53aWR0aCA9IDUwNTtcblx0aW5zdGFuY2UuaGVpZ2h0ID0gY2FudmFzLmhlaWdodCA9IDYwNjtcblx0Y2FudmFzLmNsYXNzTmFtZSArPSAnIGNhbnZhcy1nYW1lJztcblx0ZG9jLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2xldmVsJylbMF0uYXBwZW5kQ2hpbGQoY2FudmFzKTtcblxuXHQvKiBUaGlzIGlzIGNhbGxlZCBieSB0aGUgdXBkYXRlIGZ1bmN0aW9uICBhbmQgbG9vcHMgdGhyb3VnaCBhbGwgb2YgdGhlXG5cdCAqIG9iamVjdHMgd2l0aGluIHlvdXIgaW5zdGFuY2UuZW50aXRpZXMgYXJyYXkgYXMgZGVmaW5lZCBpbiBhcHAuanMgYW5kIGNhbGxzXG5cdCAqIHRoZWlyIHVwZGF0ZSgpIG1ldGhvZHMuIEl0IHdpbGwgdGhlbiBjYWxsIHRoZSB1cGRhdGUgZnVuY3Rpb24gZm9yIHlvdXJcblx0ICogcGxheWVyIG9iamVjdC4gVGhlc2UgdXBkYXRlIG1ldGhvZHMgc2hvdWxkIGZvY3VzIHB1cmVseSBvbiB1cGRhdGluZ1xuXHQgKiB0aGUgZGF0YS9wcm9wZXJ0aWVzIHJlbGF0ZWQgdG8gIHRoZSBvYmplY3QuIERvIHlvdXIgZHJhd2luZyBpbiB5b3VyXG5cdCAqIHJlbmRlciBtZXRob2RzLlxuXHQgKi9cblx0ZnVuY3Rpb24gdXBkYXRlRW50aXRpZXMoZHQpIHtcblx0XHRpbnN0YW5jZS5lbnRpdGllcy5mb3JFYWNoKGZ1bmN0aW9uIEVhY2hFbmVteShlbmVteSkge1xuXHRcdFx0ZW5lbXkudXBkYXRlKGR0KTtcblx0XHR9KTtcblx0XHRwbGF5ZXIudXBkYXRlKGR0KTtcblx0fVxuXG5cdC8qIFRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkIGJ5IG1haW4gKG91ciBnYW1lIGxvb3ApIGFuZCBpdHNlbGYgY2FsbHMgYWxsXG5cdCAqIG9mIHRoZSBmdW5jdGlvbnMgd2hpY2ggbWF5IG5lZWQgdG8gdXBkYXRlIGVudGl0eSdzIGRhdGEuIEJhc2VkIG9uIGhvd1xuXHQgKiB5b3UgaW1wbGVtZW50IHlvdXIgY29sbGlzaW9uIGRldGVjdGlvbiAod2hlbiB0d28gZW50aXRpZXMgb2NjdXB5IHRoZVxuXHQgKiBzYW1lIHNwYWNlLCBmb3IgaW5zdGFuY2Ugd2hlbiB5b3VyIGNoYXJhY3RlciBzaG91bGQgZGllKSwgeW91IG1heSBmaW5kXG5cdCAqIHRoZSBuZWVkIHRvIGFkZCBhbiBhZGRpdGlvbmFsIGZ1bmN0aW9uIGNhbGwgaGVyZS4gRm9yIG5vdywgd2UndmUgbGVmdFxuXHQgKiBpdCBjb21tZW50ZWQgb3V0IC0geW91IG1heSBvciBtYXkgbm90IHdhbnQgdG8gaW1wbGVtZW50IHRoaXNcblx0ICogZnVuY3Rpb25hbGl0eSB0aGlzIHdheSAoeW91IGNvdWxkIGp1c3QgaW1wbGVtZW50IGNvbGxpc2lvbiBkZXRlY3Rpb25cblx0ICogb24gdGhlIGVudGl0aWVzIHRoZW1zZWx2ZXMgd2l0aGluIHlvdXIgYXBwLmpzIGZpbGUpLlxuXHQgKi9cblx0ZnVuY3Rpb24gdXBkYXRlKGR0KSB7XG5cdFx0dXBkYXRlRW50aXRpZXMoZHQpO1xuXHRcdC8vIGNoZWNrQ29sbGlzaW9ucygpO1xuXHR9XG5cblx0LyogVGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgYnkgdGhlIHJlbmRlciBmdW5jdGlvbiBhbmQgaXMgY2FsbGVkIG9uIGVhY2ggZ2FtZVxuXHQgKiB0aWNrLiBJdCdzIHB1cnBvc2UgaXMgdG8gdGhlbiBjYWxsIHRoZSByZW5kZXIgZnVuY3Rpb25zIHlvdSBoYXZlIGRlZmluZWRcblx0ICogb24geW91ciBlbmVteSBhbmQgcGxheWVyIGVudGl0aWVzIHdpdGhpbiBhcHAuanNcblx0ICovXG5cdGZ1bmN0aW9uIHJlbmRlckVudGl0aWVzKCkge1xuXHRcdC8qIExvb3AgdGhyb3VnaCBhbGwgb2YgdGhlIG9iamVjdHMgd2l0aGluIHRoZSBpbnN0YW5jZS5lbnRpdGllcyBhcnJheSBhbmQgY2FsbFxuXHRcdCAqIHRoZSByZW5kZXIgZnVuY3Rpb24geW91IGhhdmUgZGVmaW5lZC5cblx0XHQgKi9cblx0XHR2YXIgaTtcblx0XHRmb3IgKGkgPSAwOyBpIDwgaW5zdGFuY2UuZW50aXRpZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGluc3RhbmNlLmVudGl0aWVzW2ldLnJlbmRlcihjdHgpO1xuXHRcdH1cblxuXHRcdHBsYXllci5yZW5kZXIoY3R4KTtcblx0fVxuXG5cdC8qIFRoaXMgZnVuY3Rpb24gaW5pdGlhbGx5IGRyYXdzIHRoZSBcImdhbWUgbGV2ZWxcIiwgaXQgd2lsbCB0aGVuIGNhbGxcblx0ICogdGhlIHJlbmRlckVudGl0aWVzIGZ1bmN0aW9uLiBSZW1lbWJlciwgdGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgZXZlcnlcblx0ICogZ2FtZSB0aWNrIChvciBsb29wIG9mIHRoZSBnYW1lIGVuZ2luZSkgYmVjYXVzZSB0aGF0J3MgaG93IGdhbWVzIHdvcmsgLVxuXHQgKiB0aGV5IGFyZSBmbGlwYm9va3MgY3JlYXRpbmcgdGhlIGlsbHVzaW9uIG9mIGFuaW1hdGlvbiBidXQgaW4gcmVhbGl0eVxuXHQgKiB0aGV5IGFyZSBqdXN0IGRyYXdpbmcgdGhlIGVudGlyZSBzY3JlZW4gb3ZlciBhbmQgb3Zlci5cblx0ICovXG5cdGZ1bmN0aW9uIHJlbmRlcigpIHtcblx0XHQvKiBUaGlzIGFycmF5IGhvbGRzIHRoZSByZWxhdGl2ZSBVUkwgdG8gdGhlIGltYWdlIHVzZWRcblx0XHQgKiBmb3IgdGhhdCBwYXJ0aWN1bGFyIHJvdyBvZiB0aGUgZ2FtZSBsZXZlbC5cblx0XHQgKi9cblx0XHR2YXIgcm93SW1hZ2VzID0gW1xuXHRcdFx0XHQnaW1hZ2VzL3dhdGVyLWJsb2NrLnBuZycsIC8vIFRvcCByb3cgaXMgd2F0ZXJcblx0XHRcdFx0J2ltYWdlcy9zdG9uZS1ibG9jay5wbmcnLCAvLyBSb3cgMSBvZiAzIG9mIHN0b25lXG5cdFx0XHRcdCdpbWFnZXMvc3RvbmUtYmxvY2sucG5nJywgLy8gUm93IDIgb2YgMyBvZiBzdG9uZVxuXHRcdFx0XHQnaW1hZ2VzL3N0b25lLWJsb2NrLnBuZycsIC8vIFJvdyAzIG9mIDMgb2Ygc3RvbmVcblx0XHRcdFx0J2ltYWdlcy9ncmFzcy1ibG9jay5wbmcnLCAvLyBSb3cgMSBvZiAyIG9mIGdyYXNzXG5cdFx0XHRcdCdpbWFnZXMvZ3Jhc3MtYmxvY2sucG5nJyAvLyBSb3cgMiBvZiAyIG9mIGdyYXNzXG5cdFx0XHRdLFxuXHRcdFx0bnVtUm93cyA9IDYsXG5cdFx0XHRudW1Db2xzID0gNSxcblx0XHRcdHJvdywgY29sO1xuXG5cdFx0Ly8gIENsZWFyIHRoZSBlbnRpcmUgY2FudmFzXG5cdFx0Y3R4LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuXG5cdFx0LyogTG9vcCB0aHJvdWdoIHRoZSBudW1iZXIgb2Ygcm93cyBhbmQgY29sdW1ucyB3ZSd2ZSBkZWZpbmVkIGFib3ZlXG5cdFx0ICogYW5kLCB1c2luZyB0aGUgcm93SW1hZ2VzIGFycmF5LCBkcmF3IHRoZSBjb3JyZWN0IGltYWdlIGZvciB0aGF0XG5cdFx0ICogcG9ydGlvbiBvZiB0aGUgXCJncmlkXCJcblx0XHQgKi9cblx0XHRmb3IgKHJvdyA9IDA7IHJvdyA8IG51bVJvd3M7IHJvdysrKSB7XG5cdFx0XHRmb3IgKGNvbCA9IDA7IGNvbCA8IG51bUNvbHM7IGNvbCsrKSB7XG5cdFx0XHRcdC8qIFRoZSBkcmF3SW1hZ2UgZnVuY3Rpb24gb2YgdGhlIGNhbnZhcycgY29udGV4dCBlbGVtZW50XG5cdFx0XHRcdCAqIHJlcXVpcmVzIDMgcGFyYW1ldGVyczogdGhlIGltYWdlIHRvIGRyYXcsIHRoZSB4IGNvb3JkaW5hdGVcblx0XHRcdFx0ICogdG8gc3RhcnQgZHJhd2luZyBhbmQgdGhlIHkgY29vcmRpbmF0ZSB0byBzdGFydCBkcmF3aW5nLlxuXHRcdFx0XHQgKiBXZSdyZSB1c2luZyBvdXIgUmVzb3VyY2VzIGhlbHBlcnMgdG8gcmVmZXIgdG8gb3VyIGltYWdlc1xuXHRcdFx0XHQgKiBzbyB0aGF0IHdlIGdldCB0aGUgYmVuZWZpdHMgb2YgY2FjaGluZyB0aGVzZSBpbWFnZXMsIHNpbmNlXG5cdFx0XHRcdCAqIHdlJ3JlIHVzaW5nIHRoZW0gb3ZlciBhbmQgb3Zlci5cblx0XHRcdFx0ICovXG5cdFx0XHRcdGN0eC5kcmF3SW1hZ2UoUmVzb3VyY2VzLmdldChyb3dJbWFnZXNbcm93XSksIGNvbCAqIDEwMSwgcm93ICogODMpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJlbmRlckVudGl0aWVzKCk7XG5cdH1cblxuXHQvKiBUaGlzIGZ1bmN0aW9uIHNlcnZlcyBhcyB0aGUga2lja29mZiBwb2ludCBmb3IgdGhlIGdhbWUgbG9vcCBpdHNlbGZcblx0ICogYW5kIGhhbmRsZXMgcHJvcGVybHkgY2FsbGluZyB0aGUgdXBkYXRlIGFuZCByZW5kZXIgbWV0aG9kcy5cblx0ICovXG5cdGZ1bmN0aW9uIG1haW4oKSB7XG5cdFx0aWYgKHJ1bm5pbmcpIHtcblx0XHRcdC8qIEdldCBvdXIgdGltZSBkZWx0YSBpbmZvcm1hdGlvbiB3aGljaCBpcyByZXF1aXJlZCBpZiB5b3VyIGdhbWVcblx0XHRcdCAqIHJlcXVpcmVzIHNtb290aCBhbmltYXRpb24uIEJlY2F1c2UgZXZlcnlvbmUncyBjb21wdXRlciBwcm9jZXNzZXNcblx0XHRcdCAqIGluc3RydWN0aW9ucyBhdCBkaWZmZXJlbnQgc3BlZWRzIHdlIG5lZWQgYSBjb25zdGFudCB2YWx1ZSB0aGF0XG5cdFx0XHQgKiB3b3VsZCBiZSB0aGUgc2FtZSBmb3IgZXZlcnlvbmUgKHJlZ2FyZGxlc3Mgb2YgaG93IGZhc3QgdGhlaXJcblx0XHRcdCAqIGNvbXB1dGVyIGlzKSAtIGh1cnJheSB0aW1lIVxuXHRcdFx0ICovXG5cdFx0XHR2YXIgbm93ID0gRGF0ZS5ub3coKSxcblx0XHRcdFx0ZHQgPSAobm93IC0gbGFzdFRpbWUpIC8gMTAwMC4wO1xuXG5cdFx0XHQvKiBDYWxsIG91ciB1cGRhdGUvcmVuZGVyIGZ1bmN0aW9ucywgcGFzcyBhbG9uZyB0aGUgdGltZSBkZWx0YSB0b1xuXHRcdFx0ICogb3VyIHVwZGF0ZSBmdW5jdGlvbiBzaW5jZSBpdCBtYXkgYmUgdXNlZCBmb3Igc21vb3RoIGFuaW1hdGlvbi5cblx0XHRcdCAqL1xuXHRcdFx0dXBkYXRlKGR0KTtcblx0XHRcdHJlbmRlcigpO1xuXG5cdFx0XHQvKiBTZXQgb3VyIGxhc3RUaW1lIHZhcmlhYmxlIHdoaWNoIGlzIHVzZWQgdG8gZGV0ZXJtaW5lIHRoZSB0aW1lIGRlbHRhXG5cdFx0XHQgKiBmb3IgdGhlIG5leHQgdGltZSB0aGlzIGZ1bmN0aW9uIGlzIGNhbGxlZC5cblx0XHRcdCAqL1xuXHRcdFx0bGFzdFRpbWUgPSBub3c7XG5cblx0XHRcdC8qIFVzZSB0aGUgYnJvd3NlcidzIHJlcXVlc3RBbmltYXRpb25GcmFtZSBmdW5jdGlvbiB0byBjYWxsIHRoaXNcblx0XHRcdCAqIGZ1bmN0aW9uIGFnYWluIGFzIHNvb24gYXMgdGhlIGJyb3dzZXIgaXMgYWJsZSB0byBkcmF3IGFub3RoZXIgZnJhbWUuXG5cdFx0XHQgKi9cblx0XHRcdHdpbi5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUobWFpbik7XG5cdFx0fVxuXHR9XG5cblx0LyogVGhpcyBmdW5jdGlvbiBkb2VzIHNvbWUgaW5pdGlhbCBzZXR1cCB0aGF0IHNob3VsZCBvbmx5IG9jY3VyIG9uY2UsXG5cdCAqIHBhcnRpY3VsYXJseSBzZXR0aW5nIHRoZSBsYXN0VGltZSB2YXJpYWJsZSB0aGF0IGlzIHJlcXVpcmVkIGZvciB0aGVcblx0ICogZ2FtZSBsb29wLlxuXHQgKi9cblx0ZnVuY3Rpb24gaW5pdCgpIHtcblx0XHRpbnN0YW5jZS5yZXNldCgpO1xuXHRcdHJ1bm5pbmcgPSB0cnVlO1xuXHRcdGxhc3RUaW1lID0gRGF0ZS5ub3coKTtcblx0XHRtYWluKCk7XG5cdH1cblxuXHQvKiBUaGlzIGZ1bmN0aW9uIGRvZXMgbm90aGluZyBidXQgaXQgY291bGQgaGF2ZSBiZWVuIGEgZ29vZCBwbGFjZSB0b1xuXHQgKiBoYW5kbGUgZ2FtZSByZXNldCBzdGF0ZXMgLSBtYXliZSBhIG5ldyBnYW1lIG1lbnUgb3IgYSBnYW1lIG92ZXIgc2NyZWVuXG5cdCAqIHRob3NlIHNvcnRzIG9mIHRoaW5ncy4gSXQncyBvbmx5IGNhbGxlZCBvbmNlIGJ5IHRoZSBpbml0KCkgbWV0aG9kLlxuXHQgKi9cblx0aW5zdGFuY2UucmVzZXQgPSBmdW5jdGlvbiByZXNldCgpIHtcblx0XHRydW5uaW5nID0gZmFsc2U7XG5cdH07XG5cblx0aW5zdGFuY2UucGF1c2UgPSBmdW5jdGlvbiBwYXVzZSgpIHtcblx0XHRydW5uaW5nID0gZmFsc2U7XG5cdH07XG5cblx0aW5zdGFuY2UucHJlbG9hZCA9IGZ1bmN0aW9uIHByZWxvYWQoKSB7XG5cdFx0LyogR28gYWhlYWQgYW5kIGxvYWQgYWxsIG9mIHRoZSBpbWFnZXMgd2Uga25vdyB3ZSdyZSBnb2luZyB0byBuZWVkIHRvXG5cdFx0ICogZHJhdyBvdXIgZ2FtZSBsZXZlbC4gVGhlbiBzZXQgaW5pdCBhcyB0aGUgY2FsbGJhY2sgbWV0aG9kLCBzbyB0aGF0IHdoZW5cblx0XHQgKiBhbGwgb2YgdGhlc2UgaW1hZ2VzIGFyZSBwcm9wZXJseSBsb2FkZWQgb3VyIGdhbWUgd2lsbCBzdGFydC5cblx0XHQgKi9cblxuXHRcdGZ1bmN0aW9uIGxvY2F0aW9ucyhmb2xkZXIsIGZvcm1hdCkge1xuXHRcdFx0dmFyIHJlc291cmNlcyA9IFtcblx0XHRcdFx0J2NoYXItYm95Jyxcblx0XHRcdFx0J2NoYXItY2F0LWdpcmwnLFxuXHRcdFx0XHQnY2hhci1ob3JuLWdpcmwnLFxuXHRcdFx0XHQnY2hhci1waW5rLWdpcmwnLFxuXHRcdFx0XHQnY2hhci1wcmluY2Vzcy1naXJsJyxcblx0XHRcdFx0J2VuZW15LWJ1ZycsXG5cdFx0XHRcdCdHZW0gQmx1ZScsXG5cdFx0XHRcdCdHZW0gR3JlZW4nLFxuXHRcdFx0XHQnR2VtIE9yYW5nZScsXG5cdFx0XHRcdCdncmFzcy1ibG9jaycsXG5cdFx0XHRcdCdIZWFydCcsXG5cdFx0XHRcdCdLZXknLFxuXHRcdFx0XHQnUm9jaycsXG5cdFx0XHRcdCdTZWxlY3RvcicsXG5cdFx0XHRcdCdTdGFyJyxcblx0XHRcdFx0J3N0b25lLWJsb2NrJyxcblx0XHRcdFx0J3dhdGVyLWJsb2NrJ1xuXHRcdFx0XTtcblx0XHRcdHJldHVybiByZXNvdXJjZXMubWFwKGZ1bmN0aW9uIHJlc291cmNlTWFwKGVsKSB7XG5cdFx0XHRcdHJldHVybiBmb2xkZXIgKyBlbCArICcuJyArIGZvcm1hdDtcblx0XHRcdH0pO1xuXHRcdH1cblx0XHRSZXNvdXJjZXMubG9hZChsb2NhdGlvbnMoJ2ltYWdlcy8nLCAncG5nJykpO1xuXG5cdFx0aWYgKFJlc291cmNlcy5pc1JlYWR5KCkpIHtcblx0XHRcdGluaXQoKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0UmVzb3VyY2VzLm9uUmVhZHkoaW5pdCk7XG5cdFx0fVxuXHR9O1xuXG5cdC8qIEFzc2lnbiB0aGUgY2FudmFzJyBjb250ZXh0IG9iamVjdCB0byB0aGUgZ2xvYmFsIHZhcmlhYmxlICh0aGUgd2luZG93XG5cdCAqIG9iamVjdCB3aGVuIHJ1biBpbiBhIGJyb3dzZXIpIHNvIHRoYXQgZGV2ZWxvcGVyJ3MgY2FuIHVzZSBpdCBtb3JlIGVhc2lseVxuXHQgKiBmcm9tIHdpdGhpbiB0aGVpciBhcHAuanMgZmlsZXMuXG5cdCAqL1xuXHRnbG9iYWwuY3R4ID0gY3R4O1xuXG5cdHJldHVybiBpbnN0YW5jZTtcbn0pKHRoaXMpO1xuIiwiJ3VzZSBzdHJpY3QnO1xuLyoqXG4qIEBkZXNjcmlwdGlvbiBNb2RlbCBTaW5nbGV0b24gdXNlZCBmb3Igc3RvcmluZyBzdGF0ZSBkYXRhXG4qIEBjb25zdHJ1Y3RvclxuKi9cbnZhciBNb2RlbCA9IChmdW5jdGlvbiBNb2RlbCgpIHtcblx0dmFyIGRhdGEgPSB7fTtcblx0dmFyIGluc3RhbmNlID0gZnVuY3Rpb24gaW5zdGFuY2UoKSB7fTtcblxuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIFNldHMgYSB2YWx1ZSB0byBhIGtleVxuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IC0gVGhlIHByb3BlcnR5IHRvIHN0b3JlIHRoZSB2YWx1ZSB1bmRlclxuXHQgKiBAcGFyYW0ge251bWJlcn0gdmFsdWUgLSBUaGUgdmFsdWUgb2YgdGhlIGtleVxuXHQgKiBAcmV0dXJucyB7Kn0gVGhlIHZhbHVlIG9mIHRoZSBrZXlcblx0ICovXG5cdGluc3RhbmNlLnNldCA9IGZ1bmN0aW9uIHNldChrZXksIHZhbHVlKSB7XG5cdFx0ZGF0YVtrZXldID0gdmFsdWU7XG5cdFx0cmV0dXJuIHZhbHVlO1xuXHR9O1xuXG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gUmV0dXJucyB0aGUgdmFsdWUgc2V0IHRvIHRoZSBrZXlcblx0ICogQHJldHVybnMgeyp9IFRoZSB2YWx1ZSBvZiB0aGUga2V5XG5cdCAqL1xuXHRpbnN0YW5jZS5nZXQgPSBmdW5jdGlvbiBnZXQoa2V5KSB7XG5cdFx0cmV0dXJuIGRhdGFba2V5XTtcblx0fTtcblxuXHRyZXR1cm4gaW5zdGFuY2U7XG59KSgpO1xuIiwiJ3VzZSBzdHJpY3QnO1xuLyoqXG4qIEBkZXNjcmlwdGlvbiBBIFRpbWVyIGNsYXNzIHRoYXQgdXBkYXRlcyBtYW51YWxseSB1c2luZyB3aXRoIGRlbHRhIHRpbWVcbiogQGNvbnN0cnVjdG9yXG4qL1xudmFyIFRpbWVyID0gZnVuY3Rpb24gVGltZXIoaW50ZXJ2YWxzLCBkZWxheSkge1xuXHR0aGlzLmludGVydmFscyA9IGludGVydmFscztcblx0dGhpcy5kZWxheSA9IGRlbGF5O1xuXHR0aGlzLnJ1bm5pbmcgPSBmYWxzZTtcblx0dGhpcy5saXN0ZW5lcnMgPSB7fTtcblx0dGhpcy50aW1lID0gMDtcblx0dGhpcy5sYXBzID0gMDtcbn07XG5cbihmdW5jdGlvbiBQcm90b3R5cGUoKSB7XG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gUmVzZXRzIHRoZSB0aW1lciBhbmQgZmxhZ3MgaXQgYXMgcnVubmluZ1xuXHQgKi9cblx0dGhpcy5zdGFydCA9IGZ1bmN0aW9uIHN0YXJ0KCkge1xuXHRcdHRoaXMucnVubmluZyA9IHRydWU7XG5cdFx0dGhpcy50aW1lID0gdGhpcy5kZWxheTtcblx0XHR0aGlzLmxhcHMgPSB0aGlzLmludGVydmFscztcblx0fTtcblxuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIFVzZXMgdGhlIGRlbHRhIHRpbWUgdG8gbWFudWFsbHkgdXBkYXRlIHRoZSB0aW1lclxuXHQgKiBAcGFyYW0ge251bWJlcn0gZGVsdGEgLSBUaW1lIHNpbmNlIGxhc3QgdXBkYXRlXG5cdCAqL1xuXHR0aGlzLnVwZGF0ZSA9IGZ1bmN0aW9uIHVwZGF0ZShkZWx0YSkge1xuXHRcdGlmICh0aGlzLnJ1bm5pbmcpIHtcblx0XHRcdHRoaXMudGltZSA9IE1hdGgubWF4KDAsIHRoaXMudGltZSAtIGRlbHRhKTtcblx0XHRcdGlmICh0aGlzLnRpbWUgPT09IDApIHtcblx0XHRcdFx0dGhpcy5sYXBzIC09IDE7XG5cdFx0XHRcdGlmICh0aGlzLmxhcHMgPD0gMCkge1xuXHRcdFx0XHRcdHRoaXMucnVubmluZyA9IGZhbHNlO1xuXHRcdFx0XHRcdHRoaXMuZGlzcGF0Y2goJ0NPTVBMRVRFJyk7XG5cdFx0XHRcdH1lbHNlIHtcblx0XHRcdFx0XHR0aGlzLnRpbWUgPSB0aGlzLmRlbGF5O1xuXHRcdFx0XHRcdHRoaXMuZGlzcGF0Y2goJ1VQREFURScpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gQWRkcyBhIGxpc3RlbmVyIGZvciB0aGUgc3BlY2lmaWVkIGV2ZW50XG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBldmVudCAtIFRoZSBldmVudCB0byBsaXN0ZW4gZm9yXG5cdCAqIEBwYXJhbSB7ZnVuY3Rpb259IGxpc3RlbmVyIC0gVGhlIGNhbGxiYWNrIGZ1bmN0aW9uXG5cdCAqL1xuXHR0aGlzLm9uID0gZnVuY3Rpb24gb24oZXZlbnQsIGxpc3RlbmVyKSB7XG5cdFx0aWYgKCF0aGlzLmxpc3RlbmVycy5oYXNPd25Qcm9wZXJ0eShldmVudCkpIHtcblx0XHRcdHRoaXMubGlzdGVuZXJzW2V2ZW50XSA9IFtdO1xuXHRcdH1cblx0XHR0aGlzLmxpc3RlbmVyc1tldmVudF0ucHVzaChsaXN0ZW5lcik7XG5cdH07XG5cblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBBdHRlbXB0cyB0byBpbnZva2UgYSBjYWxsYmFjayBtZXRob2QgZm9yIHRoZSBnaXZlbiBldmVudFxuXHQgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnQgLSBUaGUgZXZlbnQgdG8gZGlzcGF0Y2hcblx0ICovXG5cdHRoaXMuZGlzcGF0Y2ggPSBmdW5jdGlvbiBkaXNwYXRjaChldmVudCkge1xuXHRcdHZhciBpO1xuXHRcdHZhciBsaXN0O1xuXHRcdGlmICh0aGlzLmxpc3RlbmVycy5oYXNPd25Qcm9wZXJ0eShldmVudCkpIHtcblx0XHRcdGxpc3QgPSB0aGlzLmxpc3RlbmVyc1tldmVudF07XG5cdFx0XHRmb3IgKGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRsaXN0W2ldKHRoaXMpO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcbn0pLmNhbGwoVGltZXIucHJvdG90eXBlKTtcbiIsIid1c2Ugc3RyaWN0Jztcbi8qKlxuKiBAZGVzY3JpcHRpb24gR3JpZCBTaW5nbGV0b24gdXNlZCBmb3IgcG9zaXRpb25pbmcgdGhpbmdzIG9uIGEgR3JpZFxuKiBAY29uc3RydWN0b3JcbiovXG52YXIgR3JpZCA9IChmdW5jdGlvbiBHcmlkKCkge1xuXHR2YXIgaW5zdGFuY2UgPSBmdW5jdGlvbiBpbnN0YW5jZSgpIHt9O1xuXG5cdGluc3RhbmNlLmNlbGxXaWR0aCA9IDEwMTtcblx0aW5zdGFuY2UuY2VsbEhlaWdodCA9IDgzO1xuXHRpbnN0YW5jZS5jb2x1bW5zID0gNTtcblx0aW5zdGFuY2Uucm93cyA9IDY7XG5cdGluc3RhbmNlLm9mZnNldFkgPSA1MDtcblxuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIERldGVybWluZXMgdGhlIHggbG9jYXRpb24gYmFzZWQgb24gdGhlIGNvbHVtblxuXHQgKiBAcGFyYW0ge2ludH0gY29sdW1uIC0gVGhlIGNvbHVtblxuXHQgKiBAcmV0dXJucyB7bnVtYmVyfSBUaGUgc2NyZWVuIHggcG9zaXRpb25cblx0ICovXG5cdGluc3RhbmNlLmdldFhGcm9tQ29sdW1uID0gZnVuY3Rpb24gZ2V0WEZyb21Db2x1bW4oY29sdW1uKSB7XG5cdFx0dmFyIGNvbCA9IE1hdGgubWF4KDAsIE1hdGgubWluKGNvbHVtbiwgaW5zdGFuY2UuY29sdW1ucyAtIDEpKTtcblx0XHRyZXR1cm4gY29sICogaW5zdGFuY2UuY2VsbFdpZHRoO1xuXHR9O1xuXG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gRGV0ZXJtaW5lcyB0aGUgeSBsb2NhdGlvbiBiYXNlZCBvbiB0aGUgcm93XG5cdCAqIEBwYXJhbSB7aW50fSByb3cgLSBUaGUgcm93XG5cdCAqIEByZXR1cm5zIHtudW1iZXJ9IFRoZSBzY3JlZW4geSBwb3NpdGlvblxuXHQgKi9cblx0aW5zdGFuY2UuZ2V0WUZyb21Sb3cgPSBmdW5jdGlvbiBnZXRZRnJvbVJvdyhyb3cpIHtcblx0XHRyb3cgPSBNYXRoLm1heCgwLCBNYXRoLm1pbihyb3csIGluc3RhbmNlLnJvd3MgLSAxKSk7XG5cdFx0cmV0dXJuIGluc3RhbmNlLm9mZnNldFkgKyByb3cgKiBpbnN0YW5jZS5jZWxsSGVpZ2h0O1xuXHR9O1xuXG5cdHJldHVybiBpbnN0YW5jZTtcbn0pKCk7XG4iLCIndXNlIHN0cmljdCc7XG4vKipcbiogQGRlc2NyaXB0aW9uIEhhbmRsZXMgbGV2ZWwgY3JlYXRpb25cbiogQGNvbnN0cnVjdG9yXG4qL1xudmFyIExldmVsID0gZnVuY3Rpb24gTGV2ZWwoKSB7XG5cdHRoaXMucmVzZXQoKTtcbn07XG5cbihmdW5jdGlvbiBQcm90b3R5cGUoKSB7XG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gUmVzZXQncyBsZXZlbCB2YXJpYWJsZXMgdG8gb3JpZ2luYWwgdmFsdWVzXG5cdCAqL1xuXHR0aGlzLnJlc2V0ID0gZnVuY3Rpb24gcmVzZXQoKSB7XG5cdFx0dGhpcy5sZXZlbCA9IE1vZGVsLnNldCgnbGV2ZWwnLCAwKTtcblx0XHR0aGlzLmxhc3RMZXZlbCA9IDc7XG5cdFx0TW9kZWwuc2V0KCdsZXZlbF90b3RhbF90aW1lJywgMTUpO1xuXHRcdE1vZGVsLnNldCgnbGV2ZWxfY29tcGxldGUnLCBmYWxzZSk7XG5cdH07XG5cblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBBZHZhbmNlcyB0aGUgY3VycmVudCBsZXZlbCBieSBvbmVcblx0ICovXG5cdHRoaXMubmV4dCA9IGZ1bmN0aW9uIG5leHQoKSB7XG5cdFx0dGhpcy5sZXZlbCA9IE1vZGVsLnNldCgnbGV2ZWwnLCB0aGlzLmxldmVsICsgMSk7XG5cdH07XG5cblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBDcmVhdGVzIGFsbCB0aGUgZW50aXRpZXMgZm9yIHRoZSBjdXJyZW50IGxldmVsXG5cdCAqL1xuXHR0aGlzLmFkZEVudGl0aWVzID0gZnVuY3Rpb24gYWRkRW50aXRpZXMoKSB7XG5cdFx0dmFyIGRhdGEgPSB0aGlzLmxldmVsRGF0YSgpO1xuXHRcdHZhciBpO1xuXHRcdEVuZ2luZS5lbnRpdGllcyA9IFtdO1xuXG5cdFx0Zm9yIChpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcblx0XHRcdGlmIChkYXRhW2ldLmhhc093blByb3BlcnR5KCd0JykpIHtcblx0XHRcdFx0aWYgKGRhdGFbaV0udCA9PT0gJ2tleScpIHtcblx0XHRcdFx0XHRFbmdpbmUuZW50aXRpZXMucHVzaChuZXcgS2V5KGRhdGFbaV0uciwgZGF0YVtpXS5jKSk7XG5cdFx0XHRcdH1lbHNlIGlmIChkYXRhW2ldLnQgPT09ICd3YXRlcicpIHtcblx0XHRcdFx0XHRFbmdpbmUuZW50aXRpZXMucHVzaChuZXcgV2F0ZXIoZGF0YVtpXS5yLCBkYXRhW2ldLmMpKTtcblx0XHRcdFx0fVxuXHRcdFx0fWVsc2Uge1xuXHRcdFx0XHRFbmdpbmUuZW50aXRpZXMucHVzaChuZXcgRW5lbXkoZGF0YVtpXS5yLCBkYXRhW2ldLmMsIGRhdGFbaV0ucykpO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcblxuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIFJldHVybnMgdGhlIEpTT04gZW50aXRpZXMgZm9yIHRoZSBnaXZlbiBsZXZlbFxuXHQgKiBAcmV0dXJucyB7YXJyYXl9XG5cdCAqL1xuXHR0aGlzLmxldmVsRGF0YSA9IGZ1bmN0aW9uIGxldmVsRGF0YSgpIHtcblx0XHQvLyAgRm9ybWF0dGVkIHNvIGl0J3MgZWFzaWVyIHRvIHNlZSB0aGUgbGV2ZWxzIChub3QgZm9sbG93aW5nIFVkYWNpdHkgSlMgc3RhbmRhcmRzKVxuXHRcdC8vICBqc2NzOmRpc2FibGVcblx0XHRpZiAodGhpcy5sZXZlbCA9PT0gMCkge1xuXHRcdFx0cmV0dXJuIFtcblx0XHRcdHtyOiAwLCBjOiAwLCB0OiAnd2F0ZXInfSwge3I6IDAsIGM6IDEsIHQ6ICd3YXRlcid9LCB7cjogMCwgYzogMiwgdDogJ2tleSd9LCB7cjogMCwgYzogMywgdDogJ3dhdGVyJ30sIHtyOiAwLCBjOiA0LCB0OiAnd2F0ZXInfVxuXHRcdFx0XTtcblx0XHR9ZWxzZSBpZiAodGhpcy5sZXZlbCA9PT0gMSkge1xuXHRcdFx0cmV0dXJuIFtcblx0XHRcdHtyOiAzLCBjOiAwLCBzOiAyMDB9LCB7cjogMywgYzogMiwgczogMjAwfSwge3I6IDMsIGM6IDQsIHM6IDIwMH0sXG5cdFx0XHR7cjogMCwgYzogMCwgdDogJ3dhdGVyJ30sIHtyOiAwLCBjOiAxLCB0OiAnd2F0ZXInfSwge3I6IDAsIGM6IDIsIHQ6ICdrZXknfSwge3I6IDAsIGM6IDMsIHQ6ICd3YXRlcid9LCB7cjogMCwgYzogNCwgdDogJ3dhdGVyJ31cblx0XHRcdF07XG5cdFx0fWVsc2UgaWYgKHRoaXMubGV2ZWwgPT09IDIpIHtcblx0XHRcdHJldHVybiBbXG5cdFx0XHR7cjogMSwgYzogMCwgczogLTEwMH0sIHtyOiAxLCBjOiAxLCBzOiAtMTAwfSwge3I6IDEsIGM6IDMsIHM6IC0xMDB9LCB7cjogMSwgYzogNCwgczogLTEwMH0sXG5cdFx0XHR7cjogMCwgYzogMCwgdDogJ3dhdGVyJ30sIHtyOiAwLCBjOiAxLCB0OiAnd2F0ZXInfSwge3I6IDAsIGM6IDIsIHQ6ICdrZXknfSwge3I6IDAsIGM6IDMsIHQ6ICd3YXRlcid9LCB7cjogMCwgYzogNCwgdDogJ3dhdGVyJ31cblx0XHRcdF07XG5cdFx0fWVsc2UgaWYgKHRoaXMubGV2ZWwgPT09IDMpIHtcblx0XHRcdHJldHVybiBbXG5cdFx0XHR7cjogMiwgYzogMCwgczogNTAwfSwge3I6IDIsIGM6IDQsIHM6IDYwMH0sXG5cdFx0XHR7cjogMCwgYzogMCwgdDogJ3dhdGVyJ30sIHtyOiAwLCBjOiAxLCB0OiAnd2F0ZXInfSwge3I6IDAsIGM6IDIsIHQ6ICdrZXknfSwge3I6IDAsIGM6IDMsIHQ6ICd3YXRlcid9LCB7cjogMCwgYzogNCwgdDogJ3dhdGVyJ31cblx0XHRcdF07XG5cdFx0fWVsc2UgaWYgKHRoaXMubGV2ZWwgPT09IDQpIHtcblx0XHRcdHJldHVybiBbXG5cdFx0XHR7cjogMSwgYzogMCwgczogLTEwMH0sIHtyOiAxLCBjOiAxLCBzOiAtMTAwfSwge3I6IDEsIGM6IDMsIHM6IC0xMDB9LCB7cjogMSwgYzogNCwgczogLTEwMH0sXG5cdFx0XHR7cjogMywgYzogMCwgczogMjAwfSwge3I6IDMsIGM6IDIsIHM6IDIwMH0sIHtyOiAzLCBjOiA0LCBzOiAyMDB9LFxuXHRcdFx0e3I6IDAsIGM6IDAsIHQ6ICd3YXRlcid9LCB7cjogMCwgYzogMSwgdDogJ3dhdGVyJ30sIHtyOiAwLCBjOiAyLCB0OiAna2V5J30sIHtyOiAwLCBjOiAzLCB0OiAnd2F0ZXInfSwge3I6IDAsIGM6IDQsIHQ6ICd3YXRlcid9XG5cdFx0XHRdO1xuXHRcdH1lbHNlIGlmICh0aGlzLmxldmVsID09PSA1KSB7XG5cdFx0XHRyZXR1cm4gW1xuXHRcdFx0e3I6IDIsIGM6IDAsIHM6IDUwMH0sIHtyOiAyLCBjOiA0LCBzOiA2MDB9LFxuXHRcdFx0e3I6IDMsIGM6IDAsIHM6IDIwMH0sIHtyOiAzLCBjOiAyLCBzOiAyMDB9LCB7cjogMywgYzogNCwgczogMjAwfSxcblx0XHRcdHtyOiAwLCBjOiAwLCB0OiAnd2F0ZXInfSwge3I6IDAsIGM6IDEsIHQ6ICd3YXRlcid9LCB7cjogMCwgYzogMiwgdDogJ2tleSd9LCB7cjogMCwgYzogMywgdDogJ3dhdGVyJ30sIHtyOiAwLCBjOiA0LCB0OiAnd2F0ZXInfVxuXHRcdFx0XTtcblx0XHR9ZWxzZSBpZiAodGhpcy5sZXZlbCA9PT0gNikge1xuXHRcdFx0cmV0dXJuIFtcblx0XHRcdHtyOiAxLCBjOiAwLCBzOiAtMTAwfSwge3I6IDEsIGM6IDEsIHM6IC0xMDB9LCB7cjogMSwgYzogMywgczogLTEwMH0sIHtyOiAxLCBjOiA0LCBzOiAtMTAwfSxcblx0XHRcdHtyOiAyLCBjOiAwLCBzOiA1MDB9LCB7cjogMiwgYzogNCwgczogNjAwfSxcblx0XHRcdHtyOiAwLCBjOiAwLCB0OiAnd2F0ZXInfSwge3I6IDAsIGM6IDEsIHQ6ICd3YXRlcid9LCB7cjogMCwgYzogMiwgdDogJ2tleSd9LCB7cjogMCwgYzogMywgdDogJ3dhdGVyJ30sIHtyOiAwLCBjOiA0LCB0OiAnd2F0ZXInfVxuXHRcdFx0XTtcblx0XHR9XG5cdFx0Ly8gIGpzY3M6ZGlzYWJsZVxuXHRcdHJldHVybiBbXG5cdFx0e3I6IDEsIGM6IDAsIHM6IC0xMDB9LCB7cjogMSwgYzogMSwgczogLTEwMH0sIHtyOiAxLCBjOiAzLCBzOiAtMTAwfSwge3I6IDEsIGM6IDQsIHM6IC0xMDB9LFxuXHRcdHtyOiAyLCBjOiAwLCBzOiA1MDB9LCB7cjogMiwgYzogNCwgczogNjAwfSxcblx0XHR7cjogMywgYzogMCwgczogMjAwfSwge3I6IDMsIGM6IDIsIHM6IDIwMH0sIHtyOiAzLCBjOiA0LCBzOiAyMDB9LFxuXHRcdHtyOiAwLCBjOiAwLCB0OiAnd2F0ZXInfSwge3I6IDAsIGM6IDEsIHQ6ICd3YXRlcid9LCB7cjogMCwgYzogMiwgdDogJ2tleSd9LCB7cjogMCwgYzogMywgdDogJ3dhdGVyJ30sIHtyOiAwLCBjOiA0LCB0OiAnd2F0ZXInfVxuXHRcdF07XG5cdH07XG59KS5jYWxsKExldmVsLnByb3RvdHlwZSk7XG4iLCIndXNlIHN0cmljdCc7XG4vKipcbiAqIEBkZXNjcmlwdGlvbiBTY2VuZSBTaW5nbGV0b24gdXNlZCBmb3IgY2hhbmdpbmcgdGhlIHNjZW5lIHZpZXdcbiAqIEBjb25zdHJ1Y3RvclxuICovXG52YXIgU2NlbmUgPSAoZnVuY3Rpb24gU2NlbmUoKSB7XG5cdHZhciBpbnN0YW5jZSA9IGZ1bmN0aW9uIGluc3RhbmNlKCkge307XG5cdHZhciBsZXZlbCA9IG5ldyBMZXZlbCgpO1xuXHR2YXIgb25DaGFyYWN0ZXJDbGlja2VkID0gZnVuY3Rpb24gb25DaGFyYWN0ZXJDbGlja2VkKGVsKSB7XG5cdFx0dmFyIHMgPSBlbC50YXJnZXQuc3JjO1xuXHRcdHBsYXllci5zcHJpdGUgPSBzLnNsaWNlKHMuaW5kZXhPZignL2ltYWdlcy8nKSArIDEsIHMubGVuZ3RoKTtcblxuXHRcdEVsLnJlbW92ZUNsYXNzKEVsLmdldEVsZW1lbnRzKCdzZWxlY3RlZC1jaGFyJyksICdzZWxlY3RlZC1jaGFyJyk7XG5cdFx0RWwuYWRkQ2xhc3MoZWwudGFyZ2V0LCAnc2VsZWN0ZWQtY2hhcicpO1xuXHR9O1xuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIFNob3dzIHRoZSBDaGFyYWN0ZXIgc2VsZWN0aW9uIHNjZW5lXG5cdCAqL1xuXHRpbnN0YW5jZS5zdGFydE1lbnUgPSBmdW5jdGlvbiBzdGFydE1lbnUoKSB7XG5cdFx0dmFyIGNoYXJhY3RlcnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdjaGFyJyk7XG5cdFx0dmFyIGk7XG5cblx0XHRmb3IgKGkgPSAwOyBpIDwgY2hhcmFjdGVycy5sZW5ndGg7IGkrKykge1xuXHRcdFx0Y2hhcmFjdGVyc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uQ2hhcmFjdGVyQ2xpY2tlZCk7XG5cdFx0fVxuXG5cdFx0RW5naW5lLnJlc2V0KCk7XG5cblx0XHRFbC5zaG93KCdjaGFyX3NlbGVjdCcpO1xuXHRcdEVsLmhpZGUoJ2xldmVsJyk7XG5cdFx0RWwuaGlkZSgnZ2FtZW92ZXInKTtcblx0XHRFbC5oaWRlKCdnYW1ld2luJyk7XG5cdFx0c2NlbmUgPSAnY2hhcl9zZWxlY3QnO1xuXHR9O1xuXG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gU2hvd3MgdGhlIEdhbWUgc2NlbmVcblx0ICovXG5cdGluc3RhbmNlLnN0YXJ0R2FtZSA9IGZ1bmN0aW9uIHN0YXJ0R2FtZShyZXNldCkge1xuXHRcdHJlc2V0ID0gcmVzZXQgfHwgZmFsc2U7XG5cblx0XHRpZiAocmVzZXQpIHtcblx0XHRcdGxldmVsLnJlc2V0KCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdE1vZGVsLnNldCgnbGV2ZWxfY29tcGxldGUnLCBmYWxzZSk7XG5cdFx0fVxuXG5cdFx0RW5naW5lLnByZWxvYWQoKTtcblx0XHRwbGF5ZXIucmVzcGF3bigpO1xuXG5cdFx0bGV2ZWwuYWRkRW50aXRpZXMoKTtcblx0XHRFbmdpbmUuZW50aXRpZXMucHVzaCh1aSk7XG5cdFx0dWkuc3RhcnQoKTtcblxuXHRcdEVsLnNob3coJ2xldmVsJyk7XG5cdFx0RWwuaGlkZSgnY2hhcl9zZWxlY3QnKTtcblx0XHRFbC5oaWRlKCdnYW1lb3ZlcicpO1xuXHRcdEVsLmhpZGUoJ2dhbWV3aW4nKTtcblx0XHRzY2VuZSA9ICdsZXZlbCc7XG5cdH07XG5cblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBTaG93cyB0aGUgR2FtZSBPdmVyIHBvcHVwXG5cdCAqL1xuXHRpbnN0YW5jZS5lbmRHYW1lID0gZnVuY3Rpb24gZW5kR2FtZSgpIHtcblx0XHRFbC5zaG93KCdnYW1lb3ZlcicpO1xuXHRcdEVuZ2luZS5wYXVzZSgpO1xuXHR9O1xuXG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gU2hvd3MgdGhlIEdhbWUgV2luIHBvcHVwXG5cdCAqL1xuXHRpbnN0YW5jZS53aW5HYW1lID0gZnVuY3Rpb24gd2luR2FtZSgpIHtcblx0XHRFbC5zaG93KCdnYW1ld2luJyk7XG5cdFx0RW5naW5lLnBhdXNlKCk7XG5cdH07XG5cblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBUaGUgcGxheWVyIHBpY2tlZCB1cCB0aGUga2V5LiBTaG93IHN0YXIgZXhwbG9zaW9uIGFuZCBhZHZhbmNlIGxldmVsIGFmdGVyIHRpbWVvdXRcblx0ICovXG5cdGluc3RhbmNlLmxldmVsQ29tcGxldGUgPSBmdW5jdGlvbiBsZXZlbENvbXBsZXRlKCkge1xuXHRcdE1vZGVsLnNldCgnbGV2ZWxfY29tcGxldGUnLCB0cnVlKTtcblx0XHRFbmdpbmUuZW50aXRpZXMucHVzaChuZXcgRXhwbG9zaW9uKDAsIDIpKTtcblx0XHRzZXRUaW1lb3V0KGluc3RhbmNlLm5leHRMZXZlbCwgMTUwMCk7XG5cdH07XG5cblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBBZHZhbmNlIHRvIHRoZSBuZXh0IGxldmVsIG9yIGVuZCB0aGUgZ2FtZSBpZiBubyBtb3JlIGxldmVsc1xuXHQgKi9cblx0aW5zdGFuY2UubmV4dExldmVsID0gZnVuY3Rpb24gbmV4dExldmVsKCkge1xuXHRcdGxldmVsLm5leHQoKTtcblxuXHRcdGlmIChsZXZlbC5sZXZlbCA+IGxldmVsLmxhc3RMZXZlbCkge1xuXHRcdFx0aW5zdGFuY2Uud2luR2FtZSgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRpbnN0YW5jZS5zdGFydEdhbWUoKTtcblx0XHR9XG5cdH07XG5cblx0cmV0dXJuIGluc3RhbmNlO1xufSkoKTtcbiIsIid1c2Ugc3RyaWN0Jztcbi8qKlxuKiBAZGVzY3JpcHRpb24gQSBzZW5zb3IgdXNlZCBhcyBhIGNvbGxpc2lvbiBib3ggdGhhdCBjYW4gYmUgcmVuZGVyZWQgdG8gdGhlIHNjcmVlbiBmb3IgdGVzdGluZ1xuKiBAY29uc3RydWN0b3JcbiogQHBhcmFtIHtudW1iZXJ9IHggLSBUaGUgeCBsb2NhdGlvblxuKiBAcGFyYW0ge251bWJlcn0geSAtIFRoZSB5IGxvY2F0aW9uXG4qIEBwYXJhbSB7bnVtYmVyfSB3aWR0aCAtIEhvdyBsb25nIHRoZSBzZW5zb3IgaXNcbiogQHBhcmFtIHtudW1iZXJ9IGhlaWdodCAtIEhvdyB0YWxsIHRoZSBzZW5zb3IgaXNcbiogQHBhcmFtIHtudW1iZXJ9IG9mZnNldFggLSBUaGUgb2Zmc2V0IGluIHRoZSB4IGRpcmVjdGlvblxuKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0WSAtIFRoZSBvZmZzZXQgaW4gdGhlIHkgZGlyZWN0aW9uXG4qL1xudmFyIFNlbnNvciA9IGZ1bmN0aW9uIFNlbnNvcih4LCB5LCB3aWR0aCwgaGVpZ2h0LCBvZmZzZXRYLCBvZmZzZXRZKSB7XG5cdHRoaXMueCA9IHg7XG5cdHRoaXMueSA9IHk7XG5cdHRoaXMud2lkdGggPSB3aWR0aDtcblx0dGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG5cdHRoaXMub2Zmc2V0WCA9IG9mZnNldFg7XG5cdHRoaXMub2Zmc2V0WSA9IG9mZnNldFk7XG5cdHRoaXMuZGVidWcgPSBmYWxzZTtcbn07XG5cbihmdW5jdGlvbiBQcm90b3R5cGUoKSB7XG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gUmVuZGVycyB0aGlzIGVudGl0eSB0byB0aGUgY2FudmFzXG5cdCAqIEBwYXJhbSB7Y29udGV4dH0gY3R4IC0gVGhlIGNhbnZhcydzIGNvbnRleHRcblx0ICovXG5cdHRoaXMucmVuZGVyID0gZnVuY3Rpb24gcmVuZGVyKGN0eCkge1xuXHRcdGlmICh0aGlzLmRlYnVnKSB7XG5cdFx0XHRjdHguYmVnaW5QYXRoKCk7XG5cdFx0XHRjdHguc3Ryb2tlU3R5bGUgPSAncmVkJztcblx0XHRcdGN0eC5yZWN0KHRoaXMueCwgdGhpcy55LCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XG5cdFx0XHRjdHguc3Ryb2tlKCk7XG5cdFx0fVxuXHR9O1xuXG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gVXBkYXRlcyB0aGUgc2Vuc29yJ3MgcG9zaXRpb25cblx0ICogQHBhcmFtIHtpbnR9IHggLSBUaGUgeCBsb2NhdGlvblxuXHQgKiBAcGFyYW0ge2ludH0geSAtIFRoZSB5IGxvY2F0aW9uXG5cdCAqL1xuXHR0aGlzLnBvc2l0aW9uID0gZnVuY3Rpb24gcG9zaXRpb24oeCwgeSkge1xuXHRcdHRoaXMueCA9IHggKyB0aGlzLm9mZnNldFg7XG5cdFx0dGhpcy55ID0geSArIHRoaXMub2Zmc2V0WTtcblx0fTtcbn0pLmNhbGwoU2Vuc29yLnByb3RvdHlwZSk7XG4iLCIndXNlIHN0cmljdCc7XG4vKipcbiogQGRlc2NyaXB0aW9uIEEgY29tcG9uZW50IHRoYXQgcmVuZGVycyB0aGUgb3duZXJzIHNwcml0ZSBhY2NvcmRpbmcgdG8gcG9zaXRpb24sIGFscGhhIGFuZCBkaXJlY3Rpb25cbiogQGNvbnN0cnVjdG9yXG4qL1xudmFyIFJlbmRlciA9IGZ1bmN0aW9uIFJlbmRlcihvd25lcikge1xuXHR0aGlzLm93bmVyID0gb3duZXI7XG59O1xuXG4oZnVuY3Rpb24gUHJvdG90eXBlKCkge1xuXHR2YXIgcCA9IHt4OiAwLCB5OiAwfTtcblx0LyoqXG5cdCAgKiBAZGVzY3JpcHRpb24gUmVuZGVycyB0aGUgb3duZXIncyBzcHJpdGVcblx0ICAqIEBwYXJhbSB7Y29udGV4dH0gY3R4IC0gVGhlIGNhbnZhcydzIGNvbnRleHRcblx0ICAqL1xuXHR0aGlzLnJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlcihjdHgpIHtcblx0XHR2YXIgZmxpcHBlZCA9IHRoaXMub3duZXIuZmxpcHBlZCA/IC0xIDogMTtcblx0XHR2YXIgcG9zID0gdGhpcy5nZXRQb3NpdGlvbigpO1xuXHRcdGN0eC5zYXZlKCk7XG5cdFx0Y3R4LnNjYWxlKGZsaXBwZWQsIDEpO1xuXHRcdGN0eC5nbG9iYWxBbHBoYSA9IHRoaXMub3duZXIuYWxwaGEgfHwgMTtcblx0XHRjdHguZHJhd0ltYWdlKFJlc291cmNlcy5nZXQodGhpcy5vd25lci5zcHJpdGUpLCBwb3MueCwgcG9zLnksIDEwMSwgMTcxKTtcblx0XHRjdHgucmVzdG9yZSgpO1xuXHR9O1xuXG5cdC8qKlxuXHQgICogQGRlc2NyaXB0aW9uIFJldHVybnMgdGhlIGZvcm1hdHRlZCBwb3NpdGlvblxuXHQgICovXG5cdHRoaXMuZ2V0UG9zaXRpb24gPSBmdW5jdGlvbiBnZXRQb3NpdGlvbigpIHtcblx0XHR2YXIgZmxpcHBlZCA9IHRoaXMub3duZXIuZmxpcHBlZCA/IC0xIDogMTtcblx0XHRwLnggPSAodGhpcy5vd25lci54ICsgdGhpcy5vd25lci5vZmZzZXRYKSAqIGZsaXBwZWQ7XG5cdFx0cC54ICs9IChmbGlwcGVkID09PSAxID8gMCA6IC0xMDEpO1xuXHRcdHAueSA9IHRoaXMub3duZXIueSArIHRoaXMub3duZXIub2Zmc2V0WTtcblx0XHRyZXR1cm4gcDtcblx0fTtcbn0pLmNhbGwoUmVuZGVyLnByb3RvdHlwZSk7XG4iLCIndXNlIHN0cmljdCc7XG4vKipcbiogQGRlc2NyaXB0aW9uIFRoZSBpbmdhbWUgaW5mb3JtYXRpb24gZGlzcGxheVxuKiBAY29uc3RydWN0b3JcbiovXG52YXIgVUkgPSBmdW5jdGlvbiBVSSgpIHtcblx0dGhpcy5rZXlzID0gMDtcblx0dGhpcy5sZXZlbFRpbWUgPSAwO1xuXHR0aGlzLnRpbWUgPSAwO1xufTtcblxuKGZ1bmN0aW9uIFByb3RvdHlwZSgpIHtcblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBSZXNldHMgdGhlIGxldmVsIGluZm9ybWF0aW9uIGFuZCBzdGFydHMgdGhlIGdhbWUgdGltZXJcblx0ICovXG5cdHRoaXMuc3RhcnQgPSBmdW5jdGlvbiBzdGFydCgpIHtcblx0XHR0aGlzLmtleXMgPSBNb2RlbC5nZXQoJ2xldmVsJyk7XG5cdFx0dGhpcy5sZXZlbFRpbWUgPSBNb2RlbC5nZXQoJ2xldmVsX3RvdGFsX3RpbWUnKTtcblxuXHRcdHRoaXMubGV2ZWxUaW1lciA9IG5ldyBUaW1lcigxLCB0aGlzLmxldmVsVGltZSk7XG5cdFx0dGhpcy5sZXZlbFRpbWVyLm9uKCdDT01QTEVURScsIHRoaXMub25UaW1lckNvbXBsZXRlKTtcblx0XHR0aGlzLmxldmVsVGltZXIuc3RhcnQoKTtcblx0fTtcblxuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIFRoZSBsZXZlbCB0aW1lciBoYXMgY29tcGxldGVkXG5cdCAqL1xuXHR0aGlzLm9uVGltZXJDb21wbGV0ZSA9IGZ1bmN0aW9uIG9uVGltZXJDb21wbGV0ZSgpIHtcblx0XHRpZiAoIU1vZGVsLmdldCgnbGV2ZWxfY29tcGxldGUnKSkge1xuXHRcdFx0U2NlbmUuZW5kR2FtZSgpO1xuXHRcdH1cblx0fTtcblxuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIEZvcm1hdGVkIHN0cmluZyBvZiB0aW1lIGxlZnQgKGV4cGVjdHMgPjAgJiYgPDYwIHNlY29uZHMpXG5cdCAqIEByZXR1cm5zIHtzdHJpbmd9IFNlY29uZHMgbGVmdCBvbiB0aW1lXG5cdCAqL1xuXHR0aGlzLmZvcm1hdHRlZFRpbWUgPSBmdW5jdGlvbiBmb3JtYXR0ZWRUaW1lKCkge1xuXHRcdHZhciB0aW1lID0gTWF0aC5yb3VuZCh0aGlzLmxldmVsVGltZXIudGltZSk7XG5cdFx0cmV0dXJuICcwMDonICsgKHRpbWUgPiA5ID8gdGltZSA6ICcwJyArIHRpbWUpO1xuXHR9O1xuXG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gUmVuZGVycyB0ZXh0IHRvIHRoZSBzY3JlZW5cblx0ICogQHBhcmFtIHtjb250ZXh0fSBjdHggLSBUaGUgY2FudmFzJ3MgY29udGV4dFxuXHQgKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nIC0gVGhlIHN0cmluZyB0byBkaXNwbGF5XG5cdCAqIEBwYXJhbSB7bnVtYmVyfSB4IC0gVGhlIHggbG9jYXRpb25cblx0ICogQHBhcmFtIHtudW1iZXJ9IHkgLSBUaGUgeSBsb2NhdGlvblxuXHQgKiBAcGFyYW0ge3N0cmluZ30gYWxpZ24gLSBUaGUgY2FudmFzJ3MgY29udGV4dFxuXHQgKi9cblx0dGhpcy50ZXh0ID0gZnVuY3Rpb24gdGV4dChjdHgsIHN0cmluZywgeCwgeSwgYWxpZ24pIHtcblx0XHRjdHguc2F2ZSgpO1xuXHRcdGN0eC5mb250ID0gJzMwcHggQ29taWMgU2FucyBNUyc7XG5cdFx0aWYgKGFsaWduID09PSAnbGVmdCcgfHwgYWxpZ24gPT09ICdyaWdodCcgfHwgYWxpZ24gPT09ICdjZW50ZXInKSB7XG5cdFx0XHRjdHgudGV4dEFsaWduID0gYWxpZ247XG5cdFx0fVxuXHRcdGN0eC5maWxsVGV4dChzdHJpbmcsIHgsIHkpO1xuXHRcdGN0eC5yZXN0b3JlKCk7XG5cdH07XG5cblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBVcGRhdGVzIHRoZSB0aW1lciBhbmQga2V5IGluZm9ybWF0aW9uXG5cdCAqIEBwYXJhbSB7aW50fSBkdCAtIFRpbWUgc2luY2UgbGFzdCB1cGRhdGVcblx0ICovXG5cdHRoaXMudXBkYXRlID0gZnVuY3Rpb24gdXBkYXRlKGR0KSB7XG5cdFx0aWYgKCFNb2RlbC5nZXQoJ2xldmVsX2NvbXBsZXRlJykpIHtcblx0XHRcdHRoaXMua2V5cyA9IE1vZGVsLmdldCgnbGV2ZWwnKTtcblx0XHRcdHRoaXMubGV2ZWxUaW1lci51cGRhdGUoZHQpO1xuXHRcdH1cblx0fTtcblxuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIFJlbmRlcnMgdGhpcyBlbnRpdHkgdG8gdGhlIGNhbnZhc1xuXHQgKiBAcGFyYW0ge2NvbnRleHR9IGN0eCAtIFRoZSBjYW52YXMncyBjb250ZXh0XG5cdCAqL1xuXHR0aGlzLnJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlcihjdHgpIHtcblx0XHR0aGlzLnRleHQoY3R4LCAnS2V5czogeCcgKyB0aGlzLmtleXMsIDAsIDMwKTtcblx0XHR0aGlzLnRleHQoY3R4LCAnVGltZTogJyArIHRoaXMuZm9ybWF0dGVkVGltZSgpLCBFbmdpbmUud2lkdGgsIDMwLCAncmlnaHQnKTtcblx0fTtcbn0pLmNhbGwoVUkucHJvdG90eXBlKTtcbiIsIid1c2Ugc3RyaWN0Jztcbi8qKlxuKiBAZGVzY3JpcHRpb24gS2V5IGVudGl0eVxuKiBAY29uc3RydWN0b3JcbiogQHBhcmFtIHtpbnR9IHJvdyAtIFRoZSBpbml0aWFsIHJvd1xuKiBAcGFyYW0ge2ludH0gY29sIC0gVGhlIGluaXRpYWwgY29sdW1uXG4qL1xudmFyIEtleSA9IGZ1bmN0aW9uIEtleShyb3csIGNvbCkge1xuXHR0aGlzLmVudGl0eSA9IG5ldyBFbnRpdHkodGhpcyxcblx0XHRHcmlkLmdldFhGcm9tQ29sdW1uKGNvbCksXG5cdFx0R3JpZC5nZXRZRnJvbVJvdyhyb3cpLFxuXHRcdCdpbWFnZXMvS2V5LnBuZycsXG5cdFx0MCxcblx0XHQtKDE3MSAtIDEzOCkgLSBHcmlkLm9mZnNldFkpO1xuXHR0aGlzLnNlbnNvciA9IG5ldyBTZW5zb3IoMCwgMCwgNTAsIDMwLCAyNSwgMjUpO1xuXHR0aGlzLnJlbmRlcmVyID0gbmV3IFJlbmRlcih0aGlzKTtcbn07XG5cbihmdW5jdGlvbiBQcm90b3R5cGUoKSB7XG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gQ2hlY2tzIGlmIHRoaXMgZW50aXR5IGlzIGNvbGxpZGluZyB3aXRoIHRoZSBwbGF5ZXJcblx0ICogQHBhcmFtIHtpbnR9IGR0IC0gVGltZSBzaW5jZSBsYXN0IHVwZGF0ZVxuXHQgKi9cblx0dGhpcy51cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUoZHQpIHtcblx0XHR0aGlzLnNlbnNvci5wb3NpdGlvbih0aGlzLngsIHRoaXMueSk7XG5cdFx0aWYgKHBsYXllciAmJiBwbGF5ZXIuaXNBbGl2ZSAmJiB0aGlzLmlzQWxpdmUpIHtcblx0XHRcdGlmIChDb2xsaXNpb24uaXNDb2xsaWRpbmcodGhpcy5zZW5zb3IsIHBsYXllci5zZW5zb3IpKSB7XG5cdFx0XHRcdHRoaXMuaXNBbGl2ZSA9IGZhbHNlO1xuXHRcdFx0XHRwbGF5ZXIuaGl0KCdrZXknKTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG5cblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBSZW5kZXJzIHRoaXMgZW50aXR5IHRvIHRoZSBjYW52YXNcblx0ICogQHBhcmFtIHtjb250ZXh0fSBjdHggLSBUaGUgY2FudmFzJ3MgY29udGV4dFxuXHQgKi9cblx0dGhpcy5yZW5kZXIgPSBmdW5jdGlvbiByZW5kZXIoY3R4KSB7XG5cdFx0dGhpcy5yZW5kZXJlci5yZW5kZXIoY3R4KTtcblx0XHR0aGlzLnNlbnNvci5yZW5kZXIoY3R4KTtcblx0fTtcbn0pLmNhbGwoS2V5LnByb3RvdHlwZSk7XG4iLCIndXNlIHN0cmljdCc7XG4vKipcbiogQGRlc2NyaXB0aW9uIFdhdGVyIGVudGl0eVxuKiBAY29uc3RydWN0b3JcbiogQHBhcmFtIHtpbnR9IHJvdyAtIFRoZSBpbml0aWFsIHJvd1xuKiBAcGFyYW0ge2ludH0gY29sIC0gVGhlIGluaXRpYWwgY29sdW1uXG4qL1xudmFyIFdhdGVyID0gZnVuY3Rpb24gV2F0ZXIocm93LCBjb2wpIHtcblx0dGhpcy5lbnRpdHkgPSBuZXcgRW50aXR5KHRoaXMsXG5cdFx0R3JpZC5nZXRYRnJvbUNvbHVtbihjb2wpLFxuXHRcdEdyaWQuZ2V0WUZyb21Sb3cocm93KSxcblx0XHQnaW1hZ2VzL0tleS5wbmcnLFxuXHRcdDAsXG5cdFx0LSgxNzEgLSAxMzgpIC0gR3JpZC5vZmZzZXRZKTtcblx0dGhpcy5zZW5zb3IgPSBuZXcgU2Vuc29yKDAsIDAsIDUwLCAzMCwgMjUsIDI1KTtcbn07XG5cbihmdW5jdGlvbiBQcm90b3R5cGUoKSB7XG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gQ2hlY2tzIGlmIHRoaXMgZW50aXR5IGlzIGNvbGxpZGluZyB3aXRoIHRoZSBwbGF5ZXJcblx0ICogQHBhcmFtIHtpbnR9IGR0IC0gVGltZSBzaW5jZSBsYXN0IHVwZGF0ZVxuXHQgKi9cblx0dGhpcy51cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUoZHQpIHtcblx0XHR0aGlzLnNlbnNvci5wb3NpdGlvbih0aGlzLngsIHRoaXMueSk7XG5cblx0XHRpZiAocGxheWVyICYmIHBsYXllci5pc0FsaXZlKSB7XG5cdFx0XHRpZiAoQ29sbGlzaW9uLmlzQ29sbGlkaW5nKHRoaXMuc2Vuc29yLCBwbGF5ZXIuc2Vuc29yKSkge1xuXHRcdFx0XHRwbGF5ZXIuaGl0KCd3YXRlcicpO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcblxuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIFJlbmRlcnMgdGhpcyBlbnRpdHkgdG8gdGhlIGNhbnZhc1xuXHQgKiBAcGFyYW0ge2NvbnRleHR9IGN0eCAtIFRoZSBjYW52YXMncyBjb250ZXh0XG5cdCAqL1xuXHR0aGlzLnJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlcihjdHgpIHtcblx0XHR0aGlzLnNlbnNvci5yZW5kZXIoY3R4KTtcblx0fTtcbn0pLmNhbGwoV2F0ZXIucHJvdG90eXBlKTtcbiIsIid1c2Ugc3RyaWN0Jztcbi8qKlxuICogQGRlc2NyaXB0aW9uIEVuZW15IGVudGl0eVxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge2ludH0gcm93IC0gVGhlIGluaXRpYWwgcm93XG4gKiBAcGFyYW0ge2ludH0gY29sIC0gVGhlIGluaXRpYWwgY29sdW1uXG4gKiBAcGFyYW0ge251bWJlcn0gc3BlZWQgLSBUaGUgaW5pdGlhbCBzcGVlZFxuICovXG52YXIgRW5lbXkgPSBmdW5jdGlvbiBFbmVteShyb3csIGNvbCwgc3BlZWQpIHtcblx0dGhpcy5lbnRpdHkgPSBuZXcgRW50aXR5KHRoaXMsXG5cdFx0R3JpZC5nZXRYRnJvbUNvbHVtbihjb2wpLFxuXHRcdEdyaWQuZ2V0WUZyb21Sb3cocm93KSxcblx0XHQnaW1hZ2VzL2VuZW15LWJ1Zy5wbmcnLFxuXHRcdDAsIC0oMTcxIC0gMTM4KSAtIEdyaWQub2Zmc2V0WSk7XG5cdHRoaXMucm93ID0gcm93O1xuXHR0aGlzLnNwZWVkID0gc3BlZWQ7XG5cdHRoaXMuZmxpcHBlZCA9IHNwZWVkIDwgMDtcblx0dGhpcy5zZW5zb3IgPSBuZXcgU2Vuc29yKDAsIDAsIDUwLCA1MCwgMjUsIDEyKTtcblx0dGhpcy5yZW5kZXJlciA9IG5ldyBSZW5kZXIodGhpcyk7XG59O1xuXG4oZnVuY3Rpb24gUHJvdG90eXBlKCkge1xuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIENoZWNrcyBpZiB0aGlzIGVudGl0eSBpcyBjb2xsaWRpbmcgd2l0aCB0aGUgcGxheWVyIGFuZCBrZWVwcyB0YXJnZXQgb24gc2NyZWVuIGJ5IHdyYXBwaW5nIHggbG9jYXRpb25cblx0ICogQHBhcmFtIHtpbnR9IGR0IC0gVGltZSBzaW5jZSBsYXN0IHVwZGF0ZVxuXHQgKi9cblx0dGhpcy51cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUoZHQpIHtcblx0XHR0aGlzLnggKz0gZHQgKiB0aGlzLnNwZWVkO1xuXG5cdFx0Ly8gIFdyYXBcblx0XHRpZiAodGhpcy54ID4gKEdyaWQuY29sdW1ucyAqIEdyaWQuY2VsbFdpZHRoKSArIEdyaWQuY2VsbFdpZHRoKSB7XG5cdFx0XHR0aGlzLnggPSBHcmlkLmdldFhGcm9tQ29sdW1uKDApIC0gR3JpZC5jZWxsV2lkdGg7XG5cdFx0fSBlbHNlIGlmICh0aGlzLnggPCAtR3JpZC5jZWxsV2lkdGgpIHtcblx0XHRcdHRoaXMueCA9IChHcmlkLmNvbHVtbnMgKiBHcmlkLmNlbGxXaWR0aCkgKyBHcmlkLmNlbGxXaWR0aDtcblx0XHR9XG5cblx0XHR0aGlzLnNlbnNvci5wb3NpdGlvbih0aGlzLngsIHRoaXMueSk7XG5cdFx0aWYgKHBsYXllciAmJiBwbGF5ZXIuaXNBbGl2ZSkge1xuXHRcdFx0aWYgKENvbGxpc2lvbi5pc0NvbGxpZGluZyh0aGlzLnNlbnNvciwgcGxheWVyLnNlbnNvcikpIHtcblx0XHRcdFx0cGxheWVyLmhpdCgnZW5lbXknKTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG5cblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBSZW5kZXJzIHRoaXMgZW50aXR5IHRvIHRoZSBjYW52YXNcblx0ICogQHBhcmFtIHtjb250ZXh0fSBjdHggLSBUaGUgY2FudmFzJ3MgY29udGV4dFxuXHQgKi9cblx0dGhpcy5yZW5kZXIgPSBmdW5jdGlvbiByZW5kZXIoY3R4KSB7XG5cdFx0dGhpcy5yZW5kZXJlci5yZW5kZXIoY3R4KTtcblx0XHR0aGlzLnNlbnNvci5yZW5kZXIoY3R4KTtcblx0fTtcbn0pLmNhbGwoRW5lbXkucHJvdG90eXBlKTtcbiIsIid1c2Ugc3RyaWN0Jztcbi8qKlxuKiBAZGVzY3JpcHRpb24gUGxheWVyIGVudGl0eVxuKiBAY29uc3RydWN0b3JcbiovXG52YXIgUGxheWVyID0gZnVuY3Rpb24gUGxheWVyKCkge1xuXHR0aGlzLmVudGl0eSA9IG5ldyBFbnRpdHkodGhpcyxcblx0XHQwLFxuXHRcdDAsXG5cdFx0J2ltYWdlcy9jaGFyLWJveS5wbmcnLFxuXHRcdDAsXG5cdFx0LSgxNzEgLSAxMzgpIC0gR3JpZC5vZmZzZXRZKTtcblx0dGhpcy5pc0FsaXZlID0gZmFsc2U7XG5cdHRoaXMuYWxwaGEgPSAwO1xuXHR0aGlzLnNlbnNvciA9IG5ldyBTZW5zb3IoMCwgMCwgNTAsIDMwLCAyNSwgMjUpO1xuXHR0aGlzLnJlbmRlcmVyID0gbmV3IFJlbmRlcih0aGlzKTtcblx0dGhpcy5ibGlua1RpbWVyID0gbmV3IFRpbWVyKDUsIDAuMik7XG5cblx0dmFyIHJlZiA9IHRoaXM7XG5cblx0dmFyIG9uQmxpbmtUaW1lckNvbXBsZXRlID0gZnVuY3Rpb24gb25CbGlua1RpbWVyQ29tcGxldGUoKSB7XG5cdFx0cmVmLmFscGhhID0gMTtcblx0XHRyZWYuaXNBbGl2ZSA9IHRydWU7XG5cdH07XG5cblx0dmFyIG9uQmxpbmtUaW1lclVwZGF0ZSA9IGZ1bmN0aW9uIG9uQmxpbmtUaW1lclVwZGF0ZSgpIHtcblx0XHRyZWYuYWxwaGEgPSAocmVmLmFscGhhID09PSAwLjQgPyAxIDogMC40KTtcblx0fTtcblxuXHR2YXIgb25LZXlVcCA9IGZ1bmN0aW9uIG9uS2V5VXAoZSkge1xuXHRcdHJlZi5oYW5kbGVJbnB1dChlKTtcblx0fTtcblxuXHR0aGlzLmJsaW5rVGltZXIub24oJ0NPTVBMRVRFJywgb25CbGlua1RpbWVyQ29tcGxldGUpO1xuXHR0aGlzLmJsaW5rVGltZXIub24oJ1VQREFURScsIG9uQmxpbmtUaW1lclVwZGF0ZSk7XG5cdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgb25LZXlVcCk7XG5cblx0dGhpcy5yZXNwYXduKCk7XG59O1xuXG4oZnVuY3Rpb24gUHJvdG90eXBlKCkge1xuXHR2YXIgaW5wdXRNYXAgPSB7XG5cdFx0Mzc6ICdsZWZ0Jyxcblx0XHQzODogJ3VwJyxcblx0XHQzOTogJ3JpZ2h0Jyxcblx0XHQ0MDogJ2Rvd24nXG5cdH07XG5cblx0dmFyIGlucHV0UmVzcG9uc2VNYXAgPSB7XG5cdFx0bGVmdDoge2F4aXM6ICd4JywgZGlyOiAtMX0sXG5cdFx0dXA6IHtheGlzOiAneScsIGRpcjogLTF9LFxuXHRcdHJpZ2h0OiB7YXhpczogJ3gnLCBkaXI6IDF9LFxuXHRcdGRvd246IHtheGlzOiAneScsIGRpcjogMX1cblx0fTtcblxuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIFJlc2V0cyB0aGUgcGxheWVyIHRvIHRoZSBpbml0aWFsIHBvc2l0aW9uXG5cdCAqL1xuXHR0aGlzLnJlc3Bhd24gPSBmdW5jdGlvbiByZXNwYXduKCkge1xuXHRcdHRoaXMuc2Vuc29yLnggPSB0aGlzLnggPSBHcmlkLmdldFhGcm9tQ29sdW1uKDIpO1xuXHRcdHRoaXMuc2Vuc29yLnkgPSB0aGlzLnkgPSBHcmlkLmdldFlGcm9tUm93KDUpO1xuXHRcdHRoaXMuaXNBbGl2ZSA9IGZhbHNlO1xuXHRcdHRoaXMuYWxwaGEgPSAwLjQ7XG5cdFx0dGhpcy5ibGlua1RpbWVyLnN0YXJ0KCk7XG5cdH07XG5cblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBBIGVudGl0eSBoYXMgaGl0IHRoZSBwbGF5ZXJcblx0ICogQHBhcmFtIHtzdHJpbmd9IGludm9rZXIgLSBUeXBlIG9mIG9iamVjdCB0aGF0IGhpdCB0aGUgcGxheWVyXG5cdCAqL1xuXHR0aGlzLmhpdCA9IGZ1bmN0aW9uIGhpdChpbnZva2VyKSB7XG5cdFx0aWYgKGludm9rZXIgPT09ICd3YXRlcicgfHwgaW52b2tlciA9PT0gJ2VuZW15Jykge1xuXHRcdFx0dGhpcy5yZXNwYXduKCk7XG5cdFx0fWVsc2UgaWYgKGludm9rZXIgPT09ICdrZXknKSB7XG5cdFx0XHRTY2VuZS5sZXZlbENvbXBsZXRlKCk7XG5cdFx0fVxuXHR9O1xuXG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gR2V0cyB0aGUgcG9zaXRpb24gb24gdGhlIGdyaWQgYmFzZWQgb24gcGxheWVyJ3MgaW5wdXRcblx0ICogQHBhcmFtIHtzdHJpbmd9IGF4aXMgLSBUaGUgeCBvciB5IGF4aXNcblx0ICogQHBhcmFtIHtpbnB1dH0gZGlyIC0gVGhlIHBvc2l0aXZlIG9yIG5lZ2F0aXZlIGRpcmVjdGlvblxuXHQgKiBAcmV0dXJucyB7bnVtYmVyfSBUaGUgZmluYWwgcG9zaXRpb25cblx0ICovXG5cdHRoaXMuZ2V0TW92ZW1lbnQgPSBmdW5jdGlvbiBnZXRNb3ZlbWVudChheGlzLCBkaXIpIHtcblx0XHR2YXIgdjtcblxuXHRcdGlmIChheGlzID09PSAneCcpIHtcblx0XHRcdHYgPSBNYXRoLmZsb29yKHRoaXMueCAvIEdyaWQuY2VsbFdpZHRoKSArIGRpcjtcblx0XHRcdHJldHVybiBHcmlkLmdldFhGcm9tQ29sdW1uKHYpO1xuXHRcdH1cblxuXHRcdHYgPSBNYXRoLmZsb29yKHRoaXMueSAvIEdyaWQuY2VsbEhlaWdodCkgKyBkaXI7XG5cdFx0cmV0dXJuIEdyaWQuZ2V0WUZyb21Sb3codik7XG5cdH07XG5cblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBDaGFuZ2VzIHRoZSBwbGF5ZXIgcG9zaXRpb24gYmFzZWQgb24gaW5wdXRcblx0ICogQHBhcmFtIHtldmVudH0gZSAtIFRoZSBldmVudCB0aGF0IG9jY3VyZWRcblx0ICovXG5cdHRoaXMuaGFuZGxlSW5wdXQgPSBmdW5jdGlvbiBoYW5kbGVJbnB1dChlKSB7XG5cdFx0dmFyIGlucHV0ID0gaW5wdXRNYXBbZS5rZXlDb2RlXTtcblx0XHRpZiAoaW5wdXQgJiYgdGhpcy5pc0FsaXZlID09PSB0cnVlICYmICFNb2RlbC5nZXQoJ2xldmVsX2NvbXBsZXRlJykpIHtcblx0XHRcdHZhciBtYXAgPSBpbnB1dFJlc3BvbnNlTWFwW2lucHV0XTtcblxuXHRcdFx0Ly8gIE1vdmVtZW50XG5cdFx0XHRpZiAobWFwLmhhc093blByb3BlcnR5KCdheGlzJykpIHtcblx0XHRcdFx0dGhpc1ttYXAuYXhpc10gPSB0aGlzLmdldE1vdmVtZW50KG1hcC5heGlzLCBtYXAuZGlyKTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG5cblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBVcGRhdGVzIHRoZSBwbGF5ZXJzIHRpbWVyIGFuZCBzZW5zb3Jcblx0ICogQHBhcmFtIHtudW1iZXJ9IGR0IC0gVGltZSBzaW5jZSBsYXN0IHVwZGF0ZVxuXHQgKi9cblx0dGhpcy51cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUoZHQpIHtcblx0XHR0aGlzLnNlbnNvci5wb3NpdGlvbih0aGlzLngsIHRoaXMueSk7XG5cdFx0aWYgKCF0aGlzLmlzQWxpdmUpIHtcblx0XHRcdHRoaXMuYmxpbmtUaW1lci51cGRhdGUoZHQpO1xuXHRcdH1cblx0fTtcblxuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIFJlbmRlcnMgdGhpcyBlbnRpdHkgdG8gdGhlIGNhbnZhc1xuXHQgKiBAcGFyYW0ge2NvbnRleHR9IGN0eCAtIFRoZSBjYW52YXMncyBjb250ZXh0XG5cdCAqL1xuXHR0aGlzLnJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlcihjdHgpIHtcblx0XHR0aGlzLnJlbmRlcmVyLnJlbmRlcihjdHgpO1xuXHRcdHRoaXMuc2Vuc29yLnJlbmRlcihjdHgpO1xuXHR9O1xufSkuY2FsbChQbGF5ZXIucHJvdG90eXBlKTtcbiIsIid1c2Ugc3RyaWN0Jztcbi8qKlxuKiBAZGVzY3JpcHRpb24gU3RhciBlbnRpdHlcbiogQGNvbnN0cnVjdG9yXG4qIEBwYXJhbSB7aW50fSByb3cgLSBUaGUgaW5pdGlhbCByb3dcbiogQHBhcmFtIHtpbnR9IGNvbCAtIFRoZSBpbml0aWFsIGNvbHVtblxuKi9cbnZhciBTdGFyID0gZnVuY3Rpb24gU3Rhcihyb3csIGNvbCkge1xuXHR0aGlzLmVudGl0eSA9IG5ldyBFbnRpdHkodGhpcyxcblx0XHRHcmlkLmdldFhGcm9tQ29sdW1uKGNvbCksXG5cdFx0R3JpZC5nZXRZRnJvbVJvdyhyb3cpLFxuXHRcdCdpbWFnZXMvU3Rhci5wbmcnLFxuXHRcdDAsXG5cdFx0LSgxNzEgLSAxMzgpIC0gR3JpZC5vZmZzZXRZKTtcblx0dGhpcy5yZW5kZXJlciA9IG5ldyBSZW5kZXIodGhpcyk7XG5cdHRoaXMuc3BlZWQgPSA1MDA7XG5cdHRoaXMuYW5nbGUgPSBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAxODApICogTWF0aC5QSSAvIDE4MDtcbn07XG5cbihmdW5jdGlvbiBQcm90b3R5cGUoKSB7XG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gTW92ZXMgdGhlIHN0YXIgaW4gdGhlIGRpcmVjdGlvbiBvZiB0aGUgYW5nbGUgYW5kIGxvd2VycyBvcGFjaXR5XG5cdCAqIEBwYXJhbSB7aW50fSBkdCAtIFRpbWUgc2luY2UgbGFzdCB1cGRhdGVcblx0ICovXG5cdHRoaXMudXBkYXRlID0gZnVuY3Rpb24gdXBkYXRlKGR0KSB7XG5cdFx0dGhpcy54ICs9IHRoaXMuc3BlZWQgKiBNYXRoLmNvcyh0aGlzLmFuZ2xlKSAqIGR0O1xuXHRcdHRoaXMueSArPSB0aGlzLnNwZWVkICogTWF0aC5zaW4odGhpcy5hbmdsZSkgKiBkdDtcblx0XHR0aGlzLmFscGhhID0gTWF0aC5tYXgoMC4wMSwgdGhpcy5hbHBoYSAtIDEgKiBkdCk7XG5cdH07XG5cblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBSZW5kZXJzIHRoaXMgZW50aXR5IHRvIHRoZSBjYW52YXNcblx0ICogQHBhcmFtIHtjb250ZXh0fSBjdHggLSBUaGUgY2FudmFzJ3MgY29udGV4dFxuXHQgKi9cblx0dGhpcy5yZW5kZXIgPSBmdW5jdGlvbiByZW5kZXIoY3R4KSB7XG5cdFx0dGhpcy5yZW5kZXJlci5yZW5kZXIoY3R4KTtcblx0fTtcbn0pLmNhbGwoU3Rhci5wcm90b3R5cGUpO1xuIiwiJ3VzZSBzdHJpY3QnO1xuLyoqXG4gKiBAZGVzY3JpcHRpb24gS2V5IGVudGl0eVxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge2ludH0gcm93IC0gVGhlIGluaXRpYWwgcm93XG4gKiBAcGFyYW0ge2ludH0gY29sIC0gVGhlIGluaXRpYWwgY29sdW1uXG4gKi9cbnZhciBFeHBsb3Npb24gPSBmdW5jdGlvbiBFeHBsb3Npb24ocm93LCBjb2wpIHtcblx0dGhpcy5zdGFycyA9IFtdO1xuXHR0aGlzLmFkZFN0YXJzKHJvdywgY29sLCAxMCk7XG59O1xuXG4oZnVuY3Rpb24gUHJvdG90eXBlKCkge1xuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIEFkZHMgdGhlIHN0YXJzXG5cdCAqIEBwYXJhbSB7aW50fSByb3cgLSBUaGUgeSBsb2NhdGlvblxuXHQgKiBAcGFyYW0ge2ludH0gY29sIC0gVGhlIHggbG9jYXRpb25cblx0ICogQHBhcmFtIHtpbnR9IHRvdGFsIC0gQW1vdW50IG9mIHN0YXJzXG5cdCAqL1xuXHR0aGlzLmFkZFN0YXJzID0gZnVuY3Rpb24gYWRkU3RhcnMocm93LCBjb2wsIHRvdGFsKSB7XG5cdFx0dmFyIGk7XG5cdFx0Zm9yIChpID0gMDsgaSA8IHRvdGFsOyBpKyspIHtcblx0XHRcdHRoaXMuc3RhcnMucHVzaChuZXcgU3Rhcihyb3csIGNvbCkpO1xuXHRcdH1cblx0fTtcblxuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIE1vdmVzIGFsbCB0aGUgc3RhcnNcblx0ICogQHBhcmFtIHtpbnR9IGR0IC0gVGltZSBzaW5jZSBsYXN0IHVwZGF0ZVxuXHQgKi9cblx0dGhpcy51cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUoZHQpIHtcblx0XHR2YXIgdG90YWwgPSB0aGlzLnN0YXJzLmxlbmd0aDtcblx0XHR2YXIgaTtcblx0XHRpZiAodG90YWwgPiAwKSB7XG5cdFx0XHRpZiAodGhpcy5zdGFyc1swXS5hbHBoYSA8PSAwLjAxKSB7XG5cdFx0XHRcdHRoaXMuc3RhcnMgPSBbXTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGZvciAoaSA9IDA7IGkgPCB0b3RhbDsgaSsrKSB7XG5cdFx0XHRcdFx0dGhpcy5zdGFyc1tpXS51cGRhdGUoZHQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIFJlbmRlcnMgdGhlIHN0YXJzIHRvIHRoZSBjYW52YXNcblx0ICogQHBhcmFtIHtjb250ZXh0fSBjdHggLSBUaGUgY2FudmFzJ3MgY29udGV4dFxuXHQgKi9cblx0dGhpcy5yZW5kZXIgPSBmdW5jdGlvbiByZW5kZXIoY3R4KSB7XG5cdFx0dmFyIHRvdGFsID0gdGhpcy5zdGFycy5sZW5ndGg7XG5cdFx0dmFyIGk7XG5cdFx0Zm9yIChpID0gMDsgaSA8IHRvdGFsOyBpKyspIHtcblx0XHRcdHRoaXMuc3RhcnNbaV0ucmVuZGVyKGN0eCk7XG5cdFx0fVxuXHR9O1xufSkuY2FsbChFeHBsb3Npb24ucHJvdG90eXBlKTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciBwbGF5ZXIgPSBuZXcgUGxheWVyKCk7XG52YXIgdWkgPSBuZXcgVUkoKTtcbnZhciBzY2VuZSA9ICcnO1xudmFyIEFwcCA9IChmdW5jdGlvbiBBcHAoKSB7XG5cdHZhciBvblBsYXlDbGlja2VkID0gZnVuY3Rpb24gb25QbGF5Q2xpY2tlZCgpIHtcblx0XHRTY2VuZS5zdGFydEdhbWUodHJ1ZSk7XG5cdH07XG5cdHZhciBvblJlcGxheUNsaWNrZWQgPSBmdW5jdGlvbiBvblJlcGxheUNsaWNrZWQoKSB7XG5cdFx0U2NlbmUuc3RhcnRHYW1lKCk7XG5cdH07XG5cdHZhciBvbk1lbnVDbGlja2VkID0gZnVuY3Rpb24gb25NZW51Q2xpY2tlZCgpIHtcblx0XHRTY2VuZS5zdGFydE1lbnUoKTtcblx0fTtcblxuXHRFbC5hZGRMaXN0ZW5lcihFbC5nZXRFbGVtZW50cygnYnRuLXBsYXknKVswXSwgJ2NsaWNrJywgb25QbGF5Q2xpY2tlZCk7XG5cdEVsLmFkZExpc3RlbmVyKEVsLmdldEVsZW1lbnRzKCdidG4tcmVwbGF5JylbMF0sICdjbGljaycsIG9uUmVwbGF5Q2xpY2tlZCk7XG5cdEVsLmFkZExpc3RlbmVyKEVsLmdldEVsZW1lbnRzKCdidG4tbWVudScpLCAnY2xpY2snLCBvbk1lbnVDbGlja2VkKTtcblxuXHQvL1x0RGVmYXVsdCBzaG93IHRoZSBzdGFydCBtZW51XG5cdFNjZW5lLnN0YXJ0TWVudSgpO1xuXHQvL1x0U2NlbmUuc3RhcnRHYW1lKCk7XG59KSgpO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
