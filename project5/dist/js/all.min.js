function ListItemModel(t){var e=this;this.label=t.label,this.pos=t.pos,this.state=t.state,this.isSelected=ko.observable(t.isSelected||!1),this.isVisible=ko.observable(t.isVisible||!0),this.content=ko.observable(""),this.elevation=ko.observable(0),this.images=ko.observableArray(t.images||[]),this.color=Util.stringColor(this.label),this.isFiltered=function(t,n){var i=e.state.toLowerCase(),r=e.label.toLowerCase();return t=t.toLowerCase(),n=n.toLowerCase(),!(-1!==r.indexOf(t)&&(i===n||-1!==n.indexOf("all")))}}function DescriptionModel(t,e){var n=this;n.items=t,n.isVisible=ko.observable(!1),n.picked=ko.observable(t()[0]),e.subscribe(function(t){for(var e,i=t.toLowerCase(),r=n.items(),a=0;a<r.length;a++)if(e=r[a],e.label.toLowerCase()===i)return n.picked(e),""===e.content()&&n.getWiki(e,encodeURIComponent(t)),void n.isVisible(!0);n.isVisible(!1)}),this.getWiki=function(t,e){Util.getJSON("https://en.wikipedia.org/w/api.php?action=query&prop=extracts&format=json&exintro=&titles="+e,function(e){var n="Sorry no more info is provided :/";if(null!==e){var i=e.query.pages;for(var r in i)if(i.hasOwnProperty(r)&&void 0!==i[r].extract&&""!==i[r].extract){n=i[r].extract;break}}t.content(n)})}}function PhotosModel(t,e){var n=this;n.items=t,n.isVisible=ko.observable(!1),n.picked=ko.observable(t()[0]),n.blank=ko.mapping.fromJS({images:[]}),n.selectedImage=ko.observable(""),n.pckry,setTimeout(function(){n.pckry=new Packery(document.querySelector(".grid"),{itemSelector:".grid-item"})},0),e.subscribe(function(t){for(var e,i=t.toLowerCase(),r=n.items(),a=0;a<r.length;a++)if(e=r[a],e.label.toLowerCase()===i)return n.picked(e),n.closeImage(),0===e.images().length?n.getFlickr(e,encodeURIComponent(t)):n.pckry.reloadItems(),void n.isVisible(!0);n.closeImage(),n.picked(n.blank),n.isVisible(!1)}),this.getFlickr=function(t,e){Util.getJSON("https://api.flickr.com/services/feeds/photos_public.gne?format=json&tags="+e,function(e){null!==e?(t.images(Util.map(e.items,function(t){return t.media.m})),n.pckry.reloadItems()):t.images([])},"jsonFlickrFeed")},n.imageLoaded=function(){n.pckry.layout()},n.images=ko.computed(function(){return n.picked().images()}),n.closeImage=function(){n.selectedImage("")},n.isPhotoViewerVisible=ko.computed(function(){return""!==n.selectedImage()})}!function(){!function(t){var e=this||(0,eval)("this"),n=e.document,i=e.navigator,r=e.jQuery,a=e.JSON;!function(t){"function"==typeof define&&define.amd?define(["exports","require"],t):t("object"==typeof exports&&"object"==typeof module?module.exports||exports:e.ko={})}(function(o,s){function u(t,e){return null===t||typeof t in m?t===e:!1}function l(e,n){var i;return function(){i||(i=g.a.setTimeout(function(){i=t,e()},n))}}function c(t,e){var n;return function(){clearTimeout(n),n=g.a.setTimeout(t,e)}}function f(t,e){e&&e!==v?"beforeChange"===e?this.Kb(t):this.Ha(t,e):this.Lb(t)}function h(t,e){null!==e&&e.k&&e.k()}function d(t,e){var n=this.Hc,i=n[x];i.R||(this.lb&&this.Ma[e]?(n.Pb(e,t,this.Ma[e]),this.Ma[e]=null,--this.lb):i.r[e]||n.Pb(e,t,i.s?{ia:t}:n.uc(t)))}function p(t,e,n,i){g.d[t]={init:function(t,r,a,o,s){var u,l;return g.m(function(){var a=g.a.c(r()),o=!n!=!a,c=!l;(c||e||o!==u)&&(c&&g.va.Aa()&&(l=g.a.ua(g.f.childNodes(t),!0)),o?(c||g.f.da(t,g.a.ua(l)),g.eb(i?i(s,a):s,t)):g.f.xa(t),u=o)},null,{i:t}),{controlsDescendantBindings:!0}}},g.h.ta[t]=!1,g.f.Z[t]=!0}var g="undefined"!=typeof o?o:{};g.b=function(t,e){for(var n=t.split("."),i=g,r=0;r<n.length-1;r++)i=i[n[r]];i[n[n.length-1]]=e},g.G=function(t,e,n){t[e]=n},g.version="3.4.0",g.b("version",g.version),g.options={deferUpdates:!1,useOnlyNativeEvents:!1},g.a=function(){function o(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}function s(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function u(t,e){return t.__proto__=e,t}function l(t,e,n,i){var r=t[e].match(v)||[];g.a.q(n.match(v),function(t){g.a.pa(r,t,i)}),t[e]=r.join(" ")}var c={__proto__:[]}instanceof Array,f="function"==typeof Symbol,h={},d={};h[i&&/Firefox\/2/i.test(i.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"],h.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" "),o(h,function(t,e){if(e.length)for(var n=0,i=e.length;i>n;n++)d[e[n]]=t});var p={propertychange:!0},m=n&&function(){for(var e=3,i=n.createElement("div"),r=i.getElementsByTagName("i");i.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->",r[0];);return e>4?e:t}(),v=/\S+/g;return{cc:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],q:function(t,e){for(var n=0,i=t.length;i>n;n++)e(t[n],n)},o:function(t,e){if("function"==typeof Array.prototype.indexOf)return Array.prototype.indexOf.call(t,e);for(var n=0,i=t.length;i>n;n++)if(t[n]===e)return n;return-1},Sb:function(t,e,n){for(var i=0,r=t.length;r>i;i++)if(e.call(n,t[i],i))return t[i];return null},La:function(t,e){var n=g.a.o(t,e);n>0?t.splice(n,1):0===n&&t.shift()},Tb:function(t){t=t||[];for(var e=[],n=0,i=t.length;i>n;n++)0>g.a.o(e,t[n])&&e.push(t[n]);return e},fb:function(t,e){t=t||[];for(var n=[],i=0,r=t.length;r>i;i++)n.push(e(t[i],i));return n},Ka:function(t,e){t=t||[];for(var n=[],i=0,r=t.length;r>i;i++)e(t[i],i)&&n.push(t[i]);return n},ra:function(t,e){if(e instanceof Array)t.push.apply(t,e);else for(var n=0,i=e.length;i>n;n++)t.push(e[n]);return t},pa:function(t,e,n){var i=g.a.o(g.a.zb(t),e);0>i?n&&t.push(e):n||t.splice(i,1)},ka:c,extend:s,Xa:u,Ya:c?u:s,D:o,Ca:function(t,e){if(!t)return t;var n,i={};for(n in t)t.hasOwnProperty(n)&&(i[n]=e(t[n],n,t));return i},ob:function(t){for(;t.firstChild;)g.removeNode(t.firstChild)},jc:function(t){t=g.a.V(t);for(var e=(t[0]&&t[0].ownerDocument||n).createElement("div"),i=0,r=t.length;r>i;i++)e.appendChild(g.$(t[i]));return e},ua:function(t,e){for(var n=0,i=t.length,r=[];i>n;n++){var a=t[n].cloneNode(!0);r.push(e?g.$(a):a)}return r},da:function(t,e){if(g.a.ob(t),e)for(var n=0,i=e.length;i>n;n++)t.appendChild(e[n])},qc:function(t,e){var n=t.nodeType?[t]:t;if(0<n.length){for(var i=n[0],r=i.parentNode,a=0,o=e.length;o>a;a++)r.insertBefore(e[a],i);for(a=0,o=n.length;o>a;a++)g.removeNode(n[a])}},za:function(t,e){if(t.length){for(e=8===e.nodeType&&e.parentNode||e;t.length&&t[0].parentNode!==e;)t.splice(0,1);for(;1<t.length&&t[t.length-1].parentNode!==e;)t.length--;if(1<t.length){var n=t[0],i=t[t.length-1];for(t.length=0;n!==i;)t.push(n),n=n.nextSibling;t.push(i)}}return t},sc:function(t,e){7>m?t.setAttribute("selected",e):t.selected=e},$a:function(e){return null===e||e===t?"":e.trim?e.trim():e.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},nd:function(t,e){return t=t||"",e.length>t.length?!1:t.substring(0,e.length)===e},Mc:function(t,e){if(t===e)return!0;if(11===t.nodeType)return!1;if(e.contains)return e.contains(3===t.nodeType?t.parentNode:t);if(e.compareDocumentPosition)return 16==(16&e.compareDocumentPosition(t));for(;t&&t!=e;)t=t.parentNode;return!!t},nb:function(t){return g.a.Mc(t,t.ownerDocument.documentElement)},Qb:function(t){return!!g.a.Sb(t,g.a.nb)},A:function(t){return t&&t.tagName&&t.tagName.toLowerCase()},Wb:function(t){return g.onError?function(){try{return t.apply(this,arguments)}catch(e){throw g.onError&&g.onError(e),e}}:t},setTimeout:function(t,e){return setTimeout(g.a.Wb(t),e)},$b:function(t){setTimeout(function(){throw g.onError&&g.onError(t),t},0)},p:function(t,e,n){var i=g.a.Wb(n);if(n=m&&p[e],g.options.useOnlyNativeEvents||n||!r)if(n||"function"!=typeof t.addEventListener){if("undefined"==typeof t.attachEvent)throw Error("Browser doesn't support addEventListener or attachEvent");var a=function(e){i.call(t,e)},o="on"+e;t.attachEvent(o,a),g.a.F.oa(t,function(){t.detachEvent(o,a)})}else t.addEventListener(e,i,!1);else r(t).bind(e,i)},Da:function(t,i){if(!t||!t.nodeType)throw Error("element must be a DOM node when calling triggerEvent");var a;if("input"===g.a.A(t)&&t.type&&"click"==i.toLowerCase()?(a=t.type,a="checkbox"==a||"radio"==a):a=!1,g.options.useOnlyNativeEvents||!r||a)if("function"==typeof n.createEvent){if("function"!=typeof t.dispatchEvent)throw Error("The supplied element doesn't support dispatchEvent");a=n.createEvent(d[i]||"HTMLEvents"),a.initEvent(i,!0,!0,e,0,0,0,0,0,!1,!1,!1,!1,0,t),t.dispatchEvent(a)}else if(a&&t.click)t.click();else{if("undefined"==typeof t.fireEvent)throw Error("Browser doesn't support triggering events");t.fireEvent("on"+i)}else r(t).trigger(i)},c:function(t){return g.H(t)?t():t},zb:function(t){return g.H(t)?t.t():t},bb:function(t,e,n){var i;e&&("object"==typeof t.classList?(i=t.classList[n?"add":"remove"],g.a.q(e.match(v),function(e){i.call(t.classList,e)})):"string"==typeof t.className.baseVal?l(t.className,"baseVal",e,n):l(t,"className",e,n))},Za:function(e,n){var i=g.a.c(n);null!==i&&i!==t||(i="");var r=g.f.firstChild(e);!r||3!=r.nodeType||g.f.nextSibling(r)?g.f.da(e,[e.ownerDocument.createTextNode(i)]):r.data=i,g.a.Rc(e)},rc:function(t,e){if(t.name=e,7>=m)try{t.mergeAttributes(n.createElement("<input name='"+t.name+"'/>"),!1)}catch(i){}},Rc:function(t){m>=9&&(t=1==t.nodeType?t:t.parentNode,t.style&&(t.style.zoom=t.style.zoom))},Nc:function(t){if(m){var e=t.style.width;t.style.width=0,t.style.width=e}},hd:function(t,e){t=g.a.c(t),e=g.a.c(e);for(var n=[],i=t;e>=i;i++)n.push(i);return n},V:function(t){for(var e=[],n=0,i=t.length;i>n;n++)e.push(t[n]);return e},Yb:function(t){return f?Symbol(t):t},rd:6===m,sd:7===m,C:m,ec:function(t,e){for(var n=g.a.V(t.getElementsByTagName("input")).concat(g.a.V(t.getElementsByTagName("textarea"))),i="string"==typeof e?function(t){return t.name===e}:function(t){return e.test(t.name)},r=[],a=n.length-1;a>=0;a--)i(n[a])&&r.push(n[a]);return r},ed:function(t){return"string"==typeof t&&(t=g.a.$a(t))?a&&a.parse?a.parse(t):new Function("return "+t)():null},Eb:function(t,e,n){if(!a||!a.stringify)throw Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return a.stringify(g.a.c(t),e,n)},fd:function(t,e,i){i=i||{};var r=i.params||{},a=i.includeFields||this.cc,s=t;if("object"==typeof t&&"form"===g.a.A(t))for(var s=t.action,u=a.length-1;u>=0;u--)for(var l=g.a.ec(t,a[u]),c=l.length-1;c>=0;c--)r[l[c].name]=l[c].value;e=g.a.c(e);var f=n.createElement("form");f.style.display="none",f.action=s,f.method="post";for(var h in e)t=n.createElement("input"),t.type="hidden",t.name=h,t.value=g.a.Eb(g.a.c(e[h])),f.appendChild(t);o(r,function(t,e){var i=n.createElement("input");i.type="hidden",i.name=t,i.value=e,f.appendChild(i)}),n.body.appendChild(f),i.submitter?i.submitter(f):f.submit(),setTimeout(function(){f.parentNode.removeChild(f)},0)}}}(),g.b("utils",g.a),g.b("utils.arrayForEach",g.a.q),g.b("utils.arrayFirst",g.a.Sb),g.b("utils.arrayFilter",g.a.Ka),g.b("utils.arrayGetDistinctValues",g.a.Tb),g.b("utils.arrayIndexOf",g.a.o),g.b("utils.arrayMap",g.a.fb),g.b("utils.arrayPushAll",g.a.ra),g.b("utils.arrayRemoveItem",g.a.La),g.b("utils.extend",g.a.extend),g.b("utils.fieldsIncludedWithJsonPost",g.a.cc),g.b("utils.getFormFields",g.a.ec),g.b("utils.peekObservable",g.a.zb),g.b("utils.postJson",g.a.fd),g.b("utils.parseJson",g.a.ed),g.b("utils.registerEventHandler",g.a.p),g.b("utils.stringifyJson",g.a.Eb),g.b("utils.range",g.a.hd),g.b("utils.toggleDomNodeCssClass",g.a.bb),g.b("utils.triggerEvent",g.a.Da),g.b("utils.unwrapObservable",g.a.c),g.b("utils.objectForEach",g.a.D),g.b("utils.addOrRemoveItem",g.a.pa),g.b("utils.setTextContent",g.a.Za),g.b("unwrap",g.a.c),Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;if(1===arguments.length)return function(){return e.apply(t,arguments)};var n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice(0);return i.push.apply(i,arguments),e.apply(t,i)}}),g.a.e=new function(){function e(e,a){var o=e[i];if(!o||"null"===o||!r[o]){if(!a)return t;o=e[i]="ko"+n++,r[o]={}}return r[o]}var n=0,i="__ko__"+(new Date).getTime(),r={};return{get:function(n,i){var r=e(n,!1);return r===t?t:r[i]},set:function(n,i,r){r===t&&e(n,!1)===t||(e(n,!0)[i]=r)},clear:function(t){var e=t[i];return e?(delete r[e],t[i]=null,!0):!1},I:function(){return n++ +i}}},g.b("utils.domData",g.a.e),g.b("utils.domData.clear",g.a.e.clear),g.a.F=new function(){function e(e,n){var r=g.a.e.get(e,i);return r===t&&n&&(r=[],g.a.e.set(e,i,r)),r}function n(t){var i=e(t,!1);if(i)for(var i=i.slice(0),r=0;r<i.length;r++)i[r](t);if(g.a.e.clear(t),g.a.F.cleanExternalData(t),o[t.nodeType])for(i=t.firstChild;t=i;)i=t.nextSibling,8===t.nodeType&&n(t)}var i=g.a.e.I(),a={1:!0,8:!0,9:!0},o={1:!0,9:!0};return{oa:function(t,n){if("function"!=typeof n)throw Error("Callback must be a function");e(t,!0).push(n)},pc:function(n,r){var a=e(n,!1);a&&(g.a.La(a,r),0==a.length&&g.a.e.set(n,i,t))},$:function(t){if(a[t.nodeType]&&(n(t),o[t.nodeType])){var e=[];g.a.ra(e,t.getElementsByTagName("*"));for(var i=0,r=e.length;r>i;i++)n(e[i])}return t},removeNode:function(t){g.$(t),t.parentNode&&t.parentNode.removeChild(t)},cleanExternalData:function(t){r&&"function"==typeof r.cleanData&&r.cleanData([t])}}},g.$=g.a.F.$,g.removeNode=g.a.F.removeNode,g.b("cleanNode",g.$),g.b("removeNode",g.removeNode),g.b("utils.domNodeDisposal",g.a.F),g.b("utils.domNodeDisposal.addDisposeCallback",g.a.F.oa),g.b("utils.domNodeDisposal.removeDisposeCallback",g.a.F.pc),function(){var i=[0,"",""],a=[1,"<table>","</table>"],o=[3,"<table><tbody><tr>","</tr></tbody></table>"],s=[1,"<select multiple='multiple'>","</select>"],u={thead:a,tbody:a,tfoot:a,tr:[2,"<table><tbody>","</tbody></table>"],td:o,th:o,option:s,optgroup:s},l=8>=g.a.C;g.a.ma=function(t,a){var o;if(r){if(r.parseHTML)o=r.parseHTML(t,a)||[];else if((o=r.clean([t],a))&&o[0]){for(var s=o[0];s.parentNode&&11!==s.parentNode.nodeType;)s=s.parentNode;s.parentNode&&s.parentNode.removeChild(s)}}else{(o=a)||(o=n);var c,s=o.parentWindow||o.defaultView||e,f=g.a.$a(t).toLowerCase(),h=o.createElement("div");for(c=(f=f.match(/^<([a-z]+)[ >]/))&&u[f[1]]||i,f=c[0],c="ignored<div>"+c[1]+t+c[2]+"</div>","function"==typeof s.innerShiv?h.appendChild(s.innerShiv(c)):(l&&o.appendChild(h),h.innerHTML=c,l&&h.parentNode.removeChild(h));f--;)h=h.lastChild;o=g.a.V(h.lastChild.childNodes)}return o},g.a.Cb=function(e,n){if(g.a.ob(e),n=g.a.c(n),null!==n&&n!==t)if("string"!=typeof n&&(n=n.toString()),r)r(e).html(n);else for(var i=g.a.ma(n,e.ownerDocument),a=0;a<i.length;a++)e.appendChild(i[a])}}(),g.b("utils.parseHtmlFragment",g.a.ma),g.b("utils.setHtml",g.a.Cb),g.M=function(){function e(t,n){if(t)if(8==t.nodeType){var i=g.M.lc(t.nodeValue);null!=i&&n.push({Lc:t,cd:i})}else if(1==t.nodeType)for(var i=0,r=t.childNodes,a=r.length;a>i;i++)e(r[i],n)}var n={};return{wb:function(t){if("function"!=typeof t)throw Error("You can only pass a function to ko.memoization.memoize()");var e=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);return n[e]=t,"<!--[ko_memo:"+e+"]-->"},xc:function(e,i){var r=n[e];if(r===t)throw Error("Couldn't find any memo with ID "+e+". Perhaps it's already been unmemoized.");try{return r.apply(null,i||[]),!0}finally{delete n[e]}},yc:function(t,n){var i=[];e(t,i);for(var r=0,a=i.length;a>r;r++){var o=i[r].Lc,s=[o];n&&g.a.ra(s,n),g.M.xc(i[r].cd,s),o.nodeValue="",o.parentNode&&o.parentNode.removeChild(o)}},lc:function(t){return(t=t.match(/^\[ko_memo\:(.*?)\]$/))?t[1]:null}}}(),g.b("memoization",g.M),g.b("memoization.memoize",g.M.wb),g.b("memoization.unmemoize",g.M.xc),g.b("memoization.parseMemoText",g.M.lc),g.b("memoization.unmemoizeDomNodeAndDescendants",g.M.yc),g.Y=function(){function t(){if(a)for(var t,e=a,n=0;a>s;)if(t=r[s++]){if(s>e){if(5e3<=++n){s=a,g.a.$b(Error("'Too much recursion' after processing "+n+" task groups."));break}e=a}try{t()}catch(i){g.a.$b(i)}}}function i(){t(),s=a=r.length=0}var r=[],a=0,o=1,s=0;return{scheduler:e.MutationObserver?function(t){var e=n.createElement("div");return new MutationObserver(t).observe(e,{attributes:!0}),function(){e.classList.toggle("foo")}}(i):n&&"onreadystatechange"in n.createElement("script")?function(t){var e=n.createElement("script");e.onreadystatechange=function(){e.onreadystatechange=null,n.documentElement.removeChild(e),e=null,t()},n.documentElement.appendChild(e)}:function(t){setTimeout(t,0)},Wa:function(t){return a||g.Y.scheduler(i),r[a++]=t,o++},cancel:function(t){t-=o-a,t>=s&&a>t&&(r[t]=null)},resetForTesting:function(){var t=a-s;return s=a=r.length=0,t},md:t}}(),g.b("tasks",g.Y),g.b("tasks.schedule",g.Y.Wa),g.b("tasks.runEarly",g.Y.md),g.ya={throttle:function(t,e){t.throttleEvaluation=e;var n=null;return g.B({read:t,write:function(i){clearTimeout(n),n=g.a.setTimeout(function(){t(i)},e)}})},rateLimit:function(t,e){var n,i,r;"number"==typeof e?n=e:(n=e.timeout,i=e.method),t.cb=!1,r="notifyWhenChangesStop"==i?c:l,t.Ta(function(t){return r(t,n)})},deferred:function(e,n){if(!0!==n)throw Error("The 'deferred' extender only accepts the value 'true', because it is not supported to turn deferral off once enabled.");e.cb||(e.cb=!0,e.Ta(function(n){var i;return function(){g.Y.cancel(i),i=g.Y.Wa(n),e.notifySubscribers(t,"dirty")}}))},notify:function(t,e){t.equalityComparer="always"==e?null:u}};var m={undefined:1,"boolean":1,number:1,string:1};g.b("extenders",g.ya),g.vc=function(t,e,n){this.ia=t,this.gb=e,this.Kc=n,this.R=!1,g.G(this,"dispose",this.k)},g.vc.prototype.k=function(){this.R=!0,this.Kc()},g.J=function(){g.a.Ya(this,b),b.rb(this)};var v="change",b={rb:function(t){t.K={},t.Nb=1},X:function(t,e,n){var i=this;n=n||v;var r=new g.vc(i,e?t.bind(e):t,function(){g.a.La(i.K[n],r),i.Ia&&i.Ia(n)});return i.sa&&i.sa(n),i.K[n]||(i.K[n]=[]),i.K[n].push(r),r},notifySubscribers:function(t,e){if(e=e||v,e===v&&this.zc(),this.Pa(e))try{g.l.Ub();for(var n,i=this.K[e].slice(0),r=0;n=i[r];++r)n.R||n.gb(t)}finally{g.l.end()}},Na:function(){return this.Nb},Uc:function(t){return this.Na()!==t},zc:function(){++this.Nb},Ta:function(t){var e,n,i,r=this,a=g.H(r);r.Ha||(r.Ha=r.notifySubscribers,r.notifySubscribers=f);var o=t(function(){r.Mb=!1,a&&i===r&&(i=r()),e=!1,r.tb(n,i)&&r.Ha(n=i)});r.Lb=function(t){r.Mb=e=!0,i=t,o()},r.Kb=function(t){e||(n=t,r.Ha(t,"beforeChange"))}},Pa:function(t){return this.K[t]&&this.K[t].length},Sc:function(t){if(t)return this.K[t]&&this.K[t].length||0;var e=0;return g.a.D(this.K,function(t,n){"dirty"!==t&&(e+=n.length)}),e},tb:function(t,e){return!this.equalityComparer||!this.equalityComparer(t,e)},extend:function(t){var e=this;return t&&g.a.D(t,function(t,n){var i=g.ya[t];"function"==typeof i&&(e=i(e,n)||e)}),e}};g.G(b,"subscribe",b.X),g.G(b,"extend",b.extend),g.G(b,"getSubscriptionsCount",b.Sc),g.a.ka&&g.a.Xa(b,Function.prototype),g.J.fn=b,g.hc=function(t){return null!=t&&"function"==typeof t.X&&"function"==typeof t.notifySubscribers},g.b("subscribable",g.J),g.b("isSubscribable",g.hc),g.va=g.l=function(){function t(t){i.push(n),n=t}function e(){n=i.pop()}var n,i=[],r=0;return{Ub:t,end:e,oc:function(t){if(n){if(!g.hc(t))throw Error("Only subscribable things can act as dependencies");n.gb.call(n.Gc,t,t.Cc||(t.Cc=++r))}},w:function(n,i,r){try{return t(),n.apply(i,r||[])}finally{e()}},Aa:function(){return n?n.m.Aa():void 0},Sa:function(){return n?n.Sa:void 0}}}(),g.b("computedContext",g.va),g.b("computedContext.getDependenciesCount",g.va.Aa),g.b("computedContext.isInitial",g.va.Sa),g.b("ignoreDependencies",g.qd=g.l.w);var y=g.a.Yb("_latestValue");g.N=function(t){function e(){return 0<arguments.length?(e.tb(e[y],arguments[0])&&(e.ga(),e[y]=arguments[0],e.fa()),this):(g.l.oc(e),e[y])}return e[y]=t,g.a.ka||g.a.extend(e,g.J.fn),g.J.fn.rb(e),g.a.Ya(e,w),g.options.deferUpdates&&g.ya.deferred(e,!0),e};var w={equalityComparer:u,t:function(){return this[y]},fa:function(){this.notifySubscribers(this[y])},ga:function(){this.notifySubscribers(this[y],"beforeChange")}};g.a.ka&&g.a.Xa(w,g.J.fn);var k=g.N.gd="__ko_proto__";w[k]=g.N,g.Oa=function(e,n){return null===e||e===t||e[k]===t?!1:e[k]===n?!0:g.Oa(e[k],n)},g.H=function(t){return g.Oa(t,g.N)},g.Ba=function(t){return!!("function"==typeof t&&t[k]===g.N||"function"==typeof t&&t[k]===g.B&&t.Vc)},g.b("observable",g.N),g.b("isObservable",g.H),g.b("isWriteableObservable",g.Ba),g.b("isWritableObservable",g.Ba),g.b("observable.fn",w),g.G(w,"peek",w.t),g.G(w,"valueHasMutated",w.fa),g.G(w,"valueWillMutate",w.ga),g.la=function(t){if(t=t||[],"object"!=typeof t||!("length"in t))throw Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");return t=g.N(t),g.a.Ya(t,g.la.fn),t.extend({trackArrayChanges:!0})},g.la.fn={remove:function(t){for(var e=this.t(),n=[],i="function"!=typeof t||g.H(t)?function(e){return e===t}:t,r=0;r<e.length;r++){var a=e[r];i(a)&&(0===n.length&&this.ga(),n.push(a),e.splice(r,1),r--)}return n.length&&this.fa(),n},removeAll:function(e){if(e===t){var n=this.t(),i=n.slice(0);return this.ga(),n.splice(0,n.length),this.fa(),i}return e?this.remove(function(t){return 0<=g.a.o(e,t)}):[]},destroy:function(t){var e=this.t(),n="function"!=typeof t||g.H(t)?function(e){return e===t}:t;this.ga();for(var i=e.length-1;i>=0;i--)n(e[i])&&(e[i]._destroy=!0);this.fa()},destroyAll:function(e){return e===t?this.destroy(function(){return!0}):e?this.destroy(function(t){return 0<=g.a.o(e,t)}):[]},indexOf:function(t){var e=this();return g.a.o(e,t)},replace:function(t,e){var n=this.indexOf(t);n>=0&&(this.ga(),this.t()[n]=e,this.fa())}},g.a.ka&&g.a.Xa(g.la.fn,g.N.fn),g.a.q("pop push reverse shift sort splice unshift".split(" "),function(t){g.la.fn[t]=function(){var e=this.t();this.ga(),this.Vb(e,t,arguments);var n=e[t].apply(e,arguments);return this.fa(),n===e?this:n}}),g.a.q(["slice"],function(t){g.la.fn[t]=function(){var e=this();return e[t].apply(e,arguments)}}),g.b("observableArray",g.la),g.ya.trackArrayChanges=function(t,e){function n(){if(!r){r=!0;var e=t.notifySubscribers;t.notifySubscribers=function(t,n){return n&&n!==v||++o,e.apply(this,arguments)};var n=[].concat(t.t()||[]);a=null,i=t.X(function(e){if(e=[].concat(e||[]),t.Pa("arrayChange")){var i;(!a||o>1)&&(a=g.a.ib(n,e,t.hb)),i=a}n=e,a=null,o=0,i&&i.length&&t.notifySubscribers(i,"arrayChange")})}}if(t.hb={},e&&"object"==typeof e&&g.a.extend(t.hb,e),t.hb.sparse=!0,!t.Vb){var i,r=!1,a=null,o=0,s=t.sa,u=t.Ia;t.sa=function(e){s&&s.call(t,e),"arrayChange"===e&&n()},t.Ia=function(e){u&&u.call(t,e),"arrayChange"!==e||t.Pa("arrayChange")||(i.k(),r=!1)},t.Vb=function(t,e,n){function i(t,e,n){return s[s.length]={status:t,value:e,index:n}}if(r&&!o){var s=[],u=t.length,l=n.length,c=0;switch(e){case"push":c=u;case"unshift":for(e=0;l>e;e++)i("added",n[e],c+e);break;case"pop":c=u-1;case"shift":u&&i("deleted",t[c],c);break;case"splice":e=Math.min(Math.max(0,0>n[0]?u+n[0]:n[0]),u);for(var u=1===l?u:Math.min(e+(n[1]||0),u),l=e+l-2,c=Math.max(u,l),f=[],h=[],d=2;c>e;++e,++d)u>e&&h.push(i("deleted",t[e],e)),l>e&&f.push(i("added",n[d],e));g.a.dc(h,f);break;default:return}a=s}}}};var x=g.a.Yb("_state");g.m=g.B=function(e,n,i){function r(){if(0<arguments.length){if("function"!=typeof a)throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return a.apply(o.pb,arguments),this}return g.l.oc(r),(o.S||o.s&&r.Qa())&&r.aa(),o.T}if("object"==typeof e?i=e:(i=i||{},e&&(i.read=e)),"function"!=typeof i.read)throw Error("Pass a function that returns the value of the ko.computed");var a=i.write,o={T:t,S:!0,Ra:!1,Fb:!1,R:!1,Va:!1,s:!1,jd:i.read,pb:n||i.owner,i:i.disposeWhenNodeIsRemoved||i.i||null,wa:i.disposeWhen||i.wa,mb:null,r:{},L:0,bc:null};return r[x]=o,r.Vc="function"==typeof a,g.a.ka||g.a.extend(r,g.J.fn),g.J.fn.rb(r),g.a.Ya(r,E),i.pure?(o.Va=!0,o.s=!0,g.a.extend(r,T)):i.deferEvaluation&&g.a.extend(r,_),g.options.deferUpdates&&g.ya.deferred(r,!0),o.i&&(o.Fb=!0,o.i.nodeType||(o.i=null)),o.s||i.deferEvaluation||r.aa(),o.i&&r.ba()&&g.a.F.oa(o.i,o.mb=function(){r.k()}),r};var E={equalityComparer:u,Aa:function(){return this[x].L},Pb:function(t,e,n){if(this[x].Va&&e===this)throw Error("A 'pure' computed must not be called recursively");this[x].r[t]=n,n.Ga=this[x].L++,n.na=e.Na()},Qa:function(){var t,e,n=this[x].r;for(t in n)if(n.hasOwnProperty(t)&&(e=n[t],e.ia.Uc(e.na)))return!0},bd:function(){this.Fa&&!this[x].Ra&&this.Fa()},ba:function(){return this[x].S||0<this[x].L},ld:function(){this.Mb||this.ac()},uc:function(t){if(t.cb&&!this[x].i){var e=t.X(this.bd,this,"dirty"),n=t.X(this.ld,this);return{ia:t,k:function(){e.k(),n.k()}}}return t.X(this.ac,this)},ac:function(){var t=this,e=t.throttleEvaluation;e&&e>=0?(clearTimeout(this[x].bc),this[x].bc=g.a.setTimeout(function(){t.aa(!0)},e)):t.Fa?t.Fa():t.aa(!0)},aa:function(t){var e=this[x],n=e.wa;if(!e.Ra&&!e.R){if(e.i&&!g.a.nb(e.i)||n&&n()){if(!e.Fb)return void this.k()}else e.Fb=!1;e.Ra=!0;try{this.Qc(t)}finally{e.Ra=!1}e.L||this.k()}},Qc:function(e){var n=this[x],i=n.Va?t:!n.L,r={Hc:this,Ma:n.r,lb:n.L};g.l.Ub({Gc:r,gb:d,m:this,Sa:i}),n.r={},n.L=0,r=this.Pc(n,r),this.tb(n.T,r)&&(n.s||this.notifySubscribers(n.T,"beforeChange"),n.T=r,n.s?this.zc():e&&this.notifySubscribers(n.T)),i&&this.notifySubscribers(n.T,"awake")},Pc:function(t,e){try{var n=t.jd;return t.pb?n.call(t.pb):n()}finally{g.l.end(),e.lb&&!t.s&&g.a.D(e.Ma,h),t.S=!1}},t:function(){var t=this[x];return(t.S&&!t.L||t.s&&this.Qa())&&this.aa(),t.T},Ta:function(t){g.J.fn.Ta.call(this,t),this.Fa=function(){this.Kb(this[x].T),this[x].S=!0,this.Lb(this)}},k:function(){var t=this[x];!t.s&&t.r&&g.a.D(t.r,function(t,e){e.k&&e.k()}),t.i&&t.mb&&g.a.F.pc(t.i,t.mb),t.r=null,t.L=0,t.R=!0,t.S=!1,t.s=!1,t.i=null}},T={sa:function(t){var e=this,n=e[x];if(!n.R&&n.s&&"change"==t){if(n.s=!1,n.S||e.Qa())n.r=null,n.L=0,n.S=!0,e.aa();else{var i=[];g.a.D(n.r,function(t,e){i[e.Ga]=t}),g.a.q(i,function(t,i){var r=n.r[t],a=e.uc(r.ia);a.Ga=i,a.na=r.na,n.r[t]=a})}n.R||e.notifySubscribers(n.T,"awake")}},Ia:function(e){var n=this[x];n.R||"change"!=e||this.Pa("change")||(g.a.D(n.r,function(t,e){e.k&&(n.r[t]={ia:e.ia,Ga:e.Ga,na:e.na},e.k())}),n.s=!0,this.notifySubscribers(t,"asleep"))},Na:function(){var t=this[x];return t.s&&(t.S||this.Qa())&&this.aa(),g.J.fn.Na.call(this)}},_={sa:function(t){"change"!=t&&"beforeChange"!=t||this.t()}};g.a.ka&&g.a.Xa(E,g.J.fn);var C=g.N.gd;g.m[C]=g.N,E[C]=g.m,g.Xc=function(t){return g.Oa(t,g.m)},g.Yc=function(t){return g.Oa(t,g.m)&&t[x]&&t[x].Va},g.b("computed",g.m),g.b("dependentObservable",g.m),g.b("isComputed",g.Xc),g.b("isPureComputed",g.Yc),g.b("computed.fn",E),g.G(E,"peek",E.t),g.G(E,"dispose",E.k),g.G(E,"isActive",E.ba),g.G(E,"getDependenciesCount",E.Aa),g.nc=function(t,e){return"function"==typeof t?g.m(t,e,{pure:!0}):(t=g.a.extend({},t),t.pure=!0,g.m(t,e))},g.b("pureComputed",g.nc),function(){function e(r,a,o){if(o=o||new i,r=a(r),"object"!=typeof r||null===r||r===t||r instanceof RegExp||r instanceof Date||r instanceof String||r instanceof Number||r instanceof Boolean)return r;var s=r instanceof Array?[]:{};return o.save(r,s),n(r,function(n){var i=a(r[n]);switch(typeof i){case"boolean":case"number":case"string":case"function":s[n]=i;break;case"object":case"undefined":var u=o.get(i);s[n]=u!==t?u:e(i,a,o)}}),s}function n(t,e){if(t instanceof Array){for(var n=0;n<t.length;n++)e(n);"function"==typeof t.toJSON&&e("toJSON")}else for(n in t)e(n)}function i(){this.keys=[],this.Ib=[]}g.wc=function(t){if(0==arguments.length)throw Error("When calling ko.toJS, pass the object you want to convert.");return e(t,function(t){for(var e=0;g.H(t)&&10>e;e++)t=t();return t})},g.toJSON=function(t,e,n){return t=g.wc(t),g.a.Eb(t,e,n)},i.prototype={save:function(t,e){var n=g.a.o(this.keys,t);n>=0?this.Ib[n]=e:(this.keys.push(t),this.Ib.push(e))},get:function(e){return e=g.a.o(this.keys,e),e>=0?this.Ib[e]:t}}}(),g.b("toJS",g.wc),g.b("toJSON",g.toJSON),function(){g.j={u:function(e){switch(g.a.A(e)){case"option":return!0===e.__ko__hasDomDataOptionValue__?g.a.e.get(e,g.d.options.xb):7>=g.a.C?e.getAttributeNode("value")&&e.getAttributeNode("value").specified?e.value:e.text:e.value;case"select":return 0<=e.selectedIndex?g.j.u(e.options[e.selectedIndex]):t;default:return e.value}},ha:function(e,n,i){switch(g.a.A(e)){case"option":switch(typeof n){case"string":g.a.e.set(e,g.d.options.xb,t),"__ko__hasDomDataOptionValue__"in e&&delete e.__ko__hasDomDataOptionValue__,e.value=n;break;default:g.a.e.set(e,g.d.options.xb,n),e.__ko__hasDomDataOptionValue__=!0,e.value="number"==typeof n?n:""}break;case"select":""!==n&&null!==n||(n=t);for(var r,a=-1,o=0,s=e.options.length;s>o;++o)if(r=g.j.u(e.options[o]),r==n||""==r&&n===t){a=o;break}(i||a>=0||n===t&&1<e.size)&&(e.selectedIndex=a);break;default:null!==n&&n!==t||(n=""),e.value=n}}}}(),g.b("selectExtensions",g.j),g.b("selectExtensions.readValue",g.j.u),g.b("selectExtensions.writeValue",g.j.ha),g.h=function(){function t(t){t=g.a.$a(t),123===t.charCodeAt(0)&&(t=t.slice(1,-1));var e,n=[],o=t.match(i),s=[],u=0;if(o){o.push(",");for(var l,c=0;l=o[c];++c){var f=l.charCodeAt(0);if(44===f){if(0>=u){n.push(e&&s.length?{key:e,value:s.join("")}:{unknown:e||s.join("")}),e=u=0,s=[];continue}}else if(58===f){if(!u&&!e&&1===s.length){e=s.pop();continue}}else 47===f&&c&&1<l.length?(f=o[c-1].match(r))&&!a[f[0]]&&(t=t.substr(t.indexOf(l)+1),o=t.match(i),o.push(","),c=-1,l="/"):40===f||123===f||91===f?++u:41===f||125===f||93===f?--u:e||s.length||34!==f&&39!==f||(l=l.slice(1,-1));s.push(l)}}return n}var e=["true","false","null","undefined"],n=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,i=RegExp("\"(?:[^\"\\\\]|\\\\.)*\"|'(?:[^'\\\\]|\\\\.)*'|/(?:[^/\\\\]|\\\\.)*/w*|[^\\s:,/][^,\"'{}()/:[\\]]*[^\\s,\"'{}()/:[\\]]|[^\\s]","g"),r=/[\])"'A-Za-z0-9_$]+$/,a={"in":1,"return":1,"typeof":1},o={};return{ta:[],ea:o,yb:t,Ua:function(i,r){function a(t,i){var r;if(!c){var f=g.getBindingHandler(t);if(f&&f.preprocess&&!(i=f.preprocess(i,t,a)))return;(f=o[t])&&(r=i,0<=g.a.o(e,r)?r=!1:(f=r.match(n),r=null===f?!1:f[1]?"Object("+f[1]+")"+f[2]:r),f=r),f&&u.push("'"+t+"':function(_z){"+r+"=_z}")}l&&(i="function(){return "+i+" }"),s.push("'"+t+"':"+i)}r=r||{};var s=[],u=[],l=r.valueAccessors,c=r.bindingParams,f="string"==typeof i?t(i):i;return g.a.q(f,function(t){a(t.key||t.unknown,t.value)}),u.length&&a("_ko_property_writers","{"+u.join(",")+" }"),s.join(",")},ad:function(t,e){for(var n=0;n<t.length;n++)if(t[n].key==e)return!0;return!1},Ea:function(t,e,n,i,r){t&&g.H(t)?!g.Ba(t)||r&&t.t()===i||t(i):(t=e.get("_ko_property_writers"))&&t[n]&&t[n](i)}}}(),g.b("expressionRewriting",g.h),g.b("expressionRewriting.bindingRewriteValidators",g.h.ta),g.b("expressionRewriting.parseObjectLiteral",g.h.yb),g.b("expressionRewriting.preProcessBindings",g.h.Ua),g.b("expressionRewriting._twoWayBindings",g.h.ea),g.b("jsonExpressionRewriting",g.h),g.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",g.h.Ua),function(){function t(t){return 8==t.nodeType&&o.test(a?t.text:t.nodeValue)}function e(t){return 8==t.nodeType&&s.test(a?t.text:t.nodeValue)}function i(n,i){for(var r=n,a=1,o=[];r=r.nextSibling;){if(e(r)&&(a--,0===a))return o;o.push(r),t(r)&&a++}if(!i)throw Error("Cannot find closing comment tag to match: "+n.nodeValue);return null}function r(t,e){var n=i(t,e);return n?0<n.length?n[n.length-1].nextSibling:t.nextSibling:null}var a=n&&"<!--test-->"===n.createComment("test").text,o=a?/^\x3c!--\s*ko(?:\s+([\s\S]+))?\s*--\x3e$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,s=a?/^\x3c!--\s*\/ko\s*--\x3e$/:/^\s*\/ko\s*$/,u={ul:!0,ol:!0};g.f={Z:{},childNodes:function(e){return t(e)?i(e):e.childNodes},xa:function(e){if(t(e)){e=g.f.childNodes(e);for(var n=0,i=e.length;i>n;n++)g.removeNode(e[n])}else g.a.ob(e)},da:function(e,n){if(t(e)){g.f.xa(e);for(var i=e.nextSibling,r=0,a=n.length;a>r;r++)i.parentNode.insertBefore(n[r],i)}else g.a.da(e,n)},mc:function(e,n){t(e)?e.parentNode.insertBefore(n,e.nextSibling):e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n)},gc:function(e,n,i){i?t(e)?e.parentNode.insertBefore(n,i.nextSibling):i.nextSibling?e.insertBefore(n,i.nextSibling):e.appendChild(n):g.f.mc(e,n)},firstChild:function(n){return t(n)?!n.nextSibling||e(n.nextSibling)?null:n.nextSibling:n.firstChild;
},nextSibling:function(n){return t(n)&&(n=r(n)),n.nextSibling&&e(n.nextSibling)?null:n.nextSibling},Tc:t,pd:function(t){return(t=(a?t.text:t.nodeValue).match(o))?t[1]:null},kc:function(n){if(u[g.a.A(n)]){var i=n.firstChild;if(i)do if(1===i.nodeType){var a;a=i.firstChild;var o=null;if(a)do if(o)o.push(a);else if(t(a)){var s=r(a,!0);s?a=s:o=[a]}else e(a)&&(o=[a]);while(a=a.nextSibling);if(a=o)for(o=i.nextSibling,s=0;s<a.length;s++)o?n.insertBefore(a[s],o):n.appendChild(a[s])}while(i=i.nextSibling)}}}}(),g.b("virtualElements",g.f),g.b("virtualElements.allowedBindings",g.f.Z),g.b("virtualElements.emptyNode",g.f.xa),g.b("virtualElements.insertAfter",g.f.gc),g.b("virtualElements.prepend",g.f.mc),g.b("virtualElements.setDomNodeChildren",g.f.da),function(){g.Q=function(){this.Fc={}},g.a.extend(g.Q.prototype,{nodeHasBindings:function(t){switch(t.nodeType){case 1:return null!=t.getAttribute("data-bind")||g.g.getComponentNameForNode(t);case 8:return g.f.Tc(t);default:return!1}},getBindings:function(t,e){var n=this.getBindingsString(t,e),n=n?this.parseBindingsString(n,e,t):null;return g.g.Ob(n,t,e,!1)},getBindingAccessors:function(t,e){var n=this.getBindingsString(t,e),n=n?this.parseBindingsString(n,e,t,{valueAccessors:!0}):null;return g.g.Ob(n,t,e,!0)},getBindingsString:function(t){switch(t.nodeType){case 1:return t.getAttribute("data-bind");case 8:return g.f.pd(t);default:return null}},parseBindingsString:function(t,e,n,i){try{var r,a=this.Fc,o=t+(i&&i.valueAccessors||"");if(!(r=a[o])){var s,u="with($context){with($data||{}){return{"+g.h.Ua(t,i)+"}}}";s=new Function("$context","$element",u),r=a[o]=s}return r(e,n)}catch(l){throw l.message="Unable to parse bindings.\nBindings value: "+t+"\nMessage: "+l.message,l}}}),g.Q.instance=new g.Q}(),g.b("bindingProvider",g.Q),function(){function n(t){return function(){return t}}function i(t){return t()}function a(t){return g.a.Ca(g.l.w(t),function(e,n){return function(){return t()[n]}})}function o(t,e,i){return"function"==typeof t?a(t.bind(null,e,i)):g.a.Ca(t,n)}function s(t,e){return a(this.getBindings.bind(this,t,e))}function u(t,e,n){var i,r=g.f.firstChild(e),a=g.Q.instance,o=a.preprocessNode;if(o){for(;i=r;)r=g.f.nextSibling(i),o.call(a,i);r=g.f.firstChild(e)}for(;i=r;)r=g.f.nextSibling(i),l(t,i,n)}function l(t,e,n){var i=!0,r=1===e.nodeType;r&&g.f.kc(e),(r&&n||g.Q.instance.nodeHasBindings(e))&&(i=f(e,null,t,n).shouldBindDescendants),i&&!d[g.a.A(e)]&&u(t,e,!r)}function c(t){var e=[],n={},i=[];return g.a.D(t,function r(a){if(!n[a]){var o=g.getBindingHandler(a);o&&(o.after&&(i.push(a),g.a.q(o.after,function(e){if(t[e]){if(-1!==g.a.o(i,e))throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+i.join(", "));r(e)}}),i.length--),e.push({key:a,fc:o})),n[a]=!0}}),e}function f(e,n,r,a){var o=g.a.e.get(e,p);if(!n){if(o)throw Error("You cannot apply bindings multiple times to the same element.");g.a.e.set(e,p,!0)}!o&&a&&g.tc(e,r);var u;if(n&&"function"!=typeof n)u=n;else{var l=g.Q.instance,f=l.getBindingAccessors||s,h=g.B(function(){return(u=n?n(r,e):f.call(l,e,r))&&r.P&&r.P(),u},null,{i:e});u&&h.ba()||(h=null)}var d;if(u){var m=h?function(t){return function(){return i(h()[t])}}:function(t){return u[t]},v=function(){return g.a.Ca(h?h():u,i)};v.get=function(t){return u[t]&&i(m(t))},v.has=function(t){return t in u},a=c(u),g.a.q(a,function(n){var i=n.fc.init,a=n.fc.update,o=n.key;if(8===e.nodeType&&!g.f.Z[o])throw Error("The binding '"+o+"' cannot be used with virtual elements");try{"function"==typeof i&&g.l.w(function(){var n=i(e,m(o),v,r.$data,r);if(n&&n.controlsDescendantBindings){if(d!==t)throw Error("Multiple bindings ("+d+" and "+o+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");d=o}}),"function"==typeof a&&g.B(function(){a(e,m(o),v,r.$data,r)},null,{i:e})}catch(s){throw s.message='Unable to process binding "'+o+": "+u[o]+'"\nMessage: '+s.message,s}})}return{shouldBindDescendants:d===t}}function h(t){return t&&t instanceof g.U?t:new g.U(t)}g.d={};var d={script:!0,textarea:!0,template:!0};g.getBindingHandler=function(t){return g.d[t]},g.U=function(e,n,i,r){var a,o=this,s="function"==typeof e&&!g.H(e),u=g.B(function(){var t=s?e():e,a=g.a.c(t);return n?(n.P&&n.P(),g.a.extend(o,n),u&&(o.P=u)):(o.$parents=[],o.$root=a,o.ko=g),o.$rawData=t,o.$data=a,i&&(o[i]=a),r&&r(o,n,a),o.$data},null,{wa:function(){return a&&!g.a.Qb(a)},i:!0});u.ba()&&(o.P=u,u.equalityComparer=null,a=[],u.Ac=function(e){a.push(e),g.a.F.oa(e,function(e){g.a.La(a,e),a.length||(u.k(),o.P=u=t)})})},g.U.prototype.createChildContext=function(t,e,n){return new g.U(t,this,e,function(t,e){t.$parentContext=e,t.$parent=e.$data,t.$parents=(e.$parents||[]).slice(0),t.$parents.unshift(t.$parent),n&&n(t)})},g.U.prototype.extend=function(t){return new g.U(this.P||this.$data,this,null,function(e,n){e.$rawData=n.$rawData,g.a.extend(e,"function"==typeof t?t():t)})};var p=g.a.e.I(),m=g.a.e.I();g.tc=function(t,e){return 2!=arguments.length?g.a.e.get(t,m):(g.a.e.set(t,m,e),void(e.P&&e.P.Ac(t)))},g.Ja=function(t,e,n){return 1===t.nodeType&&g.f.kc(t),f(t,e,h(n),!0)},g.Dc=function(t,e,n){return n=h(n),g.Ja(t,o(e,n,t),n)},g.eb=function(t,e){1!==e.nodeType&&8!==e.nodeType||u(h(t),e,!0)},g.Rb=function(t,n){if(!r&&e.jQuery&&(r=e.jQuery),n&&1!==n.nodeType&&8!==n.nodeType)throw Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");n=n||e.document.body,l(h(t),n,!0)},g.kb=function(e){switch(e.nodeType){case 1:case 8:var n=g.tc(e);if(n)return n;if(e.parentNode)return g.kb(e.parentNode)}return t},g.Jc=function(e){return(e=g.kb(e))?e.$data:t},g.b("bindingHandlers",g.d),g.b("applyBindings",g.Rb),g.b("applyBindingsToDescendants",g.eb),g.b("applyBindingAccessorsToNode",g.Ja),g.b("applyBindingsToNode",g.Dc),g.b("contextFor",g.kb),g.b("dataFor",g.Jc)}(),function(t){function e(e,i){var o,s=r.hasOwnProperty(e)?r[e]:t;s?s.X(i):(s=r[e]=new g.J,s.X(i),n(e,function(t,n){var i=!(!n||!n.synchronous);a[e]={definition:t,Zc:i},delete r[e],o||i?s.notifySubscribers(t):g.Y.Wa(function(){s.notifySubscribers(t)})}),o=!0)}function n(t,e){i("getConfig",[t],function(n){n?i("loadComponent",[t,n],function(t){e(t,n)}):e(null,null)})}function i(e,n,r,a){a||(a=g.g.loaders.slice(0));var o=a.shift();if(o){var s=o[e];if(s){var u=!1;if(s.apply(o,n.concat(function(t){u?r(null):null!==t?r(t):i(e,n,r,a)}))!==t&&(u=!0,!o.suppressLoaderExceptions))throw Error("Component loaders must supply values by invoking the callback, not by returning values synchronously.")}else i(e,n,r,a)}else r(null)}var r={},a={};g.g={get:function(n,i){var r=a.hasOwnProperty(n)?a[n]:t;r?r.Zc?g.l.w(function(){i(r.definition)}):g.Y.Wa(function(){i(r.definition)}):e(n,i)},Xb:function(t){delete a[t]},Jb:i},g.g.loaders=[],g.b("components",g.g),g.b("components.get",g.g.get),g.b("components.clearCachedDefinition",g.g.Xb)}(),function(){function t(t,e,n,i){function r(){0===--s&&i(a)}var a={},s=2,u=n.template;n=n.viewModel,u?o(e,u,function(e){g.g.Jb("loadTemplate",[t,e],function(t){a.template=t,r()})}):r(),n?o(e,n,function(e){g.g.Jb("loadViewModel",[t,e],function(t){a[c]=t,r()})}):r()}function i(t,e,n){if("function"==typeof e)n(function(t){return new e(t)});else if("function"==typeof e[c])n(e[c]);else if("instance"in e){var r=e.instance;n(function(){return r})}else"viewModel"in e?i(t,e.viewModel,n):t("Unknown viewModel value: "+e)}function r(t){switch(g.a.A(t)){case"script":return g.a.ma(t.text);case"textarea":return g.a.ma(t.value);case"template":if(a(t.content))return g.a.ua(t.content.childNodes)}return g.a.ua(t.childNodes)}function a(t){return e.DocumentFragment?t instanceof DocumentFragment:t&&11===t.nodeType}function o(t,n,i){"string"==typeof n.require?s||e.require?(s||e.require)([n.require],i):t("Uses require, but no AMD loader is present"):i(n)}function u(t){return function(e){throw Error("Component '"+t+"': "+e)}}var l={};g.g.register=function(t,e){if(!e)throw Error("Invalid configuration for "+t);if(g.g.ub(t))throw Error("Component "+t+" is already registered");l[t]=e},g.g.ub=function(t){return l.hasOwnProperty(t)},g.g.od=function(t){delete l[t],g.g.Xb(t)},g.g.Zb={getConfig:function(t,e){e(l.hasOwnProperty(t)?l[t]:null)},loadComponent:function(e,n,i){var r=u(e);o(r,n,function(n){t(e,r,n,i)})},loadTemplate:function(t,i,o){if(t=u(t),"string"==typeof i)o(g.a.ma(i));else if(i instanceof Array)o(i);else if(a(i))o(g.a.V(i.childNodes));else if(i.element)if(i=i.element,e.HTMLElement?i instanceof HTMLElement:i&&i.tagName&&1===i.nodeType)o(r(i));else if("string"==typeof i){var s=n.getElementById(i);s?o(r(s)):t("Cannot find element with ID "+i)}else t("Unknown element type: "+i);else t("Unknown template value: "+i)},loadViewModel:function(t,e,n){i(u(t),e,n)}};var c="createViewModel";g.b("components.register",g.g.register),g.b("components.isRegistered",g.g.ub),g.b("components.unregister",g.g.od),g.b("components.defaultLoader",g.g.Zb),g.g.loaders.push(g.g.Zb),g.g.Bc=l}(),function(){function t(t,n){var i=t.getAttribute("params");if(i){var i=e.parseBindingsString(i,n,t,{valueAccessors:!0,bindingParams:!0}),i=g.a.Ca(i,function(e){return g.m(e,null,{i:t})}),r=g.a.Ca(i,function(e){var n=e.t();return e.ba()?g.m({read:function(){return g.a.c(e())},write:g.Ba(n)&&function(t){e()(t)},i:t}):n});return r.hasOwnProperty("$raw")||(r.$raw=i),r}return{$raw:{}}}g.g.getComponentNameForNode=function(t){var e=g.a.A(t);return g.g.ub(e)&&(-1!=e.indexOf("-")||"[object HTMLUnknownElement]"==""+t||8>=g.a.C&&t.tagName===e)?e:void 0},g.g.Ob=function(e,n,i,r){if(1===n.nodeType){var a=g.g.getComponentNameForNode(n);if(a){if(e=e||{},e.component)throw Error('Cannot use the "component" binding on a custom element matching a component');var o={name:a,params:t(n,i)};e.component=r?function(){return o}:o}}return e};var e=new g.Q;9>g.a.C&&(g.g.register=function(t){return function(e){return n.createElement(e),t.apply(this,arguments)}}(g.g.register),n.createDocumentFragment=function(t){return function(){var e,n=t(),i=g.g.Bc;for(e in i)i.hasOwnProperty(e)&&n.createElement(e);return n}}(n.createDocumentFragment))}(),function(t){function e(t,e,n){if(e=e.template,!e)throw Error("Component '"+t+"' has no template");t=g.a.ua(e),g.f.da(n,t)}function n(t,e,n,i){var r=t.createViewModel;return r?r.call(t,i,{element:e,templateNodes:n}):i}var i=0;g.d.component={init:function(r,a,o,s,u){function l(){var t=c&&c.dispose;"function"==typeof t&&t.call(c),f=c=null}var c,f,h=g.a.V(g.f.childNodes(r));return g.a.F.oa(r,l),g.m(function(){var o,s,d=g.a.c(a());if("string"==typeof d?o=d:(o=g.a.c(d.name),s=g.a.c(d.params)),!o)throw Error("No component name specified");var p=f=++i;g.g.get(o,function(i){if(f===p){if(l(),!i)throw Error("Unknown component '"+o+"'");e(o,i,r);var a=n(i,r,h,s);i=u.createChildContext(a,t,function(t){t.$component=a,t.$componentTemplateNodes=h}),c=a,g.eb(i,r)}})},null,{i:r}),{controlsDescendantBindings:!0}}},g.f.Z.component=!0}();var S={"class":"className","for":"htmlFor"};g.d.attr={update:function(e,n){var i=g.a.c(n())||{};g.a.D(i,function(n,i){i=g.a.c(i);var r=!1===i||null===i||i===t;r&&e.removeAttribute(n),8>=g.a.C&&n in S?(n=S[n],r?e.removeAttribute(n):e[n]=i):r||e.setAttribute(n,i.toString()),"name"===n&&g.a.rc(e,r?"":i.toString())})}},function(){g.d.checked={after:["value","attr"],init:function(e,n,i){function r(){var t=e.checked,r=d?o():t;if(!g.va.Sa()&&(!u||t)){var a=g.l.w(n);if(c){var s=f?a.t():a;h!==r?(t&&(g.a.pa(s,r,!0),g.a.pa(s,h,!1)),h=r):g.a.pa(s,r,t),f&&g.Ba(a)&&a(s)}else g.h.Ea(a,i,"checked",r,!0)}}function a(){var t=g.a.c(n());e.checked=c?0<=g.a.o(t,o()):s?t:o()===t}var o=g.nc(function(){return i.has("checkedValue")?g.a.c(i.get("checkedValue")):i.has("value")?g.a.c(i.get("value")):e.value}),s="checkbox"==e.type,u="radio"==e.type;if(s||u){var l=n(),c=s&&g.a.c(l)instanceof Array,f=!(c&&l.push&&l.splice),h=c?o():t,d=u||c;u&&!e.name&&g.d.uniqueName.init(e,function(){return!0}),g.m(r,null,{i:e}),g.a.p(e,"click",r),g.m(a,null,{i:e}),l=t}}},g.h.ea.checked=!0,g.d.checkedValue={update:function(t,e){t.value=g.a.c(e())}}}(),g.d.css={update:function(t,e){var n=g.a.c(e());null!==n&&"object"==typeof n?g.a.D(n,function(e,n){n=g.a.c(n),g.a.bb(t,e,n)}):(n=g.a.$a(String(n||"")),g.a.bb(t,t.__ko__cssValue,!1),t.__ko__cssValue=n,g.a.bb(t,n,!0))}},g.d.enable={update:function(t,e){var n=g.a.c(e());n&&t.disabled?t.removeAttribute("disabled"):n||t.disabled||(t.disabled=!0)}},g.d.disable={update:function(t,e){g.d.enable.update(t,function(){return!g.a.c(e())})}},g.d.event={init:function(t,e,n,i,r){var a=e()||{};g.a.D(a,function(a){"string"==typeof a&&g.a.p(t,a,function(t){var o,s=e()[a];if(s){try{var u=g.a.V(arguments);i=r.$data,u.unshift(i),o=s.apply(i,u)}finally{!0!==o&&(t.preventDefault?t.preventDefault():t.returnValue=!1)}!1===n.get(a+"Bubble")&&(t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation())}})})}},g.d.foreach={ic:function(t){return function(){var e=t(),n=g.a.zb(e);return n&&"number"!=typeof n.length?(g.a.c(e),{foreach:n.data,as:n.as,includeDestroyed:n.includeDestroyed,afterAdd:n.afterAdd,beforeRemove:n.beforeRemove,afterRender:n.afterRender,beforeMove:n.beforeMove,afterMove:n.afterMove,templateEngine:g.W.sb}):{foreach:e,templateEngine:g.W.sb}}},init:function(t,e){return g.d.template.init(t,g.d.foreach.ic(e))},update:function(t,e,n,i,r){return g.d.template.update(t,g.d.foreach.ic(e),n,i,r)}},g.h.ta.foreach=!1,g.f.Z.foreach=!0,g.d.hasfocus={init:function(t,e,n){function i(i){t.__ko_hasfocusUpdating=!0;var r=t.ownerDocument;if("activeElement"in r){var a;try{a=r.activeElement}catch(o){a=r.body}i=a===t}r=e(),g.h.Ea(r,n,"hasfocus",i,!0),t.__ko_hasfocusLastValue=i,t.__ko_hasfocusUpdating=!1}var r=i.bind(null,!0),a=i.bind(null,!1);g.a.p(t,"focus",r),g.a.p(t,"focusin",r),g.a.p(t,"blur",a),g.a.p(t,"focusout",a)},update:function(t,e){var n=!!g.a.c(e());t.__ko_hasfocusUpdating||t.__ko_hasfocusLastValue===n||(n?t.focus():t.blur(),!n&&t.__ko_hasfocusLastValue&&t.ownerDocument.body.focus(),g.l.w(g.a.Da,null,[t,n?"focusin":"focusout"]))}},g.h.ea.hasfocus=!0,g.d.hasFocus=g.d.hasfocus,g.h.ea.hasFocus=!0,g.d.html={init:function(){return{controlsDescendantBindings:!0}},update:function(t,e){g.a.Cb(t,e())}},p("if"),p("ifnot",!1,!0),p("with",!0,!1,function(t,e){return t.createChildContext(e)});var N={};g.d.options={init:function(t){if("select"!==g.a.A(t))throw Error("options binding applies only to SELECT elements");for(;0<t.length;)t.remove(0);return{controlsDescendantBindings:!0}},update:function(e,n,i){function r(){return g.a.Ka(e.options,function(t){return t.selected})}function a(t,e,n){var i=typeof e;return"function"==i?e(t):"string"==i?t[e]:n}function o(t,n){if(p&&c)g.j.ha(e,g.a.c(i.get("value")),!0);else if(d.length){var r=0<=g.a.o(d,g.j.u(n[0]));g.a.sc(n[0],r),p&&!r&&g.l.w(g.a.Da,null,[e,"change"])}}var s=e.multiple,u=0!=e.length&&s?e.scrollTop:null,l=g.a.c(n()),c=i.get("valueAllowUnset")&&i.has("value"),f=i.get("optionsIncludeDestroyed");n={};var h,d=[];c||(s?d=g.a.fb(r(),g.j.u):0<=e.selectedIndex&&d.push(g.j.u(e.options[e.selectedIndex]))),l&&("undefined"==typeof l.length&&(l=[l]),h=g.a.Ka(l,function(e){return f||e===t||null===e||!g.a.c(e._destroy)}),i.has("optionsCaption")&&(l=g.a.c(i.get("optionsCaption")),null!==l&&l!==t&&h.unshift(N)));var p=!1;n.beforeRemove=function(t){e.removeChild(t)},l=o,i.has("optionsAfterRender")&&"function"==typeof i.get("optionsAfterRender")&&(l=function(e,n){o(0,n),g.l.w(i.get("optionsAfterRender"),null,[n[0],e!==N?e:t])}),g.a.Bb(e,h,function(n,r,o){return o.length&&(d=!c&&o[0].selected?[g.j.u(o[0])]:[],p=!0),r=e.ownerDocument.createElement("option"),n===N?(g.a.Za(r,i.get("optionsCaption")),g.j.ha(r,t)):(o=a(n,i.get("optionsValue"),n),g.j.ha(r,g.a.c(o)),n=a(n,i.get("optionsText"),o),g.a.Za(r,n)),[r]},n,l),g.l.w(function(){c?g.j.ha(e,g.a.c(i.get("value")),!0):(s?d.length&&r().length<d.length:d.length&&0<=e.selectedIndex?g.j.u(e.options[e.selectedIndex])!==d[0]:d.length||0<=e.selectedIndex)&&g.a.Da(e,"change")}),g.a.Nc(e),u&&20<Math.abs(u-e.scrollTop)&&(e.scrollTop=u)}},g.d.options.xb=g.a.e.I(),g.d.selectedOptions={after:["options","foreach"],init:function(t,e,n){g.a.p(t,"change",function(){var i=e(),r=[];g.a.q(t.getElementsByTagName("option"),function(t){t.selected&&r.push(g.j.u(t))}),g.h.Ea(i,n,"selectedOptions",r)})},update:function(t,e){if("select"!=g.a.A(t))throw Error("values binding applies only to SELECT elements");var n=g.a.c(e()),i=t.scrollTop;n&&"number"==typeof n.length&&g.a.q(t.getElementsByTagName("option"),function(t){var e=0<=g.a.o(n,g.j.u(t));t.selected!=e&&g.a.sc(t,e)}),t.scrollTop=i}},g.h.ea.selectedOptions=!0,g.d.style={update:function(e,n){var i=g.a.c(n()||{});g.a.D(i,function(n,i){i=g.a.c(i),null!==i&&i!==t&&!1!==i||(i=""),e.style[n]=i})}},g.d.submit={init:function(t,e,n,i,r){if("function"!=typeof e())throw Error("The value for a submit binding must be a function");g.a.p(t,"submit",function(n){var i,a=e();try{i=a.call(r.$data,t)}finally{!0!==i&&(n.preventDefault?n.preventDefault():n.returnValue=!1)}})}},g.d.text={init:function(){return{controlsDescendantBindings:!0}},update:function(t,e){g.a.Za(t,e())}},g.f.Z.text=!0,function(){if(e&&e.navigator)var n=function(t){return t?parseFloat(t[1]):void 0},i=e.opera&&e.opera.version&&parseInt(e.opera.version()),r=e.navigator.userAgent,a=n(r.match(/^(?:(?!chrome).)*version\/([^ ]*) safari/i)),o=n(r.match(/Firefox\/([^ ]*)/));if(10>g.a.C)var s=g.a.e.I(),u=g.a.e.I(),l=function(t){var e=this.activeElement;(e=e&&g.a.e.get(e,u))&&e(t)},c=function(t,e){var n=t.ownerDocument;g.a.e.get(n,s)||(g.a.e.set(n,s,!0),g.a.p(n,"selectionchange",l)),g.a.e.set(t,u,e)};g.d.textInput={init:function(e,n,r){function s(t,n){g.a.p(e,t,n)}function u(){var i=g.a.c(n());null!==i&&i!==t||(i=""),d!==t&&i===d?g.a.setTimeout(u,4):e.value!==i&&(p=i,e.value=i)}function l(){h||(d=e.value,h=g.a.setTimeout(f,4))}function f(){clearTimeout(h),d=h=t;var i=e.value;p!==i&&(p=i,g.h.Ea(n(),r,"textInput",i))}var h,d,p=e.value,m=9==g.a.C?l:f;10>g.a.C?(s("propertychange",function(t){"value"===t.propertyName&&m(t)}),8==g.a.C&&(s("keyup",f),s("keydown",f)),8<=g.a.C&&(c(e,m),s("dragend",l))):(s("input",f),5>a&&"textarea"===g.a.A(e)?(s("keydown",l),s("paste",l),s("cut",l)):11>i?s("keydown",l):4>o&&(s("DOMAutoComplete",f),s("dragdrop",f),s("drop",f))),s("change",f),g.m(u,null,{i:e})}},g.h.ea.textInput=!0,g.d.textinput={preprocess:function(t,e,n){n("textInput",t)}}}(),g.d.uniqueName={init:function(t,e){if(e()){var n="ko_unique_"+ ++g.d.uniqueName.Ic;g.a.rc(t,n)}}},g.d.uniqueName.Ic=0,g.d.value={after:["options","foreach"],init:function(t,e,n){if("input"!=t.tagName.toLowerCase()||"checkbox"!=t.type&&"radio"!=t.type){var i=["change"],r=n.get("valueUpdate"),a=!1,o=null;r&&("string"==typeof r&&(r=[r]),g.a.ra(i,r),i=g.a.Tb(i));var s=function(){o=null,a=!1;var i=e(),r=g.j.u(t);g.h.Ea(i,n,"value",r)};!g.a.C||"input"!=t.tagName.toLowerCase()||"text"!=t.type||"off"==t.autocomplete||t.form&&"off"==t.form.autocomplete||-1!=g.a.o(i,"propertychange")||(g.a.p(t,"propertychange",function(){a=!0}),g.a.p(t,"focus",function(){a=!1}),g.a.p(t,"blur",function(){a&&s()})),g.a.q(i,function(e){var n=s;g.a.nd(e,"after")&&(n=function(){o=g.j.u(t),g.a.setTimeout(s,0)},e=e.substring(5)),g.a.p(t,e,n)});var u=function(){var i=g.a.c(e()),r=g.j.u(t);if(null!==o&&i===o)g.a.setTimeout(u,0);else if(i!==r)if("select"===g.a.A(t)){var a=n.get("valueAllowUnset"),r=function(){g.j.ha(t,i,a)};r(),a||i===g.j.u(t)?g.a.setTimeout(r,0):g.l.w(g.a.Da,null,[t,"change"])}else g.j.ha(t,i)};g.m(u,null,{i:t})}else g.Ja(t,{checkedValue:e})},update:function(){}},g.h.ea.value=!0,g.d.visible={update:function(t,e){var n=g.a.c(e()),i="none"!=t.style.display;n&&!i?t.style.display="":!n&&i&&(t.style.display="none")}},function(t){g.d[t]={init:function(e,n,i,r,a){return g.d.event.init.call(this,e,function(){var e={};return e[t]=n(),e},i,r,a)}}}("click"),g.O=function(){},g.O.prototype.renderTemplateSource=function(){throw Error("Override renderTemplateSource")},g.O.prototype.createJavaScriptEvaluatorBlock=function(){throw Error("Override createJavaScriptEvaluatorBlock")},g.O.prototype.makeTemplateSource=function(t,e){if("string"==typeof t){e=e||n;var i=e.getElementById(t);if(!i)throw Error("Cannot find template with ID "+t);return new g.v.n(i)}if(1==t.nodeType||8==t.nodeType)return new g.v.qa(t);throw Error("Unknown template type: "+t)},g.O.prototype.renderTemplate=function(t,e,n,i){return t=this.makeTemplateSource(t,i),this.renderTemplateSource(t,e,n,i)},g.O.prototype.isTemplateRewritten=function(t,e){return!1===this.allowTemplateRewriting?!0:this.makeTemplateSource(t,e).data("isRewritten")},g.O.prototype.rewriteTemplate=function(t,e,n){t=this.makeTemplateSource(t,n),e=e(t.text()),t.text(e),t.data("isRewritten",!0)},g.b("templateEngine",g.O),g.Gb=function(){function t(t,e,n,i){t=g.h.yb(t);for(var r=g.h.ta,a=0;a<t.length;a++){var o=t[a].key;if(r.hasOwnProperty(o)){var s=r[o];if("function"==typeof s){if(o=s(t[a].value))throw Error(o)}else if(!s)throw Error("This template engine does not support the '"+o+"' binding within its templates")}}return n="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+g.h.Ua(t,{valueAccessors:!0})+" } })()},'"+n.toLowerCase()+"')",i.createJavaScriptEvaluatorBlock(n)+e}var e=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'|[^>]*))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,n=/\x3c!--\s*ko\b\s*([\s\S]*?)\s*--\x3e/g;return{Oc:function(t,e,n){e.isTemplateRewritten(t,n)||e.rewriteTemplate(t,function(t){return g.Gb.dd(t,e)},n)},dd:function(i,r){return i.replace(e,function(e,n,i,a,o){return t(o,n,i,r)}).replace(n,function(e,n){return t(n,"<!-- ko -->","#comment",r)})},Ec:function(t,e){return g.M.wb(function(n,i){var r=n.nextSibling;r&&r.nodeName.toLowerCase()===e&&g.Ja(r,t,i)})}}}(),g.b("__tr_ambtns",g.Gb.Ec),function(){g.v={},g.v.n=function(t){if(this.n=t){var e=g.a.A(t);this.ab="script"===e?1:"textarea"===e?2:"template"==e&&t.content&&11===t.content.nodeType?3:4}},g.v.n.prototype.text=function(){var t=1===this.ab?"text":2===this.ab?"value":"innerHTML";if(0==arguments.length)return this.n[t];var e=arguments[0];"innerHTML"===t?g.a.Cb(this.n,e):this.n[t]=e};var e=g.a.e.I()+"_";g.v.n.prototype.data=function(t){return 1===arguments.length?g.a.e.get(this.n,e+t):void g.a.e.set(this.n,e+t,arguments[1])};var n=g.a.e.I();g.v.n.prototype.nodes=function(){var e=this.n;return 0==arguments.length?(g.a.e.get(e,n)||{}).jb||(3===this.ab?e.content:4===this.ab?e:t):void g.a.e.set(e,n,{jb:arguments[0]})},g.v.qa=function(t){this.n=t},g.v.qa.prototype=new g.v.n,g.v.qa.prototype.text=function(){if(0==arguments.length){var e=g.a.e.get(this.n,n)||{};return e.Hb===t&&e.jb&&(e.Hb=e.jb.innerHTML),e.Hb}g.a.e.set(this.n,n,{Hb:arguments[0]})},g.b("templateSources",g.v),g.b("templateSources.domElement",g.v.n),g.b("templateSources.anonymousTemplate",g.v.qa)}(),function(){function e(t,e,n){var i;for(e=g.f.nextSibling(e);t&&(i=t)!==e;)t=g.f.nextSibling(i),n(i,t)}function n(t,n){if(t.length){var i=t[0],r=t[t.length-1],a=i.parentNode,o=g.Q.instance,s=o.preprocessNode;if(s){if(e(i,r,function(t,e){var n=t.previousSibling,a=s.call(o,t);a&&(t===i&&(i=a[0]||e),t===r&&(r=a[a.length-1]||n))}),t.length=0,!i)return;i===r?t.push(i):(t.push(i,r),g.a.za(t,a))}e(i,r,function(t){1!==t.nodeType&&8!==t.nodeType||g.Rb(n,t)}),e(i,r,function(t){1!==t.nodeType&&8!==t.nodeType||g.M.yc(t,[n])}),g.a.za(t,a)}}function i(t){return t.nodeType?t:0<t.length?t[0]:null}function r(t,e,r,a,s){s=s||{};var u=(t&&i(t)||r||{}).ownerDocument,l=s.templateEngine||o;if(g.Gb.Oc(r,l,u),r=l.renderTemplate(r,a,s,u),"number"!=typeof r.length||0<r.length&&"number"!=typeof r[0].nodeType)throw Error("Template engine must return an array of DOM nodes");switch(u=!1,e){case"replaceChildren":g.f.da(t,r),u=!0;break;case"replaceNode":g.a.qc(t,r),u=!0;break;case"ignoreTargetNode":break;default:throw Error("Unknown renderMode: "+e)}return u&&(n(r,a),s.afterRender&&g.l.w(s.afterRender,null,[r,a.$data])),r}function a(t,e,n){return g.H(t)?t():"function"==typeof t?t(e,n):t}var o;g.Db=function(e){if(e!=t&&!(e instanceof g.O))throw Error("templateEngine must inherit from ko.templateEngine");o=e},g.Ab=function(e,n,s,u,l){if(s=s||{},(s.templateEngine||o)==t)throw Error("Set a template engine before calling renderTemplate");if(l=l||"replaceChildren",u){var c=i(u);return g.B(function(){var t=n&&n instanceof g.U?n:new g.U(g.a.c(n)),o=a(e,t.$data,t),t=r(u,l,o,t,s);"replaceNode"==l&&(u=t,c=i(u))},null,{wa:function(){return!c||!g.a.nb(c)},i:c&&"replaceNode"==l?c.parentNode:c})}return g.M.wb(function(t){g.Ab(e,n,s,t,"replaceNode")})},g.kd=function(e,i,o,s,u){function l(t,e){n(e,f),o.afterRender&&o.afterRender(e,t),f=null}function c(t,n){f=u.createChildContext(t,o.as,function(t){t.$index=n});var i=a(e,t,f);return r(null,"ignoreTargetNode",i,f,o)}var f;return g.B(function(){var e=g.a.c(i)||[];"undefined"==typeof e.length&&(e=[e]),e=g.a.Ka(e,function(e){return o.includeDestroyed||e===t||null===e||!g.a.c(e._destroy)}),g.l.w(g.a.Bb,null,[s,e,c,o,l])},null,{i:s})};var s=g.a.e.I();g.d.template={init:function(t,e){var n=g.a.c(e());if("string"==typeof n||n.name)g.f.xa(t);else{if("nodes"in n){if(n=n.nodes||[],g.H(n))throw Error('The "nodes" option must be a plain, non-observable array.')}else n=g.f.childNodes(t);n=g.a.jc(n),new g.v.qa(t).nodes(n)}return{controlsDescendantBindings:!0}},update:function(e,n,i,r,a){var o,u=n();n=g.a.c(u),i=!0,r=null,"string"==typeof n?n={}:(u=n.name,"if"in n&&(i=g.a.c(n["if"])),i&&"ifnot"in n&&(i=!g.a.c(n.ifnot)),o=g.a.c(n.data)),"foreach"in n?r=g.kd(u||e,i&&n.foreach||[],n,e,a):i?(a="data"in n?a.createChildContext(o,n.as):a,r=g.Ab(u||e,a,n,e)):g.f.xa(e),a=r,(o=g.a.e.get(e,s))&&"function"==typeof o.k&&o.k(),g.a.e.set(e,s,a&&a.ba()?a:t)}},g.h.ta.template=function(t){return t=g.h.yb(t),1==t.length&&t[0].unknown||g.h.ad(t,"name")?null:"This template engine does not support anonymous templates nested within its templates"},g.f.Z.template=!0}(),g.b("setTemplateEngine",g.Db),g.b("renderTemplate",g.Ab),g.a.dc=function(t,e,n){if(t.length&&e.length){var i,r,a,o,s;for(i=r=0;(!n||n>i)&&(o=t[r]);++r){for(a=0;s=e[a];++a)if(o.value===s.value){o.moved=s.index,s.moved=o.index,e.splice(a,1),i=a=0;break}i+=a}}},g.a.ib=function(){function t(t,e,n,i,r){var a,o,s,u,l,c=Math.min,f=Math.max,h=[],d=t.length,p=e.length,m=p-d||1,v=d+p+1;for(a=0;d>=a;a++)for(u=s,h.push(s=[]),l=c(p,a+m),o=f(0,a-1);l>=o;o++)s[o]=o?a?t[a-1]===e[o-1]?u[o-1]:c(u[o]||v,s[o-1]||v)+1:o+1:a+1;for(c=[],f=[],m=[],a=d,o=p;a||o;)p=h[a][o]-1,o&&p===h[a][o-1]?f.push(c[c.length]={status:n,value:e[--o],index:o}):a&&p===h[a-1][o]?m.push(c[c.length]={status:i,value:t[--a],index:a}):(--o,--a,r.sparse||c.push({status:"retained",value:e[o]}));return g.a.dc(m,f,!r.dontLimitMoves&&10*d),c.reverse()}return function(e,n,i){return i="boolean"==typeof i?{dontLimitMoves:i}:i||{},e=e||[],n=n||[],e.length<n.length?t(e,n,"added","deleted",i):t(n,e,"deleted","added",i)}}(),g.b("utils.compareArrays",g.a.ib),function(){function e(e,n,i,r,a){var o=[],s=g.B(function(){var t=n(i,a,g.a.za(o,e))||[];0<o.length&&(g.a.qc(o,t),r&&g.l.w(r,null,[i,t,a])),o.length=0,g.a.ra(o,t)},null,{i:e,wa:function(){return!g.a.Qb(o)}});return{ca:o,B:s.ba()?s:t}}var n=g.a.e.I(),i=g.a.e.I();g.a.Bb=function(r,a,o,s,u){function l(t,e){k=h[e],b!==e&&(T[t]=k),k.qb(b++),g.a.za(k.ca,r),m.push(k),w.push(k)}function c(t,e){if(t)for(var n=0,i=e.length;i>n;n++)e[n]&&g.a.q(e[n].ca,function(i){t(i,n,e[n].ja)})}a=a||[],s=s||{};var f=g.a.e.get(r,n)===t,h=g.a.e.get(r,n)||[],d=g.a.fb(h,function(t){return t.ja}),p=g.a.ib(d,a,s.dontLimitMoves),m=[],v=0,b=0,y=[],w=[];a=[];for(var k,x,E,T=[],d=[],_=0;x=p[_];_++)switch(E=x.moved,x.status){case"deleted":E===t&&(k=h[v],k.B&&(k.B.k(),k.B=t),g.a.za(k.ca,r).length&&(s.beforeRemove&&(m.push(k),w.push(k),k.ja===i?k=null:a[_]=k),k&&y.push.apply(y,k.ca))),v++;break;case"retained":l(_,v++);break;case"added":E!==t?l(_,E):(k={ja:x.value,qb:g.N(b++)},m.push(k),w.push(k),f||(d[_]=k))}g.a.e.set(r,n,m),c(s.beforeMove,T),g.a.q(y,s.beforeRemove?g.$:g.removeNode);for(var C,_=0,f=g.f.firstChild(r);k=w[_];_++){for(k.ca||g.a.extend(k,e(r,o,k.ja,u,k.qb)),v=0;p=k.ca[v];f=p.nextSibling,C=p,v++)p!==f&&g.f.gc(r,p,C);!k.Wc&&u&&(u(k.ja,k.ca,k.qb),k.Wc=!0)}for(c(s.beforeRemove,a),_=0;_<a.length;++_)a[_]&&(a[_].ja=i);c(s.afterMove,T),c(s.afterAdd,d)}}(),g.b("utils.setDomNodeChildrenFromArrayMapping",g.a.Bb),g.W=function(){this.allowTemplateRewriting=!1},g.W.prototype=new g.O,g.W.prototype.renderTemplateSource=function(t,e,n,i){return(e=(9>g.a.C?0:t.nodes)?t.nodes():null)?g.a.V(e.cloneNode(!0).childNodes):(t=t.text(),g.a.ma(t,i))},g.W.sb=new g.W,g.Db(g.W.sb),g.b("nativeTemplateEngine",g.W),function(){g.vb=function(){var t=this.$c=function(){if(!r||!r.tmpl)return 0;try{if(0<=r.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch(t){}return 1}();this.renderTemplateSource=function(e,i,a,o){if(o=o||n,a=a||{},2>t)throw Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");var s=e.data("precompiled");return s||(s=e.text()||"",s=r.template(null,"{{ko_with $item.koBindingContext}}"+s+"{{/ko_with}}"),e.data("precompiled",s)),e=[i.$data],i=r.extend({koBindingContext:i},a.templateOptions),i=r.tmpl(s,e,i),i.appendTo(o.createElement("div")),r.fragments={},i},this.createJavaScriptEvaluatorBlock=function(t){return"{{ko_code ((function() { return "+t+" })()) }}"},this.addTemplate=function(t,e){n.write("<script type='text/html' id='"+t+"'>"+e+"</script>")},t>0&&(r.tmpl.tag.ko_code={open:"__.push($1 || '');"},r.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},g.vb.prototype=new g.O;var t=new g.vb;0<t.$c&&g.Db(t),g.b("jqueryTmplTemplateEngine",g.vb)}()})}()}(),function(t){"use strict";if("function"==typeof require&&"object"==typeof exports&&"object"==typeof module)t(require("knockout"),exports);else if("function"==typeof define&&define.amd)define(["knockout","exports"],t);else{if("undefined"==typeof ko)throw new Error("Knockout is required, please ensure it is loaded before loading this mapping plug-in");t(ko,ko.mapping={})}}(function(t,e){"use strict";function n(){for(var t,e,n,i=arguments,r=i.length,a={},o=[];r--;)for(n=i[r],t=n.length;t--;)e=n[t],a[e]||(a[e]=1,o.push(e));return o}function i(t,r){var a;for(var o in r)if(r.hasOwnProperty(o)&&r[o])if(a=e.getType(t[o]),o&&t[o]&&"array"!==a&&"string"!==a)i(t[o],r[o]);else{var s="array"===e.getType(t[o])&&"array"===e.getType(r[o]);s?t[o]=n(t[o],r[o]):t[o]=r[o]}}function r(t,e){var n={};return i(n,t),i(n,e),n}function a(t,e){for(var n=r({},t),i=_.length-1;i>=0;i--){var a=_[i];n[a]&&(n[""]instanceof Object||(n[""]={}),n[""][a]=n[a],delete n[a])}return e&&(n.ignore=o(e.ignore,n.ignore),n.include=o(e.include,n.include),n.copy=o(e.copy,n.copy),n.observe=o(e.observe,n.observe)),n.ignore=o(n.ignore,N.ignore),n.include=o(n.include,N.include),n.copy=o(n.copy,N.copy),n.observe=o(n.observe,N.observe),n.mappedProperties=n.mappedProperties||{},n.copiedProperties=n.copiedProperties||{},n}function o(n,i){return void 0===n?n=[]:"array"!==e.getType(n)&&(n=[n]),void 0===i?i=[]:"array"!==e.getType(i)&&(i=[i]),t.utils.arrayGetDistinctValues(n.concat(i))}function s(e,n){var i=t.dependentObservable;t.dependentObservable=function(n,i,r){r=r||{},n&&"object"==typeof n&&(r=n);var a=r.deferEvaluation,o=r.pure,s=!1,u=function(n){var i=t.dependentObservable;t.dependentObservable=E;var r=t.isWriteableObservable(n);t.dependentObservable=i;var a=E({read:function(){return s||(t.utils.arrayRemoveItem(e,n),s=!0),n.apply(n,arguments)},write:r&&function(t){return n(t)},deferEvaluation:!0});return k&&(a._wrapper=!0),a.__DO=n,a};r.deferEvaluation=!0;var l=E(n,i,r);return a||o||(l=u(l),e.push(l)),l},t.dependentObservable.fn=E.fn,t.computed=t.dependentObservable;var r=n();return t.dependentObservable=i,t.computed=t.dependentObservable,r}function u(n,i,a,o,c,g,v){var b="array"===e.getType(t.utils.unwrapObservable(i));if(g=g||"",e.isMapped(n)){var k=t.utils.unwrapObservable(n)[x];a=r(k,a)}var E={data:i,parent:v||c},T=function(){return a[o]&&a[o].create instanceof Function},_=function(e){
return s(y,function(){return t.utils.unwrapObservable(c)instanceof Array?a[o].create({data:e||E.data,parent:E.parent,skip:C}):a[o].create({data:e||E.data,parent:E.parent})})},S=function(){return a[o]&&a[o].update instanceof Function},N=function(e,n){var i={data:n||E.data,parent:E.parent,target:t.utils.unwrapObservable(e)};return t.isWriteableObservable(e)&&(i.observable=e),a[o].update(i)},P=w.get(i);if(P)return P;if(o=o||"",b){var O=[],I=!1,D=function(t){return t};a[o]&&a[o].key&&(D=a[o].key,I=!0),t.isObservable(n)||(n=t.observableArray([]),n.mappedRemove=function(t){var e="function"==typeof t?t:function(e){return e===D(t)};return n.remove(function(t){return e(D(t))})},n.mappedRemoveAll=function(e){var i=h(e,D);return n.remove(function(e){return-1!==t.utils.arrayIndexOf(i,D(e))})},n.mappedDestroy=function(t){var e="function"==typeof t?t:function(e){return e===D(t)};return n.destroy(function(t){return e(D(t))})},n.mappedDestroyAll=function(e){var i=h(e,D);return n.destroy(function(e){return-1!==t.utils.arrayIndexOf(i,D(e))})},n.mappedIndexOf=function(e){var i=h(n(),D),r=D(e);return t.utils.arrayIndexOf(i,r)},n.mappedGet=function(t){return n()[n.mappedIndexOf(t)]},n.mappedCreate=function(e){if(-1!==n.mappedIndexOf(e))throw new Error("There already is an object with the key that you specified.");var i=T()?_(e):e;if(S()){var r=N(i,e);t.isWriteableObservable(i)?i(r):i=r}return n.push(i),i});var M=h(t.utils.unwrapObservable(n),D).sort(),L=h(i,D);I&&L.sort();var z,B,R,A=t.utils.compareArrays(M,L),j={},V=t.utils.unwrapObservable(i),F={},q=!0;for(z=0,B=V.length;B>z;z++){if(R=D(V[z]),void 0===R||R instanceof Object){q=!1;break}F[R]=V[z]}var W,$,H=[],U=0;for(z=0,B=A.length;B>z;z++){R=A[z];var J,G=g+"["+m(z)+"]";switch(R.status){case"added":W=q?F[R.value]:f(t.utils.unwrapObservable(i),R.value,D),J=u(void 0,W,a,o,n,G,c),T()||(J=t.utils.unwrapObservable(J)),$=l(t.utils.unwrapObservable(i),W,j),J===C?U++:H[$-U]=J,j[$]=!0;break;case"retained":W=q?F[R.value]:f(t.utils.unwrapObservable(i),R.value,D),J=f(n,R.value,D),u(J,W,a,o,n,G,c),$=l(t.utils.unwrapObservable(i),W,j),H[$]=J,j[$]=!0;break;case"deleted":J=f(n,R.value,D)}O.push({event:R.status,item:J})}n(H),a[o]&&a[o].arrayChanged&&t.utils.arrayForEach(O,function(t){a[o].arrayChanged(t.event,t.item)})}else if(p(i)){if(n=t.utils.unwrapObservable(n),!n){if(T()){var Q=_();return S()&&(Q=N(Q)),Q}if(S())return N();n={}}if(S()&&(n=N(n)),w.save(i,n),S())return n;d(i,function(r){var o=g.length?g+"."+m(r):m(r);if(-1===t.utils.arrayIndexOf(a.ignore,o)){if(-1!==t.utils.arrayIndexOf(a.copy,o))return void(n[r]=i[r]);if("object"!=typeof i[r]&&"array"!==e.getType(i[r])&&a.observe.length>0&&-1===t.utils.arrayIndexOf(a.observe,o))return n[r]=i[r],void(a.copiedProperties[o]=!0);var s=w.get(i[r]),l=u(n[r],i[r],a,r,n,o,n),c=s||l;if(a.observe.length>0&&-1===t.utils.arrayIndexOf(a.observe,o))return n[r]=t.utils.unwrapObservable(c),void(a.copiedProperties[o]=!0);t.isWriteableObservable(n[r])?(c=t.utils.unwrapObservable(c),n[r]()!==c&&n[r](c)):(c=void 0===n[r]?c:t.utils.unwrapObservable(c),n[r]=c),a.mappedProperties[o]=!0}})}else switch(e.getType(i)){case"function":S()?t.isWriteableObservable(i)?(i(N(i)),n=i):n=N(i):n=i;break;default:if(t.isWriteableObservable(n)){var Y;return S()?(Y=N(n),n(Y),Y):(Y=t.utils.unwrapObservable(i),n(Y),Y)}var K=T()||S();if(n=T()?_():t.observable(t.utils.unwrapObservable(i)),S()&&n(N(n)),K)return n}return n}function l(t,e,n){for(var i=0,r=t.length;r>i;i++)if(n[i]!==!0&&t[i]===e)return i;return null}function c(n,i){var r;return i&&(r=i(n)),"undefined"===e.getType(r)&&(r=n),t.utils.unwrapObservable(r)}function f(e,n,i){e=t.utils.unwrapObservable(e);for(var r=0,a=e.length;a>r;r++){var o=e[r];if(c(o,i)===n)return o}throw new Error("When calling ko.update*, the key '"+n+"' was not found!")}function h(e,n){return t.utils.arrayMap(t.utils.unwrapObservable(e),function(t){return n?c(t,n):t})}function d(t,n){if("array"===e.getType(t))for(var i=0;i<t.length;i++)n(i);else for(var r in t)t.hasOwnProperty(r)&&n(r)}function p(t){if(null===t)return!1;var n=e.getType(t);return"object"===n||"array"===n}function g(t,n,i){var r=t||"";return"array"===e.getType(n)?t&&(r+="["+m(i)+"]"):(t&&(r+="."),r+=m(i)),r}function m(t){var e=(""+t).replace(/~/g,"~~").replace(/\[/g,"~[").replace(/]/g,"~]").replace(/\./g,"~.");return e}function v(){var e=[],n=[];this.save=function(i,r){var a=t.utils.arrayIndexOf(e,i);a>=0?n[a]=r:(e.push(i),n.push(r))},this.get=function(i){var r=t.utils.arrayIndexOf(e,i),a=r>=0?n[r]:void 0;return a}}function b(){var t={},e=function(e){var n;try{n=e}catch(i){n="$$$"}var r=t[n];return t.hasOwnProperty(n)||(r=new v,t[n]=r),r};this.save=function(t,n){e(t).save(t,n)},this.get=function(t){return e(t).get(t)}}t.mapping=e;var y,w,k=!0,x="__ko_mapping__",E=t.dependentObservable,T=0,_=["create","update","key","arrayChanged"],C={},S={include:["_destroy"],ignore:[],copy:[],observe:[]},N=S;e.isMapped=function(e){var n=t.utils.unwrapObservable(e);return n&&n[x]},e.fromJS=function(t){if(0===arguments.length)throw new Error("When calling ko.fromJS, pass the object you want to convert.");try{T||(y=[],w=new b),T++;var e,n;2===arguments.length&&(arguments[1][x]?n=arguments[1]:e=arguments[1]),3===arguments.length&&(e=arguments[1],n=arguments[2]),n&&(e=r(e,n[x])),e=a(e);var i=u(n,t,e);if(n&&(i=n),!--T)for(;y.length;){var o=y.pop();o&&(o(),o.__DO.throttleEvaluation=o.throttleEvaluation)}return i[x]=r(i[x],e),i}catch(s){throw T=0,s}},e.fromJSON=function(n){var i=Array.prototype.slice.call(arguments,0);return i[0]=t.utils.parseJson(n),e.fromJS.apply(this,i)},e.toJS=function(n,i){if(N||e.resetDefaultOptions(),0===arguments.length)throw new Error("When calling ko.mapping.toJS, pass the object you want to convert.");if("array"!==e.getType(N.ignore))throw new Error("ko.mapping.defaultOptions().ignore should be an array.");if("array"!==e.getType(N.include))throw new Error("ko.mapping.defaultOptions().include should be an array.");if("array"!==e.getType(N.copy))throw new Error("ko.mapping.defaultOptions().copy should be an array.");return i=a(i,n[x]),e.visitModel(n,function(e){return t.utils.unwrapObservable(e)},i)},e.toJSON=function(n,i,r,a){var o=e.toJS(n,i);return t.utils.stringifyJson(o,r,a)},e.defaultOptions=function(){return arguments.length>0?void(N=arguments[0]):N},e.resetDefaultOptions=function(){N={include:S.include.slice(0),ignore:S.ignore.slice(0),copy:S.copy.slice(0),observe:S.observe.slice(0)}},e.getType=function(t){if(t&&"object"==typeof t){if(t.constructor===Date)return"date";if(t.constructor===Array)return"array"}return typeof t},e.visitModel=function(n,i,r){r=r||{},r.visitedObjects=r.visitedObjects||new b;var o,s=t.utils.unwrapObservable(n);if(!p(s))return i(n,r.parentName);r=a(r,s[x]),i(n,r.parentName),o="array"===e.getType(s)?[]:{},r.visitedObjects.save(n,o);var u=r.parentName;return d(s,function(n){var a=m(n);if(!r.ignore||-1===t.utils.arrayIndexOf(r.ignore,a)){var l=s[n];if(r.parentName=g(u,s,n),-1===t.utils.arrayIndexOf(r.copy,a)&&-1===t.utils.arrayIndexOf(r.include,a)){var c=s[x];if(c){var f=c.mappedProperties;if(f&&!f[a]){var h=c.copiedProperties;if(h&&!h[a]&&"array"!==e.getType(s))return}}}switch(e.getType(t.utils.unwrapObservable(l))){case"object":case"array":case"undefined":var d=r.visitedObjects.get(l);o[n]="undefined"!==e.getType(d)?d:e.visitModel(l,i,r);break;default:o[n]=i(l,r.parentName)}}}),o}}),function(t,e){"use strict";"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],function(n){e(t,n)}):"object"==typeof module&&module.exports?module.exports=e(t,require("jquery")):t.jQueryBridget=e(t,t.jQuery)}(window,function(t,e){"use strict";function n(n,a,s){function u(t,e,i){var r,a="$()."+n+'("'+e+'")';return t.each(function(t,u){var l=s.data(u,n);if(!l)return void o(n+" not initialized. Cannot call methods, i.e. "+a);var c=l[e];if(!c||"_"==e.charAt(0))return void o(a+" is not a valid method");var f=c.apply(l,i);r=void 0===r?f:r}),void 0!==r?r:t}function l(t,e){t.each(function(t,i){var r=s.data(i,n);r?(r.option(e),r._init()):(r=new a(i,e),s.data(i,n,r))})}s=s||e||t.jQuery,s&&(a.prototype.option||(a.prototype.option=function(t){s.isPlainObject(t)&&(this.options=s.extend(!0,this.options,t))}),s.fn[n]=function(t){if("string"==typeof t){var e=r.call(arguments,1);return u(this,t,e)}return l(this,t),this},i(s))}function i(t){!t||t&&t.bridget||(t.bridget=n)}var r=Array.prototype.slice,a=t.console,o="undefined"==typeof a?function(){}:function(t){a.error(t)};return i(e||t.jQuery),n}),function(t,e){"use strict";"function"==typeof define&&define.amd?define("get-size/get-size",[],function(){return e()}):"object"==typeof module&&module.exports?module.exports=e():t.getSize=e()}(window,function(){"use strict";function t(t){var e=parseFloat(t),n=-1==t.indexOf("%")&&!isNaN(e);return n&&e}function e(){}function n(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0;l>e;e++){var n=u[e];t[n]=0}return t}function i(t){var e=getComputedStyle(t);return e||s("Style returned "+e+". Are you running this code in a hidden iframe on Firefox? See http://bit.ly/getsizebug1"),e}function r(){if(!c){c=!0;var e=document.createElement("div");e.style.width="200px",e.style.padding="1px 2px 3px 4px",e.style.borderStyle="solid",e.style.borderWidth="1px 2px 3px 4px",e.style.boxSizing="border-box";var n=document.body||document.documentElement;n.appendChild(e);var r=i(e);a.isBoxSizeOuter=o=200==t(r.width),n.removeChild(e)}}function a(e){if(r(),"string"==typeof e&&(e=document.querySelector(e)),e&&"object"==typeof e&&e.nodeType){var a=i(e);if("none"==a.display)return n();var s={};s.width=e.offsetWidth,s.height=e.offsetHeight;for(var c=s.isBorderBox="border-box"==a.boxSizing,f=0;l>f;f++){var h=u[f],d=a[h],p=parseFloat(d);s[h]=isNaN(p)?0:p}var g=s.paddingLeft+s.paddingRight,m=s.paddingTop+s.paddingBottom,v=s.marginLeft+s.marginRight,b=s.marginTop+s.marginBottom,y=s.borderLeftWidth+s.borderRightWidth,w=s.borderTopWidth+s.borderBottomWidth,k=c&&o,x=t(a.width);x!==!1&&(s.width=x+(k?0:g+y));var E=t(a.height);return E!==!1&&(s.height=E+(k?0:m+w)),s.innerWidth=s.width-(g+y),s.innerHeight=s.height-(m+w),s.outerWidth=s.width+v,s.outerHeight=s.height+b,s}}var o,s="undefined"==typeof console?e:function(t){console.error(t)},u=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],l=u.length,c=!1;return a}),function(t,e){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",e):"object"==typeof module&&module.exports?module.exports=e():t.EvEmitter=e()}(this,function(){function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var n=this._events=this._events||{},i=n[t]=n[t]||[];return-1==i.indexOf(e)&&i.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var n=this._onceEvents=this._onceEvents||{},i=n[t]=n[t]||{};return i[e]=!0,this}},e.off=function(t,e){var n=this._events&&this._events[t];if(n&&n.length){var i=n.indexOf(e);return-1!=i&&n.splice(i,1),this}},e.emitEvent=function(t,e){var n=this._events&&this._events[t];if(n&&n.length){var i=0,r=n[i];e=e||[];for(var a=this._onceEvents&&this._onceEvents[t];r;){var o=a&&a[r];o&&(this.off(t,r),delete a[r]),r.apply(this,e),i+=o?0:1,r=n[i]}return this}},t}),function(t,e){"use strict";"function"==typeof define&&define.amd?define("desandro-matches-selector/matches-selector",e):"object"==typeof module&&module.exports?module.exports=e():t.matchesSelector=e()}(window,function(){"use strict";var t=function(){var t=Element.prototype;if(t.matches)return"matches";if(t.matchesSelector)return"matchesSelector";for(var e=["webkit","moz","ms","o"],n=0;n<e.length;n++){var i=e[n],r=i+"MatchesSelector";if(t[r])return r}}();return function(e,n){return e[t](n)}}),function(t,e){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["desandro-matches-selector/matches-selector"],function(n){return e(t,n)}):"object"==typeof module&&module.exports?module.exports=e(t,require("desandro-matches-selector")):t.fizzyUIUtils=e(t,t.matchesSelector)}(window,function(t,e){var n={};n.extend=function(t,e){for(var n in e)t[n]=e[n];return t},n.modulo=function(t,e){return(t%e+e)%e},n.makeArray=function(t){var e=[];if(Array.isArray(t))e=t;else if(t&&"number"==typeof t.length)for(var n=0;n<t.length;n++)e.push(t[n]);else e.push(t);return e},n.removeFrom=function(t,e){var n=t.indexOf(e);-1!=n&&t.splice(n,1)},n.getParent=function(t,n){for(;t!=document.body;)if(t=t.parentNode,e(t,n))return t},n.getQueryElement=function(t){return"string"==typeof t?document.querySelector(t):t},n.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},n.filterFindElements=function(t,i){t=n.makeArray(t);var r=[];return t.forEach(function(t){if(t instanceof HTMLElement){if(!i)return void r.push(t);e(t,i)&&r.push(t);for(var n=t.querySelectorAll(i),a=0;a<n.length;a++)r.push(n[a])}}),r},n.debounceMethod=function(t,e,n){var i=t.prototype[e],r=e+"Timeout";t.prototype[e]=function(){var t=this[r];t&&clearTimeout(t);var e=arguments,a=this;this[r]=setTimeout(function(){i.apply(a,e),delete a[r]},n||100)}},n.docReady=function(t){"complete"==document.readyState?t():document.addEventListener("DOMContentLoaded",t)},n.toDashed=function(t){return t.replace(/(.)([A-Z])/g,function(t,e,n){return e+"-"+n}).toLowerCase()};var i=t.console;return n.htmlInit=function(e,r){n.docReady(function(){var a=n.toDashed(r),o="data-"+a,s=document.querySelectorAll("["+o+"]"),u=document.querySelectorAll(".js-"+a),l=n.makeArray(s).concat(n.makeArray(u)),c=o+"-options",f=t.jQuery;l.forEach(function(t){var n,a=t.getAttribute(o)||t.getAttribute(c);try{n=a&&JSON.parse(a)}catch(s){return void(i&&i.error("Error parsing "+o+" on "+t.className+": "+s))}var u=new e(t,n);f&&f.data(t,r,u)})})},n}),function(t,e){"function"==typeof define&&define.amd?define("outlayer/item",["ev-emitter/ev-emitter","get-size/get-size"],e):"object"==typeof module&&module.exports?module.exports=e(require("ev-emitter"),require("get-size")):(t.Outlayer={},t.Outlayer.Item=e(t.EvEmitter,t.getSize))}(window,function(t,e){"use strict";function n(t){for(var e in t)return!1;return e=null,!0}function i(t,e){t&&(this.element=t,this.layout=e,this.position={x:0,y:0},this._create())}function r(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}var a=document.documentElement.style,o="string"==typeof a.transition?"transition":"WebkitTransition",s="string"==typeof a.transform?"transform":"WebkitTransform",u={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[o],l={transform:s,transition:o,transitionDuration:o+"Duration",transitionProperty:o+"Property"},c=i.prototype=Object.create(t.prototype);c.constructor=i,c._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},c.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},c.getSize=function(){this.size=e(this.element)},c.css=function(t){var e=this.element.style;for(var n in t){var i=l[n]||n;e[i]=t[n]}},c.getPosition=function(){var t=getComputedStyle(this.element),e=this.layout._getOption("originLeft"),n=this.layout._getOption("originTop"),i=t[e?"left":"right"],r=t[n?"top":"bottom"],a=this.layout.size,o=-1!=i.indexOf("%")?parseFloat(i)/100*a.width:parseInt(i,10),s=-1!=r.indexOf("%")?parseFloat(r)/100*a.height:parseInt(r,10);o=isNaN(o)?0:o,s=isNaN(s)?0:s,o-=e?a.paddingLeft:a.paddingRight,s-=n?a.paddingTop:a.paddingBottom,this.position.x=o,this.position.y=s},c.layoutPosition=function(){var t=this.layout.size,e={},n=this.layout._getOption("originLeft"),i=this.layout._getOption("originTop"),r=n?"paddingLeft":"paddingRight",a=n?"left":"right",o=n?"right":"left",s=this.position.x+t[r];e[a]=this.getXValue(s),e[o]="";var u=i?"paddingTop":"paddingBottom",l=i?"top":"bottom",c=i?"bottom":"top",f=this.position.y+t[u];e[l]=this.getYValue(f),e[c]="",this.css(e),this.emitEvent("layout",[this])},c.getXValue=function(t){var e=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&!e?t/this.layout.size.width*100+"%":t+"px"},c.getYValue=function(t){var e=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&e?t/this.layout.size.height*100+"%":t+"px"},c._transitionTo=function(t,e){this.getPosition();var n=this.position.x,i=this.position.y,r=parseInt(t,10),a=parseInt(e,10),o=r===this.position.x&&a===this.position.y;if(this.setPosition(t,e),o&&!this.isTransitioning)return void this.layoutPosition();var s=t-n,u=e-i,l={};l.transform=this.getTranslate(s,u),this.transition({to:l,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},c.getTranslate=function(t,e){var n=this.layout._getOption("originLeft"),i=this.layout._getOption("originTop");return t=n?t:-t,e=i?e:-e,"translate3d("+t+"px, "+e+"px, 0)"},c.goTo=function(t,e){this.setPosition(t,e),this.layoutPosition()},c.moveTo=c._transitionTo,c.setPosition=function(t,e){this.position.x=parseInt(t,10),this.position.y=parseInt(e,10)},c._nonTransition=function(t){this.css(t.to),t.isCleaning&&this._removeStyles(t.to);for(var e in t.onTransitionEnd)t.onTransitionEnd[e].call(this)},c.transition=function(t){if(!parseFloat(this.layout.options.transitionDuration))return void this._nonTransition(t);var e=this._transn;for(var n in t.onTransitionEnd)e.onEnd[n]=t.onTransitionEnd[n];for(n in t.to)e.ingProperties[n]=!0,t.isCleaning&&(e.clean[n]=!0);if(t.from){this.css(t.from);var i=this.element.offsetHeight;i=null}this.enableTransition(t.to),this.css(t.to),this.isTransitioning=!0};var f="opacity,"+r(s);c.enableTransition=function(){this.isTransitioning||(this.css({transitionProperty:f,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(u,this,!1))},c.onwebkitTransitionEnd=function(t){this.ontransitionend(t)},c.onotransitionend=function(t){this.ontransitionend(t)};var h={"-webkit-transform":"transform"};c.ontransitionend=function(t){if(t.target===this.element){var e=this._transn,i=h[t.propertyName]||t.propertyName;if(delete e.ingProperties[i],n(e.ingProperties)&&this.disableTransition(),i in e.clean&&(this.element.style[t.propertyName]="",delete e.clean[i]),i in e.onEnd){var r=e.onEnd[i];r.call(this),delete e.onEnd[i]}this.emitEvent("transitionEnd",[this])}},c.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(u,this,!1),this.isTransitioning=!1},c._removeStyles=function(t){var e={};for(var n in t)e[n]="";this.css(e)};var d={transitionProperty:"",transitionDuration:""};return c.removeTransitionStyles=function(){this.css(d)},c.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},c.remove=function(){return o&&parseFloat(this.layout.options.transitionDuration)?(this.once("transitionEnd",function(){this.removeElem()}),void this.hide()):void this.removeElem()},c.reveal=function(){delete this.isHidden,this.css({display:""});var t=this.layout.options,e={},n=this.getHideRevealTransitionEndProperty("visibleStyle");e[n]=this.onRevealTransitionEnd,this.transition({from:t.hiddenStyle,to:t.visibleStyle,isCleaning:!0,onTransitionEnd:e})},c.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},c.getHideRevealTransitionEndProperty=function(t){var e=this.layout.options[t];if(e.opacity)return"opacity";for(var n in e)return n},c.hide=function(){this.isHidden=!0,this.css({display:""});var t=this.layout.options,e={},n=this.getHideRevealTransitionEndProperty("hiddenStyle");e[n]=this.onHideTransitionEnd,this.transition({from:t.visibleStyle,to:t.hiddenStyle,isCleaning:!0,onTransitionEnd:e})},c.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},c.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},i}),function(t,e){"use strict";"function"==typeof define&&define.amd?define("outlayer/outlayer",["ev-emitter/ev-emitter","get-size/get-size","fizzy-ui-utils/utils","./item"],function(n,i,r,a){return e(t,n,i,r,a)}):"object"==typeof module&&module.exports?module.exports=e(t,require("ev-emitter"),require("get-size"),require("fizzy-ui-utils"),require("./item")):t.Outlayer=e(t,t.EvEmitter,t.getSize,t.fizzyUIUtils,t.Outlayer.Item)}(window,function(t,e,n,i,r){"use strict";function a(t,e){var n=i.getQueryElement(t);if(!n)return void(s&&s.error("Bad element for "+this.constructor.namespace+": "+(n||t)));this.element=n,u&&(this.$element=u(this.element)),this.options=i.extend({},this.constructor.defaults),this.option(e);var r=++c;this.element.outlayerGUID=r,f[r]=this,this._create();var a=this._getOption("initLayout");a&&this.layout()}function o(t){function e(){t.apply(this,arguments)}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e}var s=t.console,u=t.jQuery,l=function(){},c=0,f={};a.namespace="outlayer",a.Item=r,a.defaults={containerStyle:{position:"relative"},initLayout:!0,originLeft:!0,originTop:!0,resize:!0,resizeContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}};var h=a.prototype;return i.extend(h,e.prototype),h.option=function(t){i.extend(this.options,t)},h._getOption=function(t){var e=this.constructor.compatOptions[t];return e&&void 0!==this.options[e]?this.options[e]:this.options[t]},a.compatOptions={initLayout:"isInitLayout",horizontal:"isHorizontal",layoutInstant:"isLayoutInstant",originLeft:"isOriginLeft",originTop:"isOriginTop",resize:"isResizeBound",resizeContainer:"isResizingContainer"},h._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),i.extend(this.element.style,this.options.containerStyle);var t=this._getOption("resize");t&&this.bindResize()},h.reloadItems=function(){this.items=this._itemize(this.element.children)},h._itemize=function(t){for(var e=this._filterFindItemElements(t),n=this.constructor.Item,i=[],r=0;r<e.length;r++){var a=e[r],o=new n(a,this);i.push(o)}return i},h._filterFindItemElements=function(t){return i.filterFindElements(t,this.options.itemSelector)},h.getItemElements=function(){return this.items.map(function(t){return t.element})},h.layout=function(){this._resetLayout(),this._manageStamps();var t=this._getOption("layoutInstant"),e=void 0!==t?t:!this._isLayoutInited;this.layoutItems(this.items,e),this._isLayoutInited=!0},h._init=h.layout,h._resetLayout=function(){this.getSize()},h.getSize=function(){this.size=n(this.element)},h._getMeasurement=function(t,e){var i,r=this.options[t];r?("string"==typeof r?i=this.element.querySelector(r):r instanceof HTMLElement&&(i=r),this[t]=i?n(i)[e]:r):this[t]=0},h.layoutItems=function(t,e){t=this._getItemsForLayout(t),this._layoutItems(t,e),this._postLayout()},h._getItemsForLayout=function(t){return t.filter(function(t){return!t.isIgnored})},h._layoutItems=function(t,e){if(this._emitCompleteOnItems("layout",t),t&&t.length){var n=[];t.forEach(function(t){var i=this._getItemLayoutPosition(t);i.item=t,i.isInstant=e||t.isLayoutInstant,n.push(i)},this),this._processLayoutQueue(n)}},h._getItemLayoutPosition=function(){return{x:0,y:0}},h._processLayoutQueue=function(t){t.forEach(function(t){this._positionItem(t.item,t.x,t.y,t.isInstant)},this)},h._positionItem=function(t,e,n,i){i?t.goTo(e,n):t.moveTo(e,n)},h._postLayout=function(){this.resizeContainer()},h.resizeContainer=function(){var t=this._getOption("resizeContainer");if(t){var e=this._getContainerSize();e&&(this._setContainerMeasure(e.width,!0),this._setContainerMeasure(e.height,!1))}},h._getContainerSize=l,h._setContainerMeasure=function(t,e){if(void 0!==t){var n=this.size;n.isBorderBox&&(t+=e?n.paddingLeft+n.paddingRight+n.borderLeftWidth+n.borderRightWidth:n.paddingBottom+n.paddingTop+n.borderTopWidth+n.borderBottomWidth),t=Math.max(t,0),this.element.style[e?"width":"height"]=t+"px"}},h._emitCompleteOnItems=function(t,e){function n(){r.dispatchEvent(t+"Complete",null,[e])}function i(){o++,o==a&&n()}var r=this,a=e.length;if(!e||!a)return void n();var o=0;e.forEach(function(e){e.once(t,i)})},h.dispatchEvent=function(t,e,n){var i=e?[e].concat(n):n;if(this.emitEvent(t,i),u)if(this.$element=this.$element||u(this.element),e){var r=u.Event(e);r.type=t,this.$element.trigger(r,n)}else this.$element.trigger(t,n)},h.ignore=function(t){var e=this.getItem(t);e&&(e.isIgnored=!0)},h.unignore=function(t){var e=this.getItem(t);e&&delete e.isIgnored},h.stamp=function(t){t=this._find(t),t&&(this.stamps=this.stamps.concat(t),t.forEach(this.ignore,this))},h.unstamp=function(t){t=this._find(t),t&&t.forEach(function(t){i.removeFrom(this.stamps,t),this.unignore(t)},this)},h._find=function(t){return t?("string"==typeof t&&(t=this.element.querySelectorAll(t)),t=i.makeArray(t)):void 0},h._manageStamps=function(){this.stamps&&this.stamps.length&&(this._getBoundingRect(),this.stamps.forEach(this._manageStamp,this))},h._getBoundingRect=function(){var t=this.element.getBoundingClientRect(),e=this.size;this._boundingRect={left:t.left+e.paddingLeft+e.borderLeftWidth,top:t.top+e.paddingTop+e.borderTopWidth,right:t.right-(e.paddingRight+e.borderRightWidth),bottom:t.bottom-(e.paddingBottom+e.borderBottomWidth)}},h._manageStamp=l,h._getElementOffset=function(t){var e=t.getBoundingClientRect(),i=this._boundingRect,r=n(t),a={left:e.left-i.left-r.marginLeft,top:e.top-i.top-r.marginTop,right:i.right-e.right-r.marginRight,bottom:i.bottom-e.bottom-r.marginBottom};return a},h.handleEvent=i.handleEvent,h.bindResize=function(){t.addEventListener("resize",this),this.isResizeBound=!0},h.unbindResize=function(){t.removeEventListener("resize",this),this.isResizeBound=!1},h.onresize=function(){this.resize()},i.debounceMethod(a,"onresize",100),h.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},h.needsResizeLayout=function(){var t=n(this.element),e=this.size&&t;return e&&t.innerWidth!==this.size.innerWidth},h.addItems=function(t){var e=this._itemize(t);return e.length&&(this.items=this.items.concat(e)),e},h.appended=function(t){var e=this.addItems(t);e.length&&(this.layoutItems(e,!0),this.reveal(e))},h.prepended=function(t){var e=this._itemize(t);if(e.length){var n=this.items.slice(0);this.items=e.concat(n),this._resetLayout(),this._manageStamps(),this.layoutItems(e,!0),this.reveal(e),this.layoutItems(n)}},h.reveal=function(t){this._emitCompleteOnItems("reveal",t),t&&t.length&&t.forEach(function(t){t.reveal()})},h.hide=function(t){this._emitCompleteOnItems("hide",t),t&&t.length&&t.forEach(function(t){t.hide()})},h.revealItemElements=function(t){var e=this.getItems(t);this.reveal(e)},h.hideItemElements=function(t){var e=this.getItems(t);this.hide(e)},h.getItem=function(t){for(var e=0;e<this.items.length;e++){var n=this.items[e];if(n.element==t)return n}},h.getItems=function(t){t=i.makeArray(t);var e=[];return t.forEach(function(t){var n=this.getItem(t);n&&e.push(n)},this),e},h.remove=function(t){var e=this.getItems(t);this._emitCompleteOnItems("remove",e),e&&e.length&&e.forEach(function(t){t.remove(),i.removeFrom(this.items,t)},this)},h.destroy=function(){var t=this.element.style;t.height="",t.position="",t.width="",this.items.forEach(function(t){t.destroy()}),this.unbindResize();var e=this.element.outlayerGUID;delete f[e],delete this.element.outlayerGUID,u&&u.removeData(this.element,this.constructor.namespace)},a.data=function(t){t=i.getQueryElement(t);var e=t&&t.outlayerGUID;return e&&f[e]},a.create=function(t,e){var n=o(a);return n.defaults=i.extend({},a.defaults),i.extend(n.defaults,e),n.compatOptions=i.extend({},a.compatOptions),n.namespace=t,n.data=a.data,n.Item=o(r),i.htmlInit(n,t),u&&u.bridget&&u.bridget(t,n),n},a.Item=r,a}),function(t,e){"function"==typeof define&&define.amd?define("packery/rect",e):"object"==typeof module&&module.exports?module.exports=e():(t.Packery=t.Packery||{},t.Packery.Rect=e())}(window,function(){"use strict";function t(e){for(var n in t.defaults)this[n]=t.defaults[n];for(n in e)this[n]=e[n]}t.defaults={x:0,y:0,width:0,height:0};var e=t.prototype;return e.contains=function(t){var e=t.width||0,n=t.height||0;return this.x<=t.x&&this.y<=t.y&&this.x+this.width>=t.x+e&&this.y+this.height>=t.y+n},e.overlaps=function(t){var e=this.x+this.width,n=this.y+this.height,i=t.x+t.width,r=t.y+t.height;return this.x<i&&e>t.x&&this.y<r&&n>t.y},e.getMaximalFreeRects=function(e){if(!this.overlaps(e))return!1;var n,i=[],r=this.x+this.width,a=this.y+this.height,o=e.x+e.width,s=e.y+e.height;return this.y<e.y&&(n=new t({x:this.x,y:this.y,width:this.width,height:e.y-this.y}),i.push(n)),r>o&&(n=new t({x:o,y:this.y,width:r-o,height:this.height}),i.push(n)),a>s&&(n=new t({x:this.x,y:s,width:this.width,height:a-s}),i.push(n)),this.x<e.x&&(n=new t({x:this.x,y:this.y,width:e.x-this.x,height:this.height}),i.push(n)),i},e.canFit=function(t){return this.width>=t.width&&this.height>=t.height},t}),function(t,e){if("function"==typeof define&&define.amd)define("packery/packer",["./rect"],e);else if("object"==typeof module&&module.exports)module.exports=e(require("./rect"));else{var n=t.Packery=t.Packery||{};n.Packer=e(n.Rect)}}(window,function(t){"use strict";function e(t,e,n){this.width=t||0,this.height=e||0,this.sortDirection=n||"downwardLeftToRight",this.reset()}var n=e.prototype;n.reset=function(){this.spaces=[];var e=new t({x:0,y:0,width:this.width,height:this.height});this.spaces.push(e),this.sorter=i[this.sortDirection]||i.downwardLeftToRight},n.pack=function(t){for(var e=0;e<this.spaces.length;e++){var n=this.spaces[e];if(n.canFit(t)){this.placeInSpace(t,n);break}}},n.columnPack=function(t){for(var e=0;e<this.spaces.length;e++){var n=this.spaces[e],i=n.x<=t.x&&n.x+n.width>=t.x+t.width&&n.height>=t.height-.01;if(i){t.y=n.y,this.placed(t);break}}},n.rowPack=function(t){for(var e=0;e<this.spaces.length;e++){var n=this.spaces[e],i=n.y<=t.y&&n.y+n.height>=t.y+t.height&&n.width>=t.width-.01;if(i){t.x=n.x,this.placed(t);break}}},n.placeInSpace=function(t,e){t.x=e.x,t.y=e.y,this.placed(t)},n.placed=function(t){for(var e=[],n=0;n<this.spaces.length;n++){var i=this.spaces[n],r=i.getMaximalFreeRects(t);r?e.push.apply(e,r):e.push(i)}this.spaces=e,this.mergeSortSpaces()},n.mergeSortSpaces=function(){e.mergeRects(this.spaces),this.spaces.sort(this.sorter)},n.addSpace=function(t){this.spaces.push(t),this.mergeSortSpaces()},e.mergeRects=function(t){var e=0,n=t[e];t:for(;n;){for(var i=0,r=t[e+i];r;){if(r==n)i++;else{if(r.contains(n)){t.splice(e,1),n=t[e];continue t}n.contains(r)?t.splice(e+i,1):i++}r=t[e+i]}e++,n=t[e]}return t};var i={downwardLeftToRight:function(t,e){return t.y-e.y||t.x-e.x},rightwardTopToBottom:function(t,e){return t.x-e.x||t.y-e.y}};return e}),function(t,e){"function"==typeof define&&define.amd?define("packery/item",["outlayer/outlayer","./rect"],e):"object"==typeof module&&module.exports?module.exports=e(require("outlayer"),require("./rect")):t.Packery.Item=e(t.Outlayer,t.Packery.Rect)}(window,function(t,e){"use strict";var n=document.documentElement.style,i="string"==typeof n.transform?"transform":"WebkitTransform",r=function(){t.Item.apply(this,arguments)},a=r.prototype=Object.create(t.Item.prototype),o=a._create;a._create=function(){o.call(this),this.rect=new e};var s=a.moveTo;return a.moveTo=function(t,e){var n=Math.abs(this.position.x-t),i=Math.abs(this.position.y-e),r=this.layout.dragItemCount&&!this.isPlacing&&!this.isTransitioning&&1>n&&1>i;return r?void this.goTo(t,e):void s.apply(this,arguments)},a.enablePlacing=function(){this.removeTransitionStyles(),this.isTransitioning&&i&&(this.element.style[i]="none"),this.isTransitioning=!1,this.getSize(),this.layout._setRectSize(this.element,this.rect),this.isPlacing=!0},a.disablePlacing=function(){this.isPlacing=!1},a.removeElem=function(){this.element.parentNode.removeChild(this.element),this.layout.packer.addSpace(this.rect),this.emitEvent("remove",[this])},a.showDropPlaceholder=function(){var t=this.dropPlaceholder;t||(t=this.dropPlaceholder=document.createElement("div"),t.className="packery-drop-placeholder",t.style.position="absolute"),
t.style.width=this.size.width+"px",t.style.height=this.size.height+"px",this.positionDropPlaceholder(),this.layout.element.appendChild(t)},a.positionDropPlaceholder=function(){this.dropPlaceholder.style[i]="translate("+this.rect.x+"px, "+this.rect.y+"px)"},a.hideDropPlaceholder=function(){this.layout.element.removeChild(this.dropPlaceholder)},r}),function(t,e){"function"==typeof define&&define.amd?define(["get-size/get-size","outlayer/outlayer","./rect","./packer","./item"],e):"object"==typeof module&&module.exports?module.exports=e(require("get-size"),require("outlayer"),require("./rect"),require("./packer"),require("./item")):t.Packery=e(t.getSize,t.Outlayer,t.Packery.Rect,t.Packery.Packer,t.Packery.Item)}(window,function(t,e,n,i,r){"use strict";function a(t,e){return t.position.y-e.position.y||t.position.x-e.position.x}function o(t,e){return t.position.x-e.position.x||t.position.y-e.position.y}function s(t,e){var n=e.x-t.x,i=e.y-t.y;return Math.sqrt(n*n+i*i)}n.prototype.canFit=function(t){return this.width>=t.width-1&&this.height>=t.height-1};var u=e.create("packery");u.Item=r;var l=u.prototype;l._create=function(){e.prototype._create.call(this),this.packer=new i,this.shiftPacker=new i,this.isEnabled=!0,this.dragItemCount=0;var t=this;this.handleDraggabilly={dragStart:function(){t.itemDragStart(this.element)},dragMove:function(){t.itemDragMove(this.element,this.position.x,this.position.y)},dragEnd:function(){t.itemDragEnd(this.element)}},this.handleUIDraggable={start:function(e,n){n&&t.itemDragStart(e.currentTarget)},drag:function(e,n){n&&t.itemDragMove(e.currentTarget,n.position.left,n.position.top)},stop:function(e,n){n&&t.itemDragEnd(e.currentTarget)}}},l._resetLayout=function(){this.getSize(),this._getMeasurements();var t,e,n;this._getOption("horizontal")?(t=1/0,e=this.size.innerHeight+this.gutter,n="rightwardTopToBottom"):(t=this.size.innerWidth+this.gutter,e=1/0,n="downwardLeftToRight"),this.packer.width=this.shiftPacker.width=t,this.packer.height=this.shiftPacker.height=e,this.packer.sortDirection=this.shiftPacker.sortDirection=n,this.packer.reset(),this.maxY=0,this.maxX=0},l._getMeasurements=function(){this._getMeasurement("columnWidth","width"),this._getMeasurement("rowHeight","height"),this._getMeasurement("gutter","width")},l._getItemLayoutPosition=function(t){if(this._setRectSize(t.element,t.rect),this.isShifting||this.dragItemCount>0){var e=this._getPackMethod();this.packer[e](t.rect)}else this.packer.pack(t.rect);return this._setMaxXY(t.rect),t.rect},l.shiftLayout=function(){this.isShifting=!0,this.layout(),delete this.isShifting},l._getPackMethod=function(){return this._getOption("horizontal")?"rowPack":"columnPack"},l._setMaxXY=function(t){this.maxX=Math.max(t.x+t.width,this.maxX),this.maxY=Math.max(t.y+t.height,this.maxY)},l._setRectSize=function(e,n){var i=t(e),r=i.outerWidth,a=i.outerHeight;(r||a)&&(r=this._applyGridGutter(r,this.columnWidth),a=this._applyGridGutter(a,this.rowHeight)),n.width=Math.min(r,this.packer.width),n.height=Math.min(a,this.packer.height)},l._applyGridGutter=function(t,e){if(!e)return t+this.gutter;e+=this.gutter;var n=t%e,i=n&&1>n?"round":"ceil";return t=Math[i](t/e)*e},l._getContainerSize=function(){return this._getOption("horizontal")?{width:this.maxX-this.gutter}:{height:this.maxY-this.gutter}},l._manageStamp=function(t){var e,i=this.getItem(t);if(i&&i.isPlacing)e=i.rect;else{var r=this._getElementOffset(t);e=new n({x:this._getOption("originLeft")?r.left:r.right,y:this._getOption("originTop")?r.top:r.bottom})}this._setRectSize(t,e),this.packer.placed(e),this._setMaxXY(e)},l.sortItemsByPosition=function(){var t=this._getOption("horizontal")?o:a;this.items.sort(t)},l.fit=function(t,e,n){var i=this.getItem(t);i&&(this.stamp(i.element),i.enablePlacing(),this.updateShiftTargets(i),e=void 0===e?i.rect.x:e,n=void 0===n?i.rect.y:n,this.shift(i,e,n),this._bindFitEvents(i),i.moveTo(i.rect.x,i.rect.y),this.shiftLayout(),this.unstamp(i.element),this.sortItemsByPosition(),i.disablePlacing())},l._bindFitEvents=function(t){function e(){i++,2==i&&n.dispatchEvent("fitComplete",null,[t])}var n=this,i=0;t.once("layout",e),this.once("layoutComplete",e)},l.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&(this.options.shiftPercentResize?this.resizeShiftPercentLayout():this.layout())},l.needsResizeLayout=function(){var e=t(this.element),n=this._getOption("horizontal")?"innerHeight":"innerWidth";return e[n]!=this.size[n]},l.resizeShiftPercentLayout=function(){var e=this._getItemsForLayout(this.items),n=this._getOption("horizontal"),i=n?"y":"x",r=n?"height":"width",a=n?"rowHeight":"columnWidth",o=n?"innerHeight":"innerWidth",s=this[a];if(s=s&&s+this.gutter){this._getMeasurements();var u=this[a]+this.gutter;e.forEach(function(t){var e=Math.round(t.rect[i]/s);t.rect[i]=e*u})}else{var l=t(this.element)[o]+this.gutter,c=this.packer[r];e.forEach(function(t){t.rect[i]=t.rect[i]/c*l})}this.shiftLayout()},l.itemDragStart=function(t){if(this.isEnabled){this.stamp(t);var e=this.getItem(t);e&&(e.enablePlacing(),e.showDropPlaceholder(),this.dragItemCount++,this.updateShiftTargets(e))}},l.updateShiftTargets=function(t){this.shiftPacker.reset(),this._getBoundingRect();var e=this._getOption("originLeft"),i=this._getOption("originTop");this.stamps.forEach(function(t){var r=this.getItem(t);if(!r||!r.isPlacing){var a=this._getElementOffset(t),o=new n({x:e?a.left:a.right,y:i?a.top:a.bottom});this._setRectSize(t,o),this.shiftPacker.placed(o)}},this);var r=this._getOption("horizontal"),a=r?"rowHeight":"columnWidth",o=r?"height":"width";this.shiftTargetKeys=[],this.shiftTargets=[];var s,u=this[a];if(u=u&&u+this.gutter){var l=Math.ceil(t.rect[o]/u),c=Math.floor((this.shiftPacker[o]+this.gutter)/u);s=(c-l)*u;for(var f=0;c>f;f++)this._addShiftTarget(f*u,0,s)}else s=this.shiftPacker[o]+this.gutter-t.rect[o],this._addShiftTarget(0,0,s);var h=this._getItemsForLayout(this.items),d=this._getPackMethod();h.forEach(function(t){var e=t.rect;this._setRectSize(t.element,e),this.shiftPacker[d](e),this._addShiftTarget(e.x,e.y,s);var n=r?e.x+e.width:e.x,i=r?e.y:e.y+e.height;if(this._addShiftTarget(n,i,s),u)for(var a=Math.round(e[o]/u),l=1;a>l;l++){var c=r?n:e.x+u*l,f=r?e.y+u*l:i;this._addShiftTarget(c,f,s)}},this)},l._addShiftTarget=function(t,e,n){var i=this._getOption("horizontal")?e:t;if(!(0!==i&&i>n)){var r=t+","+e,a=-1!=this.shiftTargetKeys.indexOf(r);a||(this.shiftTargetKeys.push(r),this.shiftTargets.push({x:t,y:e}))}},l.shift=function(t,e,n){var i,r=1/0,a={x:e,y:n};this.shiftTargets.forEach(function(t){var e=s(t,a);r>e&&(i=t,r=e)}),t.rect.x=i.x,t.rect.y=i.y};var c=120;l.itemDragMove=function(t,e,n){function i(){a.shift(r,e,n),r.positionDropPlaceholder(),a.layout()}var r=this.isEnabled&&this.getItem(t);if(r){e-=this.size.paddingLeft,n-=this.size.paddingTop;var a=this,o=new Date;this._itemDragTime&&o-this._itemDragTime<c?(clearTimeout(this.dragTimeout),this.dragTimeout=setTimeout(i,c)):(i(),this._itemDragTime=o)}},l.itemDragEnd=function(t){function e(){i++,2==i&&(n.element.classList.remove("is-positioning-post-drag"),n.hideDropPlaceholder(),r.dispatchEvent("dragItemPositioned",null,[n]))}var n=this.isEnabled&&this.getItem(t);if(n){clearTimeout(this.dragTimeout),n.element.classList.add("is-positioning-post-drag");var i=0,r=this;n.once("layout",e),this.once("layoutComplete",e),n.moveTo(n.rect.x,n.rect.y),this.layout(),this.dragItemCount=Math.max(0,this.dragItemCount-1),this.sortItemsByPosition(),n.disablePlacing(),this.unstamp(n.element)}},l.bindDraggabillyEvents=function(t){this._bindDraggabillyEvents(t,"on")},l.unbindDraggabillyEvents=function(t){this._bindDraggabillyEvents(t,"off")},l._bindDraggabillyEvents=function(t,e){var n=this.handleDraggabilly;t[e]("dragStart",n.dragStart),t[e]("dragMove",n.dragMove),t[e]("dragEnd",n.dragEnd)},l.bindUIDraggableEvents=function(t){this._bindUIDraggableEvents(t,"on")},l.unbindUIDraggableEvents=function(t){this._bindUIDraggableEvents(t,"off")},l._bindUIDraggableEvents=function(t,e){var n=this.handleUIDraggable;t[e]("dragstart",n.start)[e]("drag",n.drag)[e]("dragstop",n.stop)};var f=l.destroy;return l.destroy=function(){f.apply(this,arguments),this.isEnabled=!1},u.Rect=n,u.Packer=i,u});var Constants=function(){return{"short":[{pos:[37.8651011,-119.5405181],label:"Yosemite National Park"},{pos:[36.5053891,-117.0815965],label:"Death Valley National Park"},{pos:[36.4863668,-118.5679403],label:"Sequoia National Park"},{pos:[41.2131788,-124.0068163],label:"Redwood National and State Parks"},{pos:[33.873415,-115.903181],label:"Joshua Tree National Park"},{pos:[36.7999904,-118.5675565],label:"Kings Canyon National Park"},{pos:[40.49766,-121.4228439],label:"Lassen Volcanic National Park"},{pos:[33.9960737,-119.7713519],label:"Channel Islands National Park"},{pos:[36.4905655,-121.1846812],label:"Pinnacles National Park"}],list:[{pos:[44.3385597,-68.2755179],state:"Maine",label:"Acadia National Park"},{pos:[38.7330852,-109.5946972],state:"Utah",label:"Arches National Park"},{pos:[43.8553842,-102.3418745],state:"South Dakota",label:"Badlands National Park"},{pos:[29.1274916,-103.2447212],state:"Texas",label:"Big Bend National Park"},{pos:[25.4824277,-80.2104936],state:"Florida",label:"Biscayne National Park"},{pos:[38.5753978,-107.7437794],state:"Colorado",label:"Black Canyon of the Gunnison National Park"},{pos:[37.5930419,-112.1892728],state:"Utah",label:"Bryce Canyon National Park"},{pos:[38.3268735,-109.8804425],state:"Utah",label:"Canyonlands National Park"},{pos:[38.3669745,-111.2636875],state:"Utah",label:"Capitol Reef National Park"},{pos:[32.1478598,-104.5588971],state:"New Mexico",label:"Carlsbad Caverns National Park"},{pos:[33.9960781,-119.7713465],state:"California",label:"Channel Islands National Park"},{pos:[33.7950042,-80.7733291],state:"South Carolina",label:"Congaree National Park"},{pos:[42.868445,-122.1706672],state:"Oregon",label:"Crater Lake National Park"},{pos:[41.2808288,-81.5700007],state:"Ohio",label:"Cuyahoga Valley National Park"},{pos:[36.5053934,-117.0815965],state:"California",label:"Death Valley National Park"},{pos:[63.1148026,-151.1947945],state:"Alaska",label:"Denali National Park"},{pos:[24.6284819,-82.8753761],state:"Florida",label:"Dry Tortugas National Park"},{pos:[25.2866203,-80.9008396],state:"Florida",label:"Everglades National Park"},{pos:[67.6854561,-153.3275855],state:"Alaska",label:"Gates of the Arctic National Park"},{pos:[58.6658101,-136.9024034],state:"Alaska",label:"Glacier Bay National Park"},{pos:[48.7596163,-113.7892112],state:"Montana",label:"Glacier National Park"},{pos:[36.1069695,-112.1151859],state:"Arizona",label:"Grand Canyon National Park"},{pos:[43.7904321,-110.6839514],state:"Wyoming",label:"Grand Teton National Park"},{pos:[38.9833371,-114.3021887],state:"Nevada",label:"Great Basin National Park"},{pos:[37.7916001,-105.5965163],state:"Colorado",label:"Great Sand Dunes National Park and Preserve"},{pos:[35.6117687,-83.4917336],state:"North Carolina",label:"Great Smoky Mountains National Park"},{pos:[31.8920125,-104.8226648],state:"Texas",label:"Guadalupe Mountains National Park"},{pos:[20.7203876,-156.1573411],state:"Hawaii",label:"Haleakala National Park"},{pos:[19.4193747,-155.2906856],state:"Hawaii",label:"Hawaii Volcanoes National Park"},{pos:[34.5172375,-93.0482342],state:"Arkansas",label:"Hot Springs National Park"},{pos:[47.995869,-88.9114786],state:"Michigan",label:"Isle Royale National Park"},{pos:[33.8734194,-115.903181],state:"California",label:"Joshua Tree National Park"},{pos:[58.5975314,-154.6959172],state:"Alaska",label:"Katmai National Park and Preserve"},{pos:[60.0437764,-149.8185584],state:"Alaska",label:"Kenai Fjords National Park"},{pos:[36.7999916,-118.5500469],state:"California",label:"Kings Canyon National Park"},{pos:[67.3543542,-159.1498261],state:"Alaska",label:"Kobuk Valley National Park"},{pos:[60.4300199,-154.3053671],state:"Alaska",label:"Lake Clark National Park"},{pos:[40.4976641,-121.4228385],state:"California",label:"Lassen Volcanic National Park"},{pos:[37.1870021,-86.1027113],state:"Kentucky",label:"Mammoth Cave National Park"},{pos:[37.2308772,-108.4640168],state:"Colorado",label:"Mesa Verde National Park"},{pos:[46.8799699,-121.7290927],state:"Washington",label:"Mount Rainier National Park"},{pos:[-14.2583281,-170.6855166],state:"Hawaii",label:"National Park of American Samoa"},{pos:[48.7718209,-121.3006481],state:"Washington",label:"North Cascades National Park"},{pos:[47.9690718,-123.500434],state:"Washington",label:"Olympic National Park"},{pos:[35.0659644,-109.7995067],state:"Arizona",label:"Petrified Forest National Park"},{pos:[41.2131828,-124.0068109],state:"California",label:"Redwood National Park"},{pos:[40.3427973,-105.6858222],state:"Colorado",label:"Rocky Mountain National Park"},{pos:[32.2967404,-111.1687983],state:"Arizona",label:"Saguaro National Park"},{pos:[36.4863711,-118.5679349],state:"California",label:"Sequoia National Park"},{pos:[38.29276,-78.6817723],state:"Virginia",label:"Shenandoah National Park"},{pos:[46.9789686,-103.5408924],state:"North Dakota",label:"Theodore Roosevelt National Park"},{pos:[18.3424098,-64.7507592],state:"Virgin Islands",label:"Virgin Islands National Park"},{pos:[48.5844479,-93.16385],state:"Minnesota",label:"Voyageurs National Park"},{pos:[43.604585,-103.4235266],state:"South Dakota",label:"Wind Cave National Park"},{pos:[61.7104448,-142.9856804],state:"Alaska",label:"Wrangell St. Elias National Park and Preserve"},{pos:[44.4279668,-110.5906383],state:"Wyoming",label:"Yellowstone National Park"},{pos:[37.8651053,-119.5405127],state:"California",label:"Yosemite National Park"},{pos:[37.2982064,-113.0284838],state:"Utah",label:"Zion National Park"}]}}(),Util=function(){return{map:function(t,e){for(var n=[],i=0;i<t.length;i++)n.push(e(t[i]));return n},getJSON:function(t,e,n){n=n||"jsonp"+Math.round(99999999*Math.random());var i=document.createElement("script"),r=document.getElementsByTagName("head")[0];window[n]=function(t){r.removeChild(i),e(t),delete window[n]},i.setAttribute("src",t+="&callback="+n),r.appendChild(i)},stringColor:function(t){var e,n,i="#",r=0;for(e=0;e<t.length;e++)r=t.charCodeAt(e)+((r<<5)-r);for(e=0;3>e;e++)n=r>>8*e&255,i+=("00"+n.toString(16)).substr(-2);return i}}}(),el=function(){return{addClass:function(t,e){t.className+=" "+e},removeClass:function(t,e,n){n=n||0,n>0?setTimeout(function(){t.className=t.className.replace(new RegExp(e,"g"),"")},n):t.className=t.className.replace(new RegExp(e,"g"),"")}}}(),NavModel=function(t){var e=this;e.isVisible=t,this.toggleSearchBar=function(){e.isVisible(!e.isVisible());var t=document.getElementsByTagName("nav")[0];e.isVisible()?el.addClass(t,"show"):el.removeClass(t,"show")},this.visibleClass=ko.pureComputed(function(){return e.isVisible()?"show":""},this)},MarkerModel=function(t,e,n,i,r){var a=this;a.pinIcon=function(t){return{path:"M256,0C167.625,0,96,71.625,96,160c0,23.875,5.25,46.563,14.594,66.875l121.875,264.469,C238.313,504.063,246.688,512,256,512s17.688-7.938,23.531-20.625l121.875-264.5C410.781,206.563,416,183.875,416,160,C416,71.625,344.375,0,256,0z M256,256c-53,0-96-43-96-96s43-96,96-96s96,43,96,96S309,256,256,256z",fillColor:t,fillOpacity:1,strokeColor:"none",strokeWeight:2,scale:.09,origin:new google.maps.Point(0,0),anchor:new google.maps.Point(256,512),labelOrigin:new google.maps.Point(256,170)}};var o=new google.maps.Marker({position:new google.maps.LatLng(i.pos[0],i.pos[1]),map:t,icon:a.pinIcon(Util.stringColor(i.label)),state:i.state,visible:i.isVisible()});google.maps.event.addListener(o,"click",function(){r(i.label)}),i.isVisible.subscribe(function(t){o.setVisible(t)}),this.isVisible=i.isVisible,this.isFiltered=i.isFiltered,this.isSelected=i.isSelected,this.elevation=i.elevation,this.getPosition=function(){return o.getPosition()},this.isLabel=function(t){return i.label===t},this.showInfo=function(){o.setAnimation(google.maps.Animation.DROP),e.open(t,o),e.setContent("<h3>"+i.label+"</h3>")}},MapModel=function(t,e,n){function i(t){var e=Util.map(t,function(t){return t.getPosition()});c.getElevationForLocations({locations:e},function(e,n){if(n===google.maps.ElevationStatus.OK)for(var i=0;i<e.length;i++)e[i]&&t[i].elevation(Math.round(e[i].elevation)+" meters")})}function r(t,e,n){for(var i=[],r=0;r<n.length;r++)n[r].isFiltered(t,e)?n[r].isVisible(!1):(n[r].isVisible(!0),i.push(n[r]));return i}function a(t){for(var e=0;e<h.length;e++)if(h[e].isLabel(t)){h[e].showInfo(),isNaN(h[e].elevation)&&i([h[e]]);break}}function o(){var t=document.getElementById("map"),e=10,n=new google.maps.Map(t,{zoom:1,maxZoom:e,minZoom:3,mapTypeId:google.maps.MapTypeId.TERRAIN,mapTypeControl:!0,streetViewControl:!1,zoomControl:!1});return google.maps.event.addListenerOnce(n,"tilesloaded",function(e){el.removeClass(t,"hide"),el.addClass(t,"show")}),google.maps.event.addListenerOnce(n,"bounds_changed",function(t){n.setZoom(n.getZoom()-1),this.getZoom()>e&&this.setZoom(e)}),n}function s(t,n){var i=[];n=n();for(var r=0;r<n.length;r++)i.push(new MarkerModel(t,l,c,n[r],e));return i}function u(t,e){if(google.maps.event.trigger(t,"resize"),e.length>0){for(var n=new google.maps.LatLngBounds,i=0;i<e.length;i++)n.extend(e[i].getPosition());t.setCenter(n.getCenter()),t.fitBounds(n),t.setZoom(t.getZoom()-1)}}var l=new google.maps.InfoWindow,c=new google.maps.ElevationService,f=o(),h=s(f,t);u(f,r(e(),n(),h)),e.subscribe(function(t){l.close(),el.addClass(document.getElementById("map"),"hide"),setTimeout(function(){el.removeClass(document.getElementById("map"),"hide"),u(f,r(e(),n(),h)),""!=t&&a(t)},250)}),n.subscribe(function(t){l.close(),setTimeout(function(){u(f,r(e(),t,h))},250)}),google.maps.event.addListener(l,"closeclick",function(){e("")})},ListModel=function(t,e,n){var i=this;i.listItems=t,i.search=e,i.stateFilter=n,i.isVisible=ko.observable(!1),i.selectItem=function(t){i.search(t.label),i.isVisible(!1)},i.filterBy=ko.computed(function(){for(var t,e=i.listItems(),n=0,r=0;r<e.length;r++)t=e[r],t.isVisible(!t.isFiltered(i.search(),i.stateFilter())),t.isVisible()&&n++;i.isVisible(n>0)})},SearchModel=function(t,e){this.search=t,e.subscribe(function(e){t("")}),this.clearSearch=function(){t("")}},StateFilterModel=function(t,e){var n=this;n.getUniqueValues=function(t){for(var e=[],n=0;n<t.length;n++)-1===e.indexOf(t[n].state)&&e.push(t[n].state);return e.sort(),e.length>0&&e.unshift("All States"),e},n.options=n.getUniqueValues(t()),n.filter=e};!function(){function t(){var t=ko.observableArray(Util.map(Constants.list,function(t){return new ListItemModel(t)})),e=ko.observable(""),n=ko.observable("California"),i=ko.observable(!1);ko.applyBindings(new NavModel(i),document.getElementById("menu")),ko.applyBindings(new MapModel(t,e,n),document.getElementById("map")),ko.applyBindings(new ListModel(t,e,n),document.getElementById("list")),ko.applyBindings(new SearchModel(e,n),document.getElementById("search")),ko.applyBindings(new StateFilterModel(t,n),document.getElementById("state")),ko.applyBindings(new DescriptionModel(t,e),document.getElementById("description")),ko.applyBindings(new PhotosModel(t,e),document.getElementById("photos"))}google.maps.event.addDomListener(window,"load",t)}();